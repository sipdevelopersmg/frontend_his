<org-card-layout [ButtonNav]="ButtonNav" (onClickButtonNav)="handleClickButtonNav($event)">
    <div class="row">
        <!-- Filter Offcanvas -->
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2">
            <mol-offcanvas-filter [FilterColumnDatasource]="FilterColumnDatasource"
                [FilterDropdownDatasource]="FilterDropdownDatasource" [FilterDropdownFields]="FilterDropdownFields"
                (handle-pencarian)="handlePencarianFilter($event)">
            </mol-offcanvas-filter>
        </div>

        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2">
            <div class="card">
                <div class="card-header px-2">
                    <p class="text-biru-muda mb-0">Daftar Transaksi Tutup Kasir</p>
                </div>
                <div class="card-body p-0">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <ejs-grid #GridTransaksiTutupKasir [id]="'GridDaftarTransaksiTutupKasir'"
                                [height]="screenWidth <= 1366 ? 'calc(100vh - 32rem)' : 'calc(100vh - 42rem)'"
                                [dataSource]="GridDatasource" [rowHeight]="30" [gridLines]="'Both'"
                                [allowResizing]="true" [allowFiltering]='true' [allowTextWrap]="true"
                                [textWrapSettings]="GridWrapSettings" (rowSelected)="handleSelectedRow($event)">
                                <e-columns>
                                    <e-column [width]="50" [field]="'id_saldo_kasir'" [headerText]="'ID'"
                                        [visible]="false" [type]="'number'" [allowEditing]="false"
                                        [allowSorting]="false" [format]="'N'" [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="80" [field]="'nomor_saldo_kasir'" [headerText]="'NO. FAKTUR'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="80" [field]="'user_name'" [headerText]="'NAMA KASIR'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="120" [field]="'waktu_buka_kasir'"
                                        [headerText]="'WAKTU BUKA KASIR'" [visible]="true" [allowEditing]="false"
                                        [allowSorting]="false" [textAlign]="'Left'" [type]="'DateTime'"
                                        [format]="'dd/MM/yyyy HH:mm:ss'">
                                    </e-column>
                                    <e-column [width]="120" [field]="'waktu_tutup_kasir'"
                                        [headerText]="'WAKTU TUTUP KASIR'" [visible]="true" [allowEditing]="false"
                                        [allowSorting]="false" [textAlign]="'Left'" [type]="'DateTime'"
                                        [format]="'dd/MM/yyyy HH:mm:ss'">
                                    </e-column>
                                    <e-column [width]="120" [field]="'keterangan_tutup_kasir'"
                                        [headerText]="'KET. TUTUP KASIR'" [visible]="false" [allowEditing]="false"
                                        [allowSorting]="false" [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="100" [field]="'jumlah_modal_awal'" [headerText]="'JUMLAH MODAL'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Right'" [headerTextAlign]="'Right'" [format]="'N2'">
                                    </e-column>
                                    <e-column [width]="150" [field]="'jumlah_penerimaan_ver_sistem'"
                                        [headerText]="'PENDAPATAN VERSI SISTEM'" [visible]="true" [allowEditing]="false"
                                        [allowSorting]="false" [textAlign]="'Right'" [headerTextAlign]="'Right'"
                                        [format]="'N2'">
                                    </e-column>
                                    <e-column [width]="150" [field]="'jumlah_penerimaan_ver_kasir'"
                                        [headerText]="'PENDAPATAN VERSI KASIR'" [visible]="true" [allowEditing]="false"
                                        [allowSorting]="false" [textAlign]="'Right'" [headerTextAlign]="'Right'"
                                        [format]="'N2'">
                                    </e-column>
                                </e-columns>
                            </ejs-grid>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pendapatan Versi Komputer -->
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <div class="card">
                <div class="card-header px-2">
                    <p class="text-biru-muda mb-0">Daftar Pendapatan Kasir Versi Sistem</p>
                </div>
                <div class="card-body p-0">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <ejs-grid #GridPendapatanVersiSistem [id]="'GridPendapatanVersiSistem'"
                                [height]="screenWidth <= 1366 ? 'calc(100vh - 32rem)' : 'calc(100vh - 42rem)'"
                                [dataSource]="GridPendapatanSistemDatasource" [rowHeight]="30" [gridLines]="'Both'"
                                [allowResizing]="true" [allowFiltering]='true'
                                (commandClick)="handleCommandClickVersiSistem($event)">
                                <e-columns>
                                    <e-column [width]="50" [field]="'id_saldo_kasir'" [headerText]="'ID'"
                                        [visible]="false" [type]="'number'" [allowEditing]="false"
                                        [allowSorting]="false" [format]="'N'" [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="50" [field]="'id_payment_method'" [headerText]="'ID'"
                                        [visible]="false" [type]="'number'" [allowEditing]="false"
                                        [allowSorting]="false" [format]="'N'" [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="100" [field]="'payment_method'" [headerText]="'METODE BAYAR'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="150" [field]="'jumlah_bayar'"
                                        [headerText]="'PENDAPATAN VERSI SISTEM'" [visible]="true" [allowEditing]="false"
                                        [allowSorting]="false" [textAlign]="'Right'" [headerTextAlign]="'Right'"
                                        [format]="'N2'">
                                    </e-column>
                                    <e-column [width]="70" [field]="'command'" [headerText]="'DETAIL'" [visible]="true"
                                        [allowEditing]="false" [allowSorting]="false" [textAlign]="'Center'"
                                        [headerTextAlign]="'Center'" [commands]="CommandLihatDetailVersiKomputer">
                                    </e-column>
                                </e-columns>
                            </ejs-grid>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pendapatan Versi Kasir -->
        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
            <div class="card">
                <div class="card-header px-2">
                    <p class="text-biru-muda mb-0">Daftar Pendapatan Kasir Versi Kasir</p>
                </div>
                <div class="card-body p-0">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <ejs-grid #GridPendapatanVersiKasir [id]="'GridPendapatanVersiKasir'"
                                [height]="screenWidth <= 1366 ? 'calc(100vh - 32rem)' : 'calc(100vh - 42rem)'"
                                [dataSource]="GridPendapatanKasirDatasource" [rowHeight]="30" [gridLines]="'Both'"
                                [allowResizing]="true" [allowFiltering]='true'>
                                <e-columns>
                                    <e-column [width]="50" [field]="'id_saldo_kasir'" [headerText]="'ID'"
                                        [visible]="false" [type]="'number'" [allowEditing]="false"
                                        [allowSorting]="false" [format]="'N'" [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="50" [field]="'id_payment_method'" [headerText]="'ID'"
                                        [visible]="false" [type]="'number'" [allowEditing]="false"
                                        [allowSorting]="false" [format]="'N'" [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="100" [field]="'payment_method'" [headerText]="'METODE BAYAR'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="150" [field]="'jumlah_penerimaan'"
                                        [headerText]="'PENDAPATAN VERSI KASIR'" [visible]="true" [allowEditing]="false"
                                        [allowSorting]="false" [textAlign]="'Right'" [headerTextAlign]="'Right'"
                                        [format]="'N2'">
                                    </e-column>
                                </e-columns>
                            </ejs-grid>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <app-modal-detail-pendapatan-sistem #DetailPendapatanSistem></app-modal-detail-pendapatan-sistem>

        <!-- Modal Validasi Cross Check Tutup Kasir  -->
        <ng-template #modalValidasiCrossCheck>
            <div class="modal-header background-biru-muda text-white px-2 py-1">
                <h5 class="modal-title pull-left">
                    Validasi Cross Check Tutup Kasir
                </h5>
                <button type="button" class="btn pull-right" aria-label="Close"
                    (click)="handleCloseModalValidasiCrossCheck()">
                    <i class="fas fa-window-close text-white"></i>
                </button>
            </div>
            <div class="modal-body pt-0 pb-2 px-2">
                <div class="row mx-0 my-1">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <form [formGroup]="FormValidasiCrossCheck">
                            <div class="row mb-2 align-items-center">
                                <!-- Alasan Pembatalan -->
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 px-0">
                                    <atm-label [LabelCaption]="'Keterangan'"></atm-label>

                                    <textarea rows="3" class="form-control mt-2" formControlName="keterangan_validasi">
                                    </textarea>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer background-abu-muda">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 px-0 text-end">
                        <button class="btn btn-secondary btn-sm mx-2" type="button"
                            (click)="handleCloseModalValidasiCrossCheck()">
                            <i class="fas fa-times fa-sm"></i>&nbsp; Tutup
                        </button>

                        <button class="btn btn-primary btn-sm" type="button"
                            (click)="handleSubmitValidasiCrossCheckTutupKasir(FormValidasiCrossCheck.value)">
                            <i class="fas fa-save fa-sm"></i>&nbsp; Validasi
                        </button>
                    </div>
                </div>
            </div>
        </ng-template>
    </div>
</org-card-layout>