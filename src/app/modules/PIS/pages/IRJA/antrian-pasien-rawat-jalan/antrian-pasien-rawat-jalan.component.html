<org-card-layout [ChangeHeaderRibbon]="true" [HeaderRibbon]="HeaderRibbon" [ButtonNav]="ButtonNav"
    (onClickButtonNav)="handleClickButtonNav($event)">
    <div class="row">
        <div class="col-lg-9 col-md-9 col-sm-9 col-xs-9">
            <div class="row mb-3" *ngFor="let item of DataDokter">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="card shadow-sm border-0">
                        <div class="card-header shadow-sm border rounded">
                            <div class="row">
                                <!-- Foto Dokter -->
                                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 text-center px-0">
                                    <img [src]="item.url_foto" alt="foto-dokter" class="img-thumbnail-antrian-irja">
                                </div>

                                <!-- Informasi Dokter -->
                                <div class="col-lg-9 col-md-9 col-xs-9 col-sm-9 px-0 pt-2">
                                    <!-- Nama Dokter -->
                                    <p class="mb-0 text-biru-muda" style="font-size: 22px;">
                                        {{ item.full_name | titlecase }}
                                    </p>

                                    <!-- Kode Dokter -->
                                    <p class="mb-0 text-abu-tua" style="font-size: 16px;">
                                        Kode Dokter : {{ item.kode_dokter }}
                                    </p>

                                    <!-- Spesialisasi Dokter -->
                                    <p class="mb-0 text-hitam-muda" style="font-size: 17px;">
                                        Spesialis {{ item.spesialisasi_dokter | titlecase }}
                                    </p>
                                </div>

                                <!-- Toggle Card Dokter Button -->
                                <div class="col-lg-1 col-md-1 col-sm-1 col-xs-1 text-end">
                                    <button id="btnCardDokter" class="btn btn-outline-primary btn-sm border-0"
                                        type="button" (click)="togglingCardDokter(item.kode_dokter)">
                                        <i [id]="'icon' + item.kode_dokter" class="fas fa-window-minimize fa-sm"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                        <div [id]="'card_body' + item.kode_dokter" class="card-body p-2 show-card-dokter">
                            <ejs-grid #GridData [id]="'GridDaftarPasien' + item.kode_dokter"
                                [dataSource]="item.daftar_pasien" [rowHeight]="30" [gridLines]="'Both'"
                                [allowPaging]="false" [allowResizing]="true" [allowFiltering]='true'
                                [pageSettings]="GridPageSettings" [editSettings]="GridDataEditSettings"
                                (rowSelected)="handleSelectedRow($event, 'GridDaftarPasien' + item.kode_dokter)">
                                <e-columns>
                                    <e-column [width]="50" [field]="'id_person'" [headerText]="'ID'" [visible]="false"
                                        [type]="'number'" [allowEditing]="false" [allowSorting]="false" [format]="'N'"
                                        [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="80" [field]="'no_antrian'" [headerText]="'NO. ANTRIAN'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="80" [field]="'tgl_admisi'" [headerText]="'TGL ADMISI'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'" [type]="'Date'" [format]="'dd/MM/yyyy'">
                                    </e-column>
                                    <e-column [width]="80" [field]="'no_rekam_medis'" [headerText]="'NO. RM'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'">
                                    </e-column>
                                    <e-column [width]="150" [field]="'nama_pasien'" [headerText]="'NAMA PASIEN'"
                                        [visible]="true" [allowEditing]="false" [allowSorting]="false"
                                        [textAlign]="'Left'">
                                    </e-column>
                                </e-columns>
                            </ejs-grid>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 visible-smooth" *ngIf="SelectedDataPasien">
            <div class="card shadow-sm">
                <div class="card-header">
                    <h5 class="mb-0 text-biru-muda">Detail Pasien {{ SelectedDataPasien.nama_pasien }}</h5>
                </div>
                <div class="card-body" style="height: calc(100vh - 12.5rem);">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center mb-3">
                            <img class="shadow-sm"
                                [src]="foto_pasien ? foto_pasien : '../../../../../../assets/image/pendaftaran-ulang-pasien/blank.png'"
                                alt="" style="height: 170px; width: 150px; border-radius: 5px;">
                        </div>

                        <!-- Nama Pasien -->
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-3 text-center">
                            <p class="mb-0 text-biru-muda">Nama Pasien </p>
                            <p class="mb-0 text-hitam-muda">
                                {{ SelectedDataPasien.nama_pasien | titlecase }}
                            </p>
                        </div>

                        <!-- No. Rekam Medis -->
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-3 text-center">
                            <p class="mb-0 text-biru-muda">No. Rekam Medis</p>
                            <p class="mb-0 text-hitam-muda">
                                {{ SelectedDataPasien.no_rekam_medis }}
                            </p>
                        </div>

                        <!-- Umur -->
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-3 text-center">
                            <p class="mb-0 text-biru-muda">Umur</p>
                            <p class="mb-0 text-hitam-muda">
                                {{ SelectedDataPasien.umur}}
                            </p>
                        </div>

                        <!-- Debitur -->
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-center">
                            <p class="mb-0 text-biru-muda">Debitur</p>
                            <p class="mb-0 text-hitam-muda">
                                {{ SelectedDataPasien.nama_debitur | titlecase}}
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <button id="btnOpenCariPoli" class="btn btn-outline-primary btn-sm me-4" hidden type="button"
            data-bs-toggle="offcanvas" data-bs-target="#offcanvasCariPoli" aria-controls="offcanvasCariPoli">
            <i class="fas fa-search fa-sm"></i> Open Offcanvas
        </button>

        <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasCariPoli"
            aria-labelledby="offcanvasCariPoliLabel">
            <div class="offcanvas-header">
                <h5 id="offcanvasCariPoliLabel">Pilih Poliklinik</h5>
                <button id="btnCloseFilter" type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                    aria-label="Close">
                </button>
            </div>
            <div class="offcanvas-body p-2">
                <div class="row">
                    <!-- Poliklinik -->
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2 mb-4">
                        <atm-label [LabelCaption]="'Poliklinik'"></atm-label>
                        <ejs-dropdownlist #DropdownPoli [dataSource]="DropdownPoliDatasource"
                            [fields]="DropdownPoliFields" [allowFiltering]="true" [cssClass]="'mt-2'">
                        </ejs-dropdownlist>
                    </div>

                    <!-- Button Search -->
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-end">
                        <button class="btn btn-secondary btn-sm mx-2" type="button" data-bs-dismiss="offcanvas">
                            Cancel
                        </button>
                        <button class="btn btn-primary btn-sm" type="button"
                            (click)="handlePencarianAntrianPoliklinik(DropdownPoli.value, DropdownPoli.text)">
                            Cari
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</org-card-layout>