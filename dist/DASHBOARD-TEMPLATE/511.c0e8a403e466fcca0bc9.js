(self.webpackChunkdashboard_template=self.webpackChunkdashboard_template||[]).push([[511],{511:(t,e,a)=>{"use strict";a.r(e),a.d(e,{PharmacyModule:()=>$i});var i=a(1116),n=a(1041),r=a(4839),o=a(5424),l=a(5366),d=a(7085),s=a(4703),u=a(5343),c=a(5959),p=a(1131),h=a(6799),m=a(7727),g=a(1611),f=a(7369),b=a(3393);let _=(()=>{class t{constructor(t,e){this.httpOperationService=t,this.notificationService=e,this.API=g.PHARMACY.TRANSAKSI_OBAT.TRANSAKSI_OBAT_IRJA}Insert(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}obatDiserahakan(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATEPENYERAHAN,{penjualan_obat_id:t}).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(f.d),l.LFG(b.g))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var T=a(5228);let S=(()=>{class t{constructor(){this.onCardHeaderToggleClicked=new l.vpe}ngOnInit(){this.WindowWidth=window.innerWidth}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["atm-card-header"]],inputs:{CardHeaderIcon:"CardHeaderIcon",CardHeaderColor:"CardHeaderColor",CardHeaderCaption:"CardHeaderCaption"},outputs:{onCardHeaderToggleClicked:"onCardHeaderToggleClicked"},decls:7,vars:10,consts:[[1,"row","px-2"],[1,"col-lg-1","col-md-2","col-sm-2","col-xs-2","px-0","text-center","DivIconCardHeader"],[1,"font-cabin","mb-0"],[1,"col-lg-10","col-md-10","col-sm-10","col-xs-10"],[1,"font-cabin","mb-0","text-white"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"p",2),l._UZ(3,"i"),l.qZA(),l.qZA(),l.TgZ(4,"div",3),l.TgZ(5,"p",4),l._uU(6),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(2),l.Udp("color",e.CardHeaderColor),l.xp6(1),l.Gre("fas ",e.CardHeaderIcon,""),l.ekj("fa-sm",e.WindowWidth>=1025)("fa-xs",e.WindowWidth<1025),l.xp6(3),l.hij(" ",e.CardHeaderCaption," "))},styles:[".DivIconCardHeader[_ngcontent-%COMP%]{background-color:#fff;border-radius:5px}.IconCardHeader[_ngcontent-%COMP%]{margin-left:2px}"]}),t})();function v(t,e){if(1&t&&(l.TgZ(0,"li",22),l.TgZ(1,"p",23),l._uU(2),l.qZA(),l.qZA()),2&t){const t=e.$implicit;l.Q6J("id",t.Id),l.xp6(2),l.lnq(" ",t.NamaObat," - ",t.Qty," ",t.Satuan," ")}}function k(t,e){if(1&t&&(l.TgZ(0,"div",19),l.TgZ(1,"ul",20),l.YNc(2,v,3,4,"li",21),l.qZA(),l.qZA()),2&t){const t=l.oxw();l.xp6(2),l.Q6J("ngForOf",t.DetailResep)}}function x(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",24),l.TgZ(1,"div",25),l.TgZ(2,"button",26),l.NdJ("click",function(){l.CHM(t);const e=l.oxw();return e.onMarkResepSudahDilayani(e.Id)}),l._UZ(3,"i",27),l._uU(4,"\xa0 Sedang Dilayani "),l.qZA(),l.qZA(),l.qZA()}}function A(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",24),l.TgZ(1,"div",25),l.TgZ(2,"button",26),l.NdJ("click",function(){l.CHM(t);const e=l.oxw();return e.onMarkResepAsComplete(e.Id)}),l._UZ(3,"i",27),l._uU(4,"\xa0 Resep Telah Selesai "),l.qZA(),l.qZA(),l.qZA()}}function w(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",24),l.TgZ(1,"div",25),l.TgZ(2,"button",26),l.NdJ("click",function(){l.CHM(t);const e=l.oxw();return e.onResepPindahKeAntrian(e.NoRegister)}),l._UZ(3,"i",27),l._uU(4,"\xa0 Pindah Ke Antrian "),l.qZA(),l.qZA(),l.qZA()}}let Z=(()=>{class t{constructor(t){this.utilityService=t,this.onClickedCardButton=new l.vpe,this.ShowDetailObat=!1,this.onMarkedResepAsComplete=new l.vpe,this.onMarkedResepSudahDilayani=new l.vpe,this.onPindahKeAntrian=new l.vpe}ngOnInit(){this.onGenerateCustomColor(),console.log(this.Status)}onClickCardButton(t,e,a,i,n,r){this.onClickedCardButton.emit({NamaPasien:t,Waktu:e,Status:a,NamaDokter:i,KodeResep:n,DetailResep:r})}onGenerateCustomColor(){this.BorderLeft="border-left: 0.25em solid "+this.utilityService.onGenerateCustomColor()+";"}onTogglingDetailObat(t){this.ShowDetailObat=!this.ShowDetailObat;let e=document.getElementById(t+"Caret");this.ShowDetailObat?(e.classList.remove("fa-caret-down"),e.classList.add("fa-caret-up")):(e.classList.add("fa-caret-down"),e.classList.remove("fa-caret-up"))}onMarkResepAsComplete(t){this.onMarkedResepAsComplete.emit(t)}onResepPindahKeAntrian(t){this.onPindahKeAntrian.emit(t)}onMarkResepSudahDilayani(t){this.onMarkedResepSudahDilayani.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(T.t))},t.\u0275cmp=l.Xpm({type:t,selectors:[["atm-card"]],inputs:{Id:"Id",NamaPasien:"NamaPasien",Waktu:"Waktu",Status:"Status",NamaDokter:"NamaDokter",KodeResep:"KodeResep",NoRegister:"NoRegister",NomorAntrian:"NomorAntrian",DetailResep:"DetailResep"},outputs:{onClickedCardButton:"onClickedCardButton",onMarkedResepAsComplete:"onMarkedResepAsComplete",onMarkedResepSudahDilayani:"onMarkedResepSudahDilayani",onPindahKeAntrian:"onPindahKeAntrian"},decls:37,vars:17,consts:[[1,"card","shadow-sm",3,"id","click"],[1,"card-body","p-2"],[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-1"],[1,"row","align-items-center"],[1,"font-cabin","mb-0","text-hitam","textSubTitle","fw-bold","text-center"],[1,"col-lg-7","col-md-7","col-sm-7","col-xs-7","pe-0"],[1,"font-cabin","mb-0","text-hitam","textSubTitle","fw-bold"],[1,"col-lg-5","col-md-5","col-sm-5","col-xs-5","text-end","ps-0"],[1,"font-cabin","mb-0","text-hitam-muda","textSubText"],[1,"font-cabin","mb-0","text-biru-tua"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","pe-0"],[1,"badge","bg-warning"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","text-end","ps-0",2,"cursor","pointer",3,"click"],[1,"font-cabin","mb-0","text-hitam-muda",2,"font-size","13px"],[1,"fas","fa-caret-down",3,"id"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-3",4,"ngIf"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12",4,"ngIf"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-3"],[1,"list-group"],["class","list-group-item px-2",3,"id",4,"ngFor","ngForOf"],[1,"list-group-item","px-2",3,"id"],[1,"font-cabin","mb-0","text-hitam-muda",2,"font-size","12px"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-check","fa-sm"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.NdJ("click",function(){return e.onClickCardButton(e.NamaPasien,e.Waktu,e.Status,e.NamaDokter,e.KodeResep,e.DetailResep)}),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"p",5),l._uU(6),l.qZA(),l.qZA(),l.qZA(),l.TgZ(7,"div",3),l.TgZ(8,"div",4),l.TgZ(9,"div",6),l.TgZ(10,"p",7),l._uU(11),l.qZA(),l.qZA(),l.TgZ(12,"div",8),l.TgZ(13,"p",9),l._uU(14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",3),l.TgZ(16,"div",4),l.TgZ(17,"div",6),l.TgZ(18,"p",10),l._uU(19),l.qZA(),l.qZA(),l.TgZ(20,"div",8),l.TgZ(21,"p",9),l._uU(22),l.ALo(23,"date"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(24,"div",11),l.TgZ(25,"div",4),l.TgZ(26,"div",12),l.TgZ(27,"span",13),l._uU(28),l.qZA(),l.qZA(),l.TgZ(29,"div",14),l.NdJ("click",function(){return e.onTogglingDetailObat(e.KodeResep)}),l.TgZ(30,"p",15),l._UZ(31,"i",16),l._uU(32,"\xa0 Lihat Detail Resep "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(33,k,3,1,"div",17),l.YNc(34,x,5,0,"div",18),l.YNc(35,A,5,0,"div",18),l.YNc(36,w,5,0,"div",18),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Akn(e.BorderLeft),l.Q6J("id",e.Id),l.xp6(6),l.hij(" ",e.NomorAntrian," "),l.xp6(5),l.hij(" ",e.NamaPasien," "),l.xp6(3),l.hij(" No.Reg ",e.NoRegister," "),l.xp6(5),l.hij(" ",e.NamaDokter," "),l.xp6(3),l.hij(" ",l.xi3(23,14,e.Waktu,"dd MMM yy, HH:mm:ss")," "),l.xp6(6),l.hij(" ",e.KodeResep," "),l.xp6(3),l.MGl("id","",e.KodeResep,"Caret"),l.xp6(2),l.Q6J("ngIf",e.ShowDetailObat),l.xp6(1),l.Q6J("ngIf","SiapDiracik"==e.Status),l.xp6(1),l.Q6J("ngIf","SedangDiracik"==e.Status),l.xp6(1),l.Q6J("ngIf","Data"==e.Status))},directives:[i.O5,i.sg],pipes:[i.uU],styles:[".textSubTitle[_ngcontent-%COMP%]{font-size:1.2rem}.badge[_ngcontent-%COMP%], .textSubText[_ngcontent-%COMP%]{font-size:13px}@media only screen and (min-width:992.98px) and (max-width:1199.98px){.textSubTitle[_ngcontent-%COMP%]{font-size:.85rem}.badge[_ngcontent-%COMP%]{font-size:12px}}"]}),t})();var C=a(8453);function y(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",7),l.TgZ(1,"div",9),l.TgZ(2,"input",10,11),l.NdJ("keyup",function(){l.CHM(t);const e=l.MAs(3);return l.oxw().onSearchFilter(e.value)})("change",function(){return l.CHM(t),l.oxw().onChangeSearchFilter()}),l.qZA(),l.qZA(),l.qZA()}}function D(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",12),l.TgZ(1,"atm-card",13),l.NdJ("onClickedCardButton",function(e){return l.CHM(t),l.oxw().onClickCard(e)})("onMarkedResepAsComplete",function(e){l.CHM(t);const a=l.oxw();return a.onMarkResepAsComplete(e,a.CardBodyData)})("onMarkedResepSudahDilayani",function(e){l.CHM(t);const a=l.oxw();return a.onMarkResepSudahDilayani(e,a.CardBodyData)})("onPindahKeAntrian",function(e){l.CHM(t);const a=l.oxw();return a.onPindahKeAntrian(e,a.CardBodyData)}),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit,a=l.oxw();l.MGl("id","",a.CdkDropListId,"List"),l.xp6(1),l.Q6J("Id",t.Id)("NoRegister",t.NoRegister)("NamaPasien",t.NamaPasien)("NomorAntrian",t.NomorAntrian)("Waktu",t.Waktu)("NamaDokter",t.NamaDokter)("KodeResep",t.KodeResep)("DetailResep",t.DetailResep)("Status",t.Status)}}function I(t,e){1&t&&(l.TgZ(0,"div",7),l.TgZ(1,"div",14),l.TgZ(2,"p",15),l._uU(3,"No Record To Display"),l.qZA(),l.qZA(),l.qZA())}let R=(()=>{class t{constructor(t,e,a,i,n){this.router=t,this.encryptionService=e,this.resepDokterService=a,this.transaksiObatIrjaService=i,this.utilityService=n,this.onClickedCard=new l.vpe,this.PindahKeAntrian=new l.vpe,this.HideBoard=!1}ngOnInit(){}onSortCardByDate(){this.CardBodyData.sort((t,e)=>new Date(e.Waktu).getTime()-new Date(t.Waktu).getTime())}onClickCard(t){}drop(t){t.previousContainer===t.container?(0,p.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,p.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),this.onChangeStatusAfterDrop(t.container.id,t.container.data),this.onSortCardByDate()}onChangeStatusAfterDrop(t,e){return e.forEach(e=>{e.Status=t}),e}onSearchFilter(t){this.Search=t}onMarkResepAsComplete(t,e){this.transaksiObatIrjaService.obatDiserahakan(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Berhasil Diserahkan",t.message).then(()=>{this.resepDokterService.onGetAntrian()})})}onMarkResepSudahDilayani(t,e){const a=this.encryptionService.encrypt(JSON.stringify(t));this.router.navigate(["dashboard/Pharmacy/transaksi-obat/transaksi-obat-irja",a,"GRAHCIS"])}onPindahKeAntrian(t){this.PindahKeAntrian.emit(t)}onChangeSearchFilter(){console.log(this.FilterPencarianGlobal)}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(o.F0),l.Y36(h.C),l.Y36(d.f),l.Y36(_),l.Y36(T.t))},t.\u0275cmp=l.Xpm({type:t,selectors:[["atm-board"]],inputs:{CdkDropListId:"CdkDropListId",CardHeaderBackgroundColor:"CardHeaderBackgroundColor",CardHeaderIcon:"CardHeaderIcon",CardHeaderCaption:"CardHeaderCaption",CardBodyData:"CardBodyData",ConnectedTo:"ConnectedTo",FilterPencarianGlobal:"FilterPencarianGlobal"},outputs:{onClickedCard:"onClickedCard",PindahKeAntrian:"PindahKeAntrian"},decls:11,vars:15,consts:[["cdkDropListGroup","",1,"row"],["cdkDropList","",1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2","px-2",3,"id","cdkDropListConnectedTo","cdkDropListData","cdkDropListDropped"],[1,"card","border-0","CardBoardHeight"],[1,"card-header","border-0"],[3,"CardHeaderIcon","CardHeaderColor","CardHeaderCaption"],[1,"card-body","px-1","pt-2","BoardHeight",3,"hidden"],["class","row",4,"ngIf"],[1,"row"],["cdkDrag","","class","col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2","style","cursor: move;",3,"id",4,"ngFor","ngForOf"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],["id","FilterPencarian","type","text","placeholder","Pencarian",1,"form-control",3,"keyup","change"],["FilterPencarian",""],["cdkDrag","",1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2",2,"cursor","move",3,"id"],[3,"Id","NoRegister","NamaPasien","NomorAntrian","Waktu","NamaDokter","KodeResep","DetailResep","Status","onClickedCardButton","onMarkedResepAsComplete","onMarkedResepSudahDilayani","onPindahKeAntrian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","pt-2"],[1,"font-cabin","mb-0","text-hitam-muda"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.NdJ("cdkDropListDropped",function(t){return e.drop(t)}),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._UZ(4,"atm-card-header",4),l.qZA(),l.TgZ(5,"div",5),l.YNc(6,y,4,0,"div",6),l.TgZ(7,"div",7),l.YNc(8,D,2,10,"div",8),l.ALo(9,"filter"),l.qZA(),l.YNc(10,I,4,0,"div",6),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.s9C("id",e.CdkDropListId),l.Q6J("cdkDropListConnectedTo",e.ConnectedTo)("cdkDropListData",e.CardBodyData),l.xp6(2),l.Udp("background-color",e.CardHeaderBackgroundColor),l.xp6(1),l.Q6J("CardHeaderIcon",e.CardHeaderIcon)("CardHeaderColor",e.CardHeaderBackgroundColor)("CardHeaderCaption",e.CardHeaderCaption),l.xp6(1),l.Q6J("hidden",e.HideBoard),l.xp6(1),l.Q6J("ngIf",(null==e.CardBodyData?null:e.CardBodyData.length)>0),l.xp6(2),l.Q6J("ngForOf",l.xi3(9,12,e.CardBodyData,e.Search)),l.xp6(2),l.Q6J("ngIf",(null==e.CardBodyData?null:e.CardBodyData.length)<1))},directives:[p.Fd,p.Wj,S,i.O5,i.sg,p.Zt,Z],pipes:[C.Z],styles:[".cdk-drag[_ngcontent-%COMP%]:hover{transition:all .25s;padding-left:.5rem;padding-right:.5rem;border:none!important}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%] > .card-body[_ngcontent-%COMP%]{background-color:#f5f5f5;transition:all .25s}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .3s cubic-bezier(0,0,.2,1)}.CardBoardHeight[_ngcontent-%COMP%]{height:calc(100vh - 10rem);max-height:calc(100vh - 10rem)}.BoardHeight[_ngcontent-%COMP%]{height:100%;overflow-y:auto;overflow-x:hidden}#FilterPencarian[_ngcontent-%COMP%]:focus{border-color:none!important;box-shadow:none!important}"]}),t})();function E(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"atm-board",2),l.NdJ("PindahKeAntrian",function(e){return l.CHM(t),l.oxw().PindahKeAntrian(e)}),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit,a=l.oxw();l.IyS("col-lg-",12/(null==a.Columns?null:a.Columns.length)," col-md-",24/(null==a.Columns?null:a.Columns.length)," col-sm-",48/(null==a.Columns?null:a.Columns.length),""),l.xp6(1),l.Q6J("CdkDropListId",t.KeyField)("CardHeaderBackgroundColor",t.HeaderBackgroundColor)("CardHeaderIcon",t.ColumnIcon)("CardHeaderCaption",t.HeaderText)("CardBodyData",t.Data)("ConnectedTo",t.ConnectedTo)("FilterPencarianGlobal",a.FilterPencarianGlobal)}}let N=(()=>{class t{constructor(){this.onPindahKeAntrian=new l.vpe,this.ConnectedTo=[],this.FilterPencarianGlobal=new c.xQ}ngOnInit(){}onFilterPencarianGlobal(t){this.FilterPencarianGlobal.next(t)}PindahKeAntrian(t){this.onPindahKeAntrian.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["mol-kanban-v1"]],inputs:{Columns:"Columns"},outputs:{onPindahKeAntrian:"onPindahKeAntrian"},decls:2,vars:1,consts:[[1,"row"],[3,"class",4,"ngFor","ngForOf"],[3,"CdkDropListId","CardHeaderBackgroundColor","CardHeaderIcon","CardHeaderCaption","CardBodyData","ConnectedTo","FilterPencarianGlobal","PindahKeAntrian"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.YNc(1,E,2,12,"div",1),l.qZA()),2&t&&(l.xp6(1),l.Q6J("ngForOf",e.Columns))},directives:[i.sg,R],styles:[""]}),t})(),q=(()=>{class t{constructor(t,e,a){this.resepDokterService=t,this.socket=e,this.router=a}ngOnInit(){this.resepDokterService.onGetAntrian(),this.onSocketAntrian(),this.onSocketPembayaran(),this.onSocketResep(),this.ButtonNav=[{Id:"buatResep",Captions:"Buat Resep",Icons1:"fa-file-prescription"}]}onSocketResep(){return this.socket.fromEvent("resep-callback").subscribe(t=>{console.log(t),this.resepDokterService.onGetAntrian()})}onSocketAntrian(){return this.socket.fromEvent("antrian-callback").subscribe(t=>{console.log(t),this.resepDokterService.onGetAntrian()})}onSocketPembayaran(){return this.socket.fromEvent("pembayaran-callback").subscribe(t=>{console.log(t),this.resepDokterService.onGetAntrian()})}onClickButtonNav(t){switch(t){case"buatResep":this.router.navigate(["dashboard/Pharmacy/transaksi-obat/input-resep-irja"])}}onTransferItem(){let t;t=this.Columns[0].Data[0],this.Columns[0].Data.splice(0,1),this.Columns[1].Data.push(t)}onTransferItemUsingDataDetailId(t,e,a){let i,n=this.Columns.filter(e=>e.KeyField==t),r=this.Columns.filter(t=>t.KeyField==e),o=n[0].Data.findIndex(t=>t.Id==a);-1!==o&&(i=n[0].Data[o],n[0].Data.splice(o,1),r[0].Data.push(i),i={})}handePindahAntrian(t){this.resepDokterService.generadeNoAntrian(t).subscribe(t=>{this.resepDokterService.onGetAntrian()})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(d.f),l.Y36(s.sk),l.Y36(o.F0))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-antrian-farmasi"]],decls:3,vars:4,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"Columns","onPindahKeAntrian"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"mol-kanban-v1",1),l.NdJ("onPindahKeAntrian",function(t){return e.handePindahAntrian(t)}),l.ALo(2,"async"),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("Columns",l.lcZ(2,2,e.resepDokterService.dataAntrianIrja)))},directives:[u.G,N],pipes:[i.Ov],styles:[""]}),t})();var G=a(654),O=a(8512),F=a(1305);const P=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var B=a.t(P,2);const J=JSON.parse('{"GridColumns":[{"field":"no_bill","headerText":"No Bill","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_bill","headerText":"Tgl Bill","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"depo","headerText":"Depo","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"pasien","headerText":"Pasien","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"no_rm","headerText":"No Rm","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"no_register","headerText":"No Register","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_masuk","headerText":"Tgl Masuk","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_pasien","headerText":"Nama Pasien","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"gender","headerText":"Sex","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Dokter","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_debitur","headerText":"Nama Debitur","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}]}');var M=a.t(J,2);const U=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var Q=a.t(U,2),L=a(2901),H=a(5470),j=a(3166),Y=a(4550),K=a(1998),V=a(1876);const W=["LookupNoRegistrasi"],z=["gridDetail"],X=["LookupItem"],$=["modalQty"],tt=["modalSatuan"],et=["modalCanceled"];function at(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Edit Qty"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",37),l.TgZ(8,"input",38,39),l.NdJ("keydown.enter",function(){l.CHM(t);const e=l.MAs(9);return l.oxw().handleQtyChange(e.value)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",40),l.TgZ(11,"button",41),l._uU(12,"Oke"),l.qZA(),l.qZA()}}function it(t,e){if(1&t&&(l.TgZ(0,"option",45),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("ngValue",t.kode_satuan),l.xp6(1),l.hij("",t.kode_satuan," ")}}function nt(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Edit Satuan"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",37),l.TgZ(8,"select",42,43),l.NdJ("keydown.enter",function(){l.CHM(t);const e=l.MAs(9);return l.oxw().handleSatuanChange(e.value)}),l.YNc(10,it,2,2,"option",44),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",40),l.TgZ(12,"button",41),l._uU(13,"Oke"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("value",t.detailSelected.kode_satuan_besar),l.xp6(2),l.Q6J("ngForOf",t.datasatuan)}}function rt(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Canceled"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",46),l.TgZ(8,"label",47),l.TgZ(9,"strong"),l._uU(10,"Reason Cancel"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",48),l._UZ(12,"input",49),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",40),l.TgZ(14,"button",50),l.NdJ("click",function(){return l.CHM(t),l.oxw().onCalceled()}),l._uU(15,"Cancel Data"),l.qZA(),l.TgZ(16,"button",51),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._uU(17,"Batal"),l.qZA(),l.qZA()}}let ot=(()=>{class t{constructor(t,e,a,i,n,r,o,l,d,s){this.formBuilder=t,this.pemakaianInternalService=e,this.encryptionService=a,this.activatedRoute=i,this.location=n,this.renderer=r,this.modalService=o,this.changeDetection=l,this.utilityService=d,this.setupItemService=s,this.urlNoRegistrasi=g.PHARMACY.RETUR_PENJUALAN.RETUR_PENJUALAN_OBAT_IRDA.GET_PASIEN_IRDA,this.LookupGridNoRegistrasi=Q,this.inputFieldState="detail",this.ButtonNav=[{Id:"Simpan",Captions:"simpan",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.GridLookUpItem=B,this.GridConfig=M,this.subscriptions=[],this.counterChildGrid=0,this.datasatuan=[],this.childGridSatuan=[],this.id_stockroom=0,this.dataSourceGrid=new O.X([]),this.dataScourceGridChild=[],this.totalJumlahItem=new O.X(0),this.itemBatch=[],this.id_item=new O.X(0),this.id=0}ngOnInit(){this.formInput=this.formBuilder.group({id_register:[""],depo:[""],debitur:[""],nama_pasien:[""],no_rm:[""],no_register:[""],dokter:[""],tanggal_lahir:[""],usia:[""],alamat:[""],ruang:[""],bed:[""]});let t=this.id_item,e=null;this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.childGridSatuan=this.pemakaianInternalService.getSatuanDetail(this.id_item.value),this.satuanObj=new G.NB({value:"",dataSource:this.childGridSatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem),e&&(this.satuanObj.value=e.satuan)}},this.itemsParams={create:()=>(this.itemsElem=document.createElement("input"),this.itemsElem),read:()=>this.itemsObj.text,destroy:()=>{this.itemsObj.destroy()},write:()=>{this.setupItemService.onGetEDItem(this.id_stockroom,t.value).subscribe(e=>{this.itemsObj=new G.NB({value:"",dataSource:e.data,fields:{value:"batch_number",text:"batch_number"},enabled:!0,placeholder:"Select a Batch",floatLabelType:"Never",change:(function(e){this.setFormGrif(e),t.next(e.itemData.id_item)}).bind(this)}),this.itemsObj.appendTo(this.itemsElem)}),e&&setTimeout(()=>{this.itemsObj.value=e.batch_number},500)}};let a=this.dataScourceGridChild,i=this.counterChildGrid,n=this.dataSourceGrid,r=this.totalJumlahItem;this.ChildGrid={dataSource:this.dataScourceGridChild,queryString:"id_item",rowHeight:30,allowResizing:!0,allowTextWrap:!1,textWrapSettings:{wrapMode:"Both"},toolbar:["Add","Edit","Delete","Update","Cancel"],editSettings:{allowEditing:!0,allowAdding:!0,allowDeleting:!0},columns:[{field:"no_urut",headerText:"urut",visible:!1},{field:"id_item",headerText:"id_item",width:100,visible:!1},{field:"batch_number",headerText:"Batch Number",editType:"dropdownedit",edit:this.itemsParams,width:200},{field:"expired_date",headerText:"Expired Date",textAlign:"Right",width:80,allowEditing:!1},{field:"qty_besar",headerText:"Banyak",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"satuan",headerText:"Satuan",visible:!1,editType:"dropdownedit",edit:this.satuanParams,width:200},{field:"isi",headerText:"Isi",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!1},{field:"qty",headerText:"Qty",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!0},{field:"nama_satuan",headerText:"Satuan",headerTextAlign:"Center",textAlign:"Left",width:100,format:"N2",allowEditing:!1,visible:!1},{field:"hpp_satuan",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1},{field:"sub_total",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1}],rowSelected(t){e=t.data},actionBegin(e){"add"===e.requestType&&(e.data.id_item=this.parentDetails.parentRowData.id_item,e.data.counterChildGrid=i++,t.next(this.parentDetails.parentRowData.id_item),console.log(t.value))},actionComplete(t){if("save"===t.requestType){if(console.log("complete",t),"add"===t.action&&a.push(t.data),"edit"===t.action){let e=a.map(t=>t.counterChildGrid).indexOf(t.data.counterChildGrid);a[e]=t.data}let e=[];n.value.forEach((t,i)=>{let n=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(n+=parseInt(e.qty_pemakaian_internal))}),t.qty=n,e.push(t)}),setTimeout(()=>{n.next(e),r.next(e.sum("qty_pemakaian_internal")),console.log(e)},500)}if("delete"===t.requestType){let e=a.map(t=>t.counterChildGrid).indexOf(t.data[0].counterChildGrid);a.splice(e,1);let i=[];n.value.forEach((t,e)=>{let n=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(n+=parseInt(e.qty_pemakaian_internal))}),t.qty=n,i.push(t)}),setTimeout(()=>{n.next(i),console.log(i)},500)}}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"| [*]=Ubah Banyak | [+]=Satuan |"}]}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onDataBound(){this.gridDetail.detailRowModule.expandAll()}setFormGrif(t){document.getElementsByName("expired_date")[0].value=t.itemData.expired_date,document.getElementsByName("nama_satuan")[0].value=t.itemData.nama_satuan,document.getElementsByName("hpp_satuan")[0].value=t.itemData.harga_satuan_netto}heandleSelectedNoRegistrasi(t){this.id_register.setValue(t.no_registrasi)}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectedPasien(t){}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuans,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.pemakaianInternalService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.pemakaianInternalService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}onLoadDetailData(t){this.pemakaianInternalService.onGetById(t).subscribe(e=>{this.id=parseInt(t),this.formInput.setValue({pemakaian_internal_id:parseInt(t),pic_pemberi:"",pic_penerima:"",time_serah_terima:new Date,total_transaksi:0}),this.id_stockroom=e.data.id_stockroom,this.pemakaianInternalService.getDetail(t).subscribe(t=>{t.data.map((t,e)=>t.qty=0),this.dataSourceGrid.next(t.data)})})}onOpenQty(){const t=(0,F.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,F.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){if(this.formInput.valid){let t=this.formInput.value;this.dataSourceGrid.subscribe(e=>{let a=e;a.map((t,e)=>t.detailBatch=[]),a.forEach((t,e)=>{let i=0;this.dataScourceGridChild.forEach((n,r)=>{t.id_item==n.id_item&&(n.qty_pemakaian_internal=parseFloat(n.qty_pemakaian_internal),n.hpp_satuan=parseFloat(n.hpp_satuan),n.sub_total=n.qty_pemakaian_internal*n.hpp_satuan,a[e].detailBatch.push(n),i+=n.sub_total)}),a[e].nominal_pemakaian_internal=i}),t.details=a,this.pemakaianInternalService.validasiPersetujuan(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.LookupNoRegistrasi.resetValue()})})})}else alert("isi semua data")}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":this.onSave();break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.pemakaianInternalService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}get id_register(){return this.formInput.get("id_register")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(L.q),l.Y36(h.C),l.Y36(o.gz),l.Y36(i.Ye),l.Y36(l.Qsj),l.Y36(H.tT),l.Y36(l.sBO),l.Y36(T.t),l.Y36(j.z))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-refund-obat-irda"]],viewQuery:function(t,e){if(1&t&&(l.Gf(W,5),l.Gf(z,5),l.Gf(X,5),l.Gf($,5),l.Gf(tt,5),l.Gf(et,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.LookupNoRegistrasi=t.first),l.iGM(t=l.CRH())&&(e.gridDetail=t.first),l.iGM(t=l.CRH())&&(e.LookupItem=t.first),l.iGM(t=l.CRH())&&(e.modalQty=t.first),l.iGM(t=l.CRH())&&(e.modalSatuan=t.first),l.iGM(t=l.CRH())&&(e.modalCanceled=t.first)}},decls:37,vars:55,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[3,"lookup-url","idTitle","modal-title","columns","filter-lookup","label","onGetSelectedData"],["LookupNoRegistrasi",""],["formControlName","no_rm",3,"label","inputFieldState"],["formControlName","debitur",3,"label","inputFieldState"],["formControlName","nama_pasien",3,"label","inputFieldState"],["formControlName","tanggal_lahir",3,"label","inputFieldState"],["formControlName","depo",3,"label","inputFieldState"],["formControlName","usia",3,"label","inputFieldState"],["formControlName","alamat",3,"label","inputFieldState"],["formControlName","ruang",3,"label","inputFieldState"],["formControlName","dokter",3,"label","inputFieldState"],[3,"editSettings","dataSource","gridLines","allowResizing","childGrid","actionComplete","toolbarClick","load","rowSelected","dataBound"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","no_bill","headerText","No Bill","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","Depo","headerText","Depo","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","user_entry","headerText","User Entry","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","waktu_entry","headerText","Waktu Entry","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Obat","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Obat","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_jual","headerText","QTY Jual","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_telah_diretur","headerText","QTY Telah Diretur","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_retur","headerText","QTY Akan Di Retur","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["modalQty",""],["modalSatuan",""],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"col-sm-4"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){if(1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"org-input-look-up",4,5),l.NdJ("onGetSelectedData",function(t){return e.heandleSelectedNoRegistrasi(t)}),l.qZA(),l._UZ(6,"mol-input-text",6),l._UZ(7,"mol-input-text",7),l._UZ(8,"mol-input-text",8),l._UZ(9,"mol-input-text",9),l.qZA(),l.TgZ(10,"div",3),l._UZ(11,"mol-input-text",10),l._UZ(12,"mol-input-text",11),l._UZ(13,"mol-input-text",12),l._UZ(14,"mol-input-text",13),l._UZ(15,"mol-input-text",14),l.qZA(),l.qZA(),l.TgZ(16,"ejs-grid",15,16),l.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)})("dataBound",function(){return e.onDataBound()}),l.ALo(18,"async"),l.TgZ(19,"e-columns"),l._UZ(20,"e-column",17),l._UZ(21,"e-column",18),l._UZ(22,"e-column",19),l._UZ(23,"e-column",20),l._UZ(24,"e-column",21),l._UZ(25,"e-column",22),l._UZ(26,"e-column",23),l._UZ(27,"e-column",24),l._UZ(28,"e-column",25),l._UZ(29,"e-column",26),l._UZ(30,"e-column",27),l.qZA(),l.qZA(),l.qZA(),l.YNc(31,at,13,0,"ng-template",null,28,l.W1O),l.YNc(33,nt,14,2,"ng-template",null,29,l.W1O),l.YNc(35,rt,18,0,"ng-template",null,30,l.W1O),l.qZA()),2&t){const t=l.MAs(5);l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("formGroup",e.formInput),l.xp6(3),l.Q6J("lookup-url",e.urlNoRegistrasi)("idTitle","no_registrasi")("modal-title","Data No Registrasi")("columns",t.columns)("filter-lookup",t.filter)("label","No Registrasi"),l.xp6(2),l.Q6J("label","No Rm")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Debitur")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Nama Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Tanggal Lahir")("inputFieldState",e.inputFieldState),l.xp6(2),l.Q6J("label","Depo Anda")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Usia")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Alamat Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Ruang / Bed")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Dokter")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("editSettings",e.GridDataEditSettings)("dataSource",l.lcZ(18,53,e.dataSourceGrid))("gridLines","Both")("allowResizing",!0)("childGrid",e.ChildGrid),l.xp6(4),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1)}},directives:[u.G,n._Y,n.JL,n.sg,Y.U,K._,n.JJ,n.u,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,i.sg,n.YN,n.Kr],pipes:[i.Ov],styles:[""]}),t})();const lt=JSON.parse('{"GridColumns":[{"field":"nomor_retur_penjualan_obat","headerText":"Nomor Refund","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_retur_penjualan_obat","headerText":"Tanggal Refund","type":"Date","format":"dd/MM/yyyy","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nomor_penjualan_obat","headerText":"No Penjualan","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_outlet","headerText":"Nama Outlet","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"keterangan_retur_penjualan_obat","headerText":"Keterangan","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item_retur","headerText":"Jumlah Item","type":"number","format":"","textAlign":"right","visible":true,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"Status","type":"string","format":"","textAlign":"right","visible":true,"editType":"defaultEdit"},{"field":"time_inputed","headerText":"Waktu Input","type":"Date","format":"dd/MM/yyyy","textAlign":"left","visible":true,"editType":"defaultEdit"}]}');var dt=a.t(lt,2);let st=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.RETUR_PENJUALAN.RETUR_PENJUALAN_OBAT_IRJA,this.dataSource=new O.X([]),this.dataTransaksiObat=new O.X([]),this._dataDetail=new O.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.sub_total_1=0,this.total_disc=0,this.sub_total_2=0,this.total_tax=0,this.total_transaksi=0,this.jumlah_item=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_ALL_BY_PARAMS,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetDataTransaksiObat(t){this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_ALL_PENJUALAN_BELUM_TERBAYAR,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)})).subscribe(t=>{this.dataTransaksiObat.next(t.data)})}getDetail(t){return this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_PENJUALAN_BY_HEADER_ID+"/"+t)}onGetAllByParamsSource(t){this.onGetAllByParams(t).subscribe(t=>{t&&this.dataSource.next(t.data)})}setDetail(t){this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t).subscribe(t=>{this.dataDetail=t.data})}addDataDetail(t){this.dataDetail=[...this.dataDetail,t],this.sum()}updateFromInline(t,e,a){this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_retur_penjualan_obat=e}sum(){this.total_transaksi=0,this.jumlah_item=this.dataDetail.sum("qty_retur_penjualan_obat")}Insert(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}validasiPersetujuan(t){return this.httpOperationService.defaultPutRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataTransaksiObat.next([])}getSatuanDetail(t){}Validation(t){return this.httpOperationService.defaultPutRequest(this.API.VALIDASI,{retur_penjualan_obat_id:t}).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Cancel(t,e){return this.httpOperationService.defaultPutRequest(this.API.CANCEL,{retur_penjualan_obat_id:t,reason_canceled:e}).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ut=a(2064),ct=a(9456);const pt=["GridData"];let ht=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.refundObatIrjaService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Refund",value:"tpo.nomor_retur_penjualan_obat"},{text:"No. Penjualan",value:"tpo.nomor_penjualan_obat"},{text:"Nama Outlet",value:"pso.nama_outlet"},{text:"Status Refund",value:"tpo.judul_kontrak"}],this.GridConfig=dt}ngAfterViewInit(){this.handlePencarianFilter([])}ngOnInit(){}handlePencarianFilter(t){this.refundObatIrjaService.onGetAllByParamsSource(t)}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/Pharmacy/refund-obat/refund-obat-irja");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.retur_penjualan_obat_id));this.router.navigate(["dashboard/Pharmacy/refund-obat/refund-obat-irja-detail",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}handleRowDataBound(t){let e=t.data.status_transaksi;"VALIDATED"==e&&t.row.classList.add("e-validation-background"),"CANCELED"==e&&t.row.classList.add("e-canceled-background"),"CLOSED"==e&&t.row.classList.add("e-closed-background")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(o.F0),l.Y36(h.C),l.Y36(st))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-refund-obat-irja-daftar"]],viewQuery:function(t,e){if(1&t&&l.Gf(pt,5),2&t){let t;l.iGM(t=l.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected","row-data-bound"],["GridData",""]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.TgZ(3,"mol-offcanvas-filter",3),l.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),l.qZA(),l.qZA(),l.TgZ(4,"div",4),l.TgZ(5,"mol-grid",5,6),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("row-data-bound",function(t){return e.handleRowDataBound(t)}),l.ALo(7,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav",e.ButtonNav),l.xp6(3),l.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),l.xp6(2),l.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",l.lcZ(7,7,e.refundObatIrjaService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[u.G,ut.W,ct.q],pipes:[i.Ov],styles:[""]}),t})();var mt=a(2501),gt=a.n(mt);const ft=JSON.parse('{"TrDetail":[{"allowEditing":false,"field":"retur_penjualan_obat_detail_id","headerText":"Id","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"no_urut","headerText":"No Urut","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"id_item","headerText":"Id Item","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true,"width":170},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"batch_number","headerText":"Batch","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true,"width":180},{"allowEditing":false,"field":"expired_date","headerText":"Expired","editType":"defaultEdit","type":"Date","format":"dd/MM/yyyy","textAlign":"left","headerTextAlign":"Center","visible":true,"width":200},{"allowEditing":true,"field":"qty_retur_penjualan_obat","headerText":"Banyak","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true,"width":200}]}');var bt=a.t(ft,2),_t=a(3163),Tt=a(3864);const St=["modalCanceled"],vt=["modalClosed"];function kt(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",16),l.TgZ(1,"h5",17),l._uU(2,"Canceled"),l.qZA(),l.TgZ(3,"button",18),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",19),l.qZA(),l.qZA(),l.TgZ(5,"div",20),l.TgZ(6,"div",21),l.TgZ(7,"div",12),l.TgZ(8,"label",22),l.TgZ(9,"strong"),l._uU(10,"Reason Cancel"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",23),l._UZ(12,"input",24),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",25),l.TgZ(14,"button",26),l.NdJ("click",function(){return l.CHM(t),l.oxw().onCalceled()}),l._uU(15,"Cancel Data"),l.qZA(),l.TgZ(16,"button",27),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._uU(17,"Batal"),l.qZA(),l.qZA()}}let xt=(()=>{class t{constructor(t,e,a,i,n,r,o){this.formBuilder=t,this.refundObatIrjaService=e,this.encryptionService=a,this.activatedRoute=i,this.location=n,this.utilityService=r,this.modalService=o,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Validasi",Captions:"Validasi",Icons1:"fa-check"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"}],this.ConfigGrid=bt}ngOnInit(){this.formInput=this.formBuilder.group({nomor_retur_penjualan_obat:[""],tanggal_retur_penjualan_obat:[null],nomor_penjualan_obat:[""],nama_outlet:[""],keterangan_retur_penjualan_obat:[""],jumlah_item_retur:[0]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);this.id=parseInt(t),console.log(t),this.onLoadDetailData(t)}onLoadDetailData(t){this.refundObatIrjaService.onGetById(t).subscribe(e=>{this.formInput.setValue({nomor_retur_penjualan_obat:e.data.nomor_retur_penjualan_obat,tanggal_retur_penjualan_obat:e.data.tanggal_retur_penjualan_obat,nomor_penjualan_obat:e.data.nomor_penjualan_obat,nama_outlet:e.data.nama_outlet,keterangan_retur_penjualan_obat:e.data.keterangan_retur_penjualan_obat,jumlah_item_retur:e.data.jumlah_item_retur}),this.refundObatIrjaService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":gt().fire({title:"Apakah anda yakin ingin validasi?",text:"",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Iya Validasi",cancelButtonText:"Tidak",focusCancel:!0}).then(t=>{t.isConfirmed&&this.onValidation()});break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}));break;case"Close":this.modalRef=this.modalService.show(this.modalClosed,Object.assign({},{class:"modal-lg"}))}}onValidation(){this.refundObatIrjaService.Validation(this.id).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Refund Berhasil Di Validasi",t.message).then(()=>{this.onLoadDetailData(this.id)})})}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.refundObatIrjaService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Refund Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(st),l.Y36(h.C),l.Y36(o.gz),l.Y36(i.Ye),l.Y36(T.t),l.Y36(H.tT))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-refund-obat-irja-detail"]],viewQuery:function(t,e){if(1&t&&(l.Gf(St,5),l.Gf(vt,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.modalCanceled=t.first),l.iGM(t=l.CRH())&&(e.modalClosed=t.first)}},decls:19,vars:20,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_retur_penjualan_obat",3,"label","inputFieldState"],["formControlName","tanggal_retur_penjualan_obat",3,"label","inputFieldState"],["formControlName","nomor_penjualan_obat",3,"label","inputFieldState"],["formControlName","nama_outlet",3,"label","inputFieldState"],["formControlName","keterangan_retur_penjualan_obat",3,"label","inputFieldState"],[3,"grid-DataSource","columns"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],["formControlName","jumlah_item_retur",3,"label","isFooter","inputFieldState"],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l._UZ(4,"mol-input-text",4),l._UZ(5,"mol-input-text",5),l._UZ(6,"mol-input-text",6),l.qZA(),l.TgZ(7,"div",3),l._UZ(8,"mol-input-text",7),l._UZ(9,"mol-input-textarea",8),l.qZA(),l.qZA(),l._UZ(10,"mol-grid",9),l.ALo(11,"async"),l.TgZ(12,"div",10),l._UZ(13,"div",11),l._UZ(14,"div",12),l.TgZ(15,"div",13),l._UZ(16,"mol-input-numeric",14),l.qZA(),l.qZA(),l.qZA(),l.YNc(17,kt,18,0,"ng-template",null,15,l.W1O),l.qZA()),2&t&&(l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("formGroup",e.formInput),l.xp6(3),l.Q6J("label","No Retur")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Tanggal Retur")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","No Penjualan Obat")("inputFieldState",e.inputFieldState),l.xp6(2),l.Q6J("label","Outlet")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Keterangan")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("grid-DataSource",l.lcZ(11,18,e.refundObatIrjaService.dataDetail$))("columns",e.ConfigGrid.TrDetail),l.xp6(6),l.Q6J("label","Jumlah Item")("isFooter",!0)("inputFieldState","detail")("inputFieldState","detail"))},directives:[u.G,n._Y,n.JL,n.sg,K._,n.JJ,n.u,_t.h,ct.q,Tt.G],pipes:[i.Ov],styles:[""]}),t})();const At=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var wt=a.t(At,2);const Zt=JSON.parse('{"GridColumns":[{"field":"nomor_penjualan_obat","headerText":"No Bill","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"tanggal_penjualan_obat","headerText":"Tgl Bill","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nama_outlet","headerText":"Depo","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"no_rekam_medis","headerText":"No Rm","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"no_register","headerText":"No Register","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tgl_masuk","headerText":"Tgl Masuk","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_pasien","headerText":"Nama Pasien","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"gender","headerText":"Sex","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Dokter","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_debitur","headerText":"Nama Debitur","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}]}');var Ct=a.t(Zt,2),yt=a(7862),Dt=a(3391),It=a(4594),Rt=a(151);const Et=["gridDetail"],Nt=["LookupItem"],qt=["modalQty"],Gt=["modalSatuan"],Ot=["modalCanceled"];function Ft(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",32),l.TgZ(1,"h5",33),l._uU(2,"Edit Qty"),l.qZA(),l.TgZ(3,"button",34),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",35),l.qZA(),l.qZA(),l.TgZ(5,"div",36),l.TgZ(6,"div",37),l.TgZ(7,"div",38),l.TgZ(8,"input",39,40),l.NdJ("keydown.enter",function(){l.CHM(t);const e=l.MAs(9);return l.oxw().handleQtyChange(e.value)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",41),l.TgZ(11,"button",42),l._uU(12,"Oke"),l.qZA(),l.qZA()}}function Pt(t,e){if(1&t&&(l.TgZ(0,"option",46),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("ngValue",t.kode_satuan),l.xp6(1),l.hij("",t.kode_satuan," ")}}function Bt(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",32),l.TgZ(1,"h5",33),l._uU(2,"Edit Satuan"),l.qZA(),l.TgZ(3,"button",34),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",35),l.qZA(),l.qZA(),l.TgZ(5,"div",36),l.TgZ(6,"div",37),l.TgZ(7,"div",38),l.TgZ(8,"select",43,44),l.NdJ("keydown.enter",function(){l.CHM(t);const e=l.MAs(9);return l.oxw().handleSatuanChange(e.value)}),l.YNc(10,Pt,2,2,"option",45),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",41),l.TgZ(12,"button",42),l._uU(13,"Oke"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("value",t.detailSelected.kode_satuan_besar),l.xp6(2),l.Q6J("ngForOf",t.datasatuan)}}function Jt(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",32),l.TgZ(1,"h5",33),l._uU(2,"Canceled"),l.qZA(),l.TgZ(3,"button",34),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",35),l.qZA(),l.qZA(),l.TgZ(5,"div",36),l.TgZ(6,"div",37),l.TgZ(7,"div",47),l.TgZ(8,"label",48),l.TgZ(9,"strong"),l._uU(10,"Reason Cancel"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",49),l._UZ(12,"input",50),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",41),l.TgZ(14,"button",51),l.NdJ("click",function(){return l.CHM(t),l.oxw().onCalceled()}),l._uU(15,"Cancel Data"),l.qZA(),l.TgZ(16,"button",52),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._uU(17,"Batal"),l.qZA(),l.qZA()}}let Mt=(()=>{class t{constructor(t,e,a,i,n,r,o,l,d){this.formBuilder=t,this.refundObatIrjaService=e,this.location=a,this.renderer=i,this.modalService=n,this.changeDetection=r,this.utilityService=o,this.setupItemService=l,this.setupOutletService=d,this.SetupOutletDropdownField={text:"nama_outlet",value:"id_outlet"},this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Reset",Captions:"Reset",Icons1:"fas fa-undo fa-sm"},{Id:"simpan",Captions:"simpan",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.GridLookUpItem=wt,this.GridConfig=Ct,this.subscriptions=[],this.counterChildGrid=0,this.datasatuan=[],this.childGridSatuan=[],this.id_stockroom=0,this.dataSourceGrid=new O.X([]),this.dataScourceGridChild=[],this.totalJumlahItem=new O.X(0),this.itemBatch=[],this.id_item=new O.X(0),this.id=0}ngOnInit(){this.formInput=this.formBuilder.group({penjualan_obat_id:[0],id_outlet_terima_retur:[0],tanggal_transaksi:[null],depo:[""],no_bill:[""],nama_pasien:[""],no_rm:[""],no_register:[""],keterangan_retur_penjualan_obat:[""]});let t=this.id_item,e=null;this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{}},this.itemsParams={create:()=>(this.itemsElem=document.createElement("input"),this.itemsElem),read:()=>this.itemsObj.text,destroy:()=>{this.itemsObj.destroy()},write:()=>{this.setupItemService.onGetEDItem(this.id_stockroom,t.value).subscribe(e=>{this.itemsObj=new G.NB({value:"",dataSource:e.data,fields:{value:"batch_number",text:"batch_number"},enabled:!0,placeholder:"Select a Batch",floatLabelType:"Never",change:(function(e){this.setFormGrif(e),t.next(e.itemData.id_item)}).bind(this)}),this.itemsObj.appendTo(this.itemsElem)}),e&&setTimeout(()=>{this.itemsObj.value=e.batch_number},500)}};let a=this.dataScourceGridChild,i=this.counterChildGrid,n=this.dataSourceGrid,r=this.totalJumlahItem;this.ChildGrid={dataSource:this.dataScourceGridChild,queryString:"penjualan_obat_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!1,textWrapSettings:{wrapMode:"Both"},toolbar:["Add","Edit","Delete","Update","Cancel"],editSettings:{allowEditing:!0,allowAdding:!0,allowDeleting:!0},columns:[{field:"penjualan_obat_id",headerText:"penjualan_obat_id",width:100,visible:!1},{field:"penjualan_obat_detail_id",headerText:"penjualan_obat_detail_id",width:100,visible:!1},{field:"no_urut",headerText:"urut",visible:!1},{field:"id_item",headerText:"id_item",width:100,visible:!1},{field:"batch_number",headerText:"Batch Number",textAlign:"Right",width:200},{field:"expired_date",headerText:"Expired Date",textAlign:"Right",width:80,editType:"datepickeredit",format:"dd MMMM yyyy"},{field:"qty_besar",headerText:"Banyak",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"satuan",headerText:"Satuan",visible:!1,editType:"dropdownedit",edit:this.satuanParams,width:200},{field:"isi",headerText:"Isi",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!1},{field:"qty_retur_penjualan_obat",headerText:"Qty",headerTextAlign:"Center",textAlign:"Right",width:50,format:"N2",allowEditing:!0},{field:"nama_satuan",headerText:"Satuan",headerTextAlign:"Center",textAlign:"Left",width:100,format:"N2",allowEditing:!1,visible:!1},{field:"harga_satuan_retur",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1},{field:"sub_total",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1}],rowSelected(t){e=t.data},actionBegin(e){"add"===e.requestType&&(e.data.id_item=this.parentDetails.parentRowData.id_item,e.data.penjualan_obat_id=this.parentDetails.parentRowData.penjualan_obat_id,e.data.penjualan_obat_detail_id=this.parentDetails.parentRowData.penjualan_obat_detail_id,e.data.harga_satuan_retur=this.parentDetails.parentRowData.harga_satuan,e.data.counterChildGrid=i++,t.next(this.parentDetails.parentRowData.id_item))},actionComplete(t){if("save"===t.requestType){if(console.log("complete",t),"add"===t.action&&a.push(t.data),"edit"===t.action){let e=a.map(t=>t.counterChildGrid).indexOf(t.data.counterChildGrid);a[e]=t.data}let e=[];n.value.forEach((t,i)=>{let n=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(n+=parseInt(e.qty_retur_penjualan_obat))}),t.qty_retur=n,e.push(t)}),n.next(e),r.next(e.sum("qty_retur"))}if("delete"===t.requestType){let e=a.map(t=>t.counterChildGrid).indexOf(t.data[0].counterChildGrid);a.splice(e,1);let i=[];n.value.forEach((t,e)=>{let n=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(n+=parseInt(e.qty_pemakaian_internal))}),t.qty=n,i.push(t)}),setTimeout(()=>{n.next(i),console.log(i)},500)}}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"| [*]=Ubah Banyak | [+]=Satuan |"}],this.setupOutletService.setDataSource()}onDataBound(){this.gridDetail.detailRowModule.expandAll()}setFormGrif(t){document.getElementsByName("expired_date")[0].value=t.itemData.expired_date,document.getElementsByName("nama_satuan")[0].value=t.itemData.nama_satuan,document.getElementsByName("hpp_satuan")[0].value=t.itemData.harga_satuan_netto}handleClickRefesh(){return""==this.depo.value?(this.utilityService.onShowingCustomAlert("warning","Validasi","Depo belum di pilih"),!1):null==this.tanggal_transaksi.value?(this.utilityService.onShowingCustomAlert("warning","Validasi","Tanggal transaksi penjualan belum di pilih"),!1):void this.refundObatIrjaService.onGetDataTransaksiObat([{columnName:"tpo.tanggal_penjualan_obat",filter:"equal",searchText:"",searchText2:this.utilityService.onFormatDate(this.tanggal_transaksi.value,"yyyy-MM-DD")},{columnName:"tpo.id_outlet",filter:"equal",searchText:this.depo.value,searchText2:""}])}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectedPasien(t){console.log(t.data),this.formInput.setValue({id_outlet_terima_retur:t.data.id_outlet,penjualan_obat_id:t.data.penjualan_obat_id,tanggal_transaksi:this.tanggal_transaksi.value,depo:this.depo.value,no_bill:t.data.nomor_penjualan_obat,nama_pasien:t.data.nama_pasien,no_rm:t.data.no_rekam_medis,no_register:t.data.no_register,keterangan_retur_penjualan_obat:""}),this.refundObatIrjaService.getDetail(t.data.penjualan_obat_id).subscribe(t=>{this.dataSourceGrid.next(t.data)})}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuans,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.refundObatIrjaService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.refundObatIrjaService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}onLoadDetailData(t){this.refundObatIrjaService.onGetById(t).subscribe(e=>{this.id=parseInt(t),this.formInput.setValue({pemakaian_internal_id:parseInt(t),pic_pemberi:"",pic_penerima:"",time_serah_terima:new Date,total_transaksi:0}),this.id_stockroom=e.data.id_stockroom,this.refundObatIrjaService.getDetail(t).subscribe(t=>{t.data.map((t,e)=>t.qty=0),this.dataSourceGrid.next(t.data)})})}onOpenQty(){const t=(0,F.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,F.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){if(this.formInput.valid){let t=this.formInput.value;this.dataScourceGridChild.map((t,e)=>(t.sub_total=t.qty_retur_penjualan_obat*t.harga_satuan_retur,t.no_urut=e+1,t)),t.jumlah_item_retur=this.dataScourceGridChild.sum("qty_retur_penjualan_obat"),t.total_transaksi_retur=this.dataScourceGridChild.sum("sub_total"),t.nomor_retur_penjualan_obat="23135",t.tanggal_retur_penjualan_obat="2021-12-10",console.log("data header",t),console.log("data detail",this.dataScourceGridChild),t.details=this.dataScourceGridChild,console.log("data",t),this.refundObatIrjaService.Insert(t).subscribe(t=>{console.log(t),this.utilityService.onShowingCustomAlert("success","Berhasil Refund Obat",t.message).then(()=>{this.onReset()})})}else alert("isi semua data")}onReset(){this.formInput.reset(),this.dataScourceGridChild=[],this.dataSourceGrid.next([]),this.ChildGrid.dataSource=[]}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Reset":this.onReset();break;case"simpan":this.onSave()}}get tanggal_transaksi(){return this.formInput.get("tanggal_transaksi")}get depo(){return this.formInput.get("depo")}get no_bill(){return this.formInput.get("no_bill")}get nama_pasien(){return this.formInput.get("nama_pasien")}get no_rm(){return this.formInput.get("no_rm")}get no_register(){return this.formInput.get("no_register")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(st),l.Y36(i.Ye),l.Y36(l.Qsj),l.Y36(H.tT),l.Y36(l.sBO),l.Y36(T.t),l.Y36(j.z),l.Y36(yt.A))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-refund-obat-irja"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Et,5),l.Gf(Nt,5),l.Gf(qt,5),l.Gf(Gt,5),l.Gf(Ot,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.gridDetail=t.first),l.iGM(t=l.CRH())&&(e.LookupItem=t.first),l.iGM(t=l.CRH())&&(e.modalQty=t.first),l.iGM(t=l.CRH())&&(e.modalSatuan=t.first),l.iGM(t=l.CRH())&&(e.modalCanceled=t.first)}},decls:43,vars:46,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","depo",3,"dataSource","fields","allowFiltering"],["MaritalOutletDropdown",""],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4","mb-2"],["formControlName","tanggal_transaksi",3,"label","format"],[1,"col-lg-2","col-md-2","col-sm-2","col-xs-2","mb-2"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected"],["GridResep",""],[1,"row","mb-2","mt-2"],["formControlName","nama_pasien",3,"label","inputFieldState"],["formControlName","no_register",3,"label","inputFieldState"],["formControlName","no_rm",3,"label","inputFieldState"],["formControlName","keterangan_retur_penjualan_obat",3,"label"],[3,"editSettings","dataSource","gridLines","allowResizing","childGrid","height","actionComplete","toolbarClick","load","rowSelected","dataBound"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Obat","editType","defaultEdit","textAlign","left","headerTextAlign","center","width","100",3,"visible","allowEditing"],["field","nama_obat","headerText","Nama Obat","editType","defaultEdit","textAlign","left","headerTextAlign","center","width","300",3,"visible","allowEditing"],["field","qty_jual","headerText","QTY Jual","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2","width","100",3,"visible","allowEditing"],["field","qty_returned","headerText","QTY Telah Diretur","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2","width","100",3,"visible","allowEditing"],["field","qty_retur","headerText","QTY Akan Di Retur","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2","width","100",3,"visible","allowEditing"],["modalQty",""],["modalSatuan",""],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"col-sm-4"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",2),l.TgZ(5,"div",4),l._UZ(6,"atm-label",5),l.qZA(),l.TgZ(7,"div",6),l._UZ(8,"ejs-dropdownlist",7,8),l.ALo(10,"async"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",9),l._UZ(12,"mol-datepicker-syncfusion",10),l.qZA(),l.TgZ(13,"div",11),l.TgZ(14,"button",12),l.NdJ("click",function(){return e.handleClickRefesh()}),l._uU(15,"Refresh"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"mol-grid",13,14),l.NdJ("row-selected",function(t){return e.handleSelectedPasien(t)}),l.ALo(18,"async"),l.qZA(),l.TgZ(19,"div",15),l.TgZ(20,"div",3),l._UZ(21,"mol-input-text",16),l._UZ(22,"mol-input-text",17),l.qZA(),l.TgZ(23,"div",3),l._UZ(24,"mol-input-text",18),l._UZ(25,"mol-input-textarea",19),l.qZA(),l.qZA(),l.TgZ(26,"ejs-grid",20,21),l.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)})("dataBound",function(){return e.onDataBound()}),l.ALo(28,"async"),l.TgZ(29,"e-columns"),l._UZ(30,"e-column",22),l._UZ(31,"e-column",23),l._UZ(32,"e-column",24),l._UZ(33,"e-column",25),l._UZ(34,"e-column",26),l._UZ(35,"e-column",27),l._UZ(36,"e-column",28),l.qZA(),l.qZA(),l.qZA(),l.YNc(37,Ft,13,0,"ng-template",null,29,l.W1O),l.YNc(39,Bt,14,2,"ng-template",null,30,l.W1O),l.YNc(41,Jt,18,0,"ng-template",null,31,l.W1O),l.qZA()),2&t&&(l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("formGroup",e.formInput),l.xp6(5),l.Q6J("LabelCaption","Depo"),l.xp6(2),l.Q6J("dataSource",l.lcZ(10,40,e.setupOutletService.dataSource))("fields",e.SetupOutletDropdownField)("allowFiltering",!0),l.xp6(4),l.Q6J("label","Tanggal")("format","dd MMMM yyyy"),l.xp6(4),l.Q6J("grid-height","6rem")("grid-DataSource",l.lcZ(18,42,e.refundObatIrjaService.dataTransaksiObat))("grid-paging",!1)("grid-lines","Both")("columns",e.GridConfig.GridColumns),l.xp6(5),l.Q6J("label","Nama Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","No. Register")("inputFieldState",e.inputFieldState),l.xp6(2),l.Q6J("label","No. RM")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Keterangan"),l.xp6(1),l.Q6J("editSettings",e.GridDataEditSettings)("dataSource",l.lcZ(28,44,e.dataSourceGrid))("gridLines","Both")("allowResizing",!0)("childGrid",e.ChildGrid)("height","calc(100vh - 31rem)"),l.xp6(4),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1))},directives:[u.G,n._Y,n.JL,n.sg,Dt.D,It.rI,n.JJ,n.u,Rt.i,ct.q,K._,_t.h,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,i.sg,n.YN,n.Kr],pipes:[i.Ov],styles:["#DropdownObat[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}#NumericQty[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{text-align:right;padding-right:5px}div.head[_ngcontent-%COMP%]{font-size:13px!important;font-weight:500!important}.is-racikan[_ngcontent-%COMP%]{background-color:#f3e6f3}.form_paragraf[_ngcontent-%COMP%]{display:inline-block!important}.form-label[_ngcontent-%COMP%]{margin-bottom:0}#basic-addon1[_ngcontent-%COMP%]{height:32px;padding-left:12px;width:100%;border-top-left-radius:0;border-bottom-left-radius:0;border:0}.e-toolbar[_ngcontent-%COMP%]   .e-toolbar-item[_ngcontent-%COMP%]   .e-tbar-btn.e-btn[_ngcontent-%COMP%]   .e-icons.e-btn-icon[_ngcontent-%COMP%]{min-height:14px!important}th.e-headercell[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.03);color:#000;border:1px solid rgba(0,0,0,.13);padding:5px!important;height:30px!important}span.e-headertext[_ngcontent-%COMP%]{font-size:13px!important}td.e-rowcell[_ngcontent-%COMP%]{padding:5px!important}"]}),t})();const Ut=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var Qt=a.t(Ut,2);const Lt=JSON.parse('{"GridColumns":[{"field":"no_bill","headerText":"No Bill","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_bill","headerText":"Tgl Bill","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"depo","headerText":"Depo","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"pasien","headerText":"Pasien","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"no_rm","headerText":"No Rm","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"no_register","headerText":"No Register","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_masuk","headerText":"Tgl Masuk","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_pasien","headerText":"Nama Pasien","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"gender","headerText":"Sex","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Dokter","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_debitur","headerText":"Nama Debitur","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}]}');var Ht=a.t(Lt,2),jt=a(8830);const Yt=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var Kt=a.t(Yt,2);const Vt=["LookupNoRegistrasi"],Wt=["gridDetail"],zt=["LookupItem"],Xt=["modalQty"],$t=["modalSatuan"],te=["modalCanceled"];function ee(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Edit Qty"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",37),l.TgZ(8,"input",38,39),l.NdJ("keydown.enter",function(){l.CHM(t);const e=l.MAs(9);return l.oxw().handleQtyChange(e.value)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",40),l.TgZ(11,"button",41),l._uU(12,"Oke"),l.qZA(),l.qZA()}}function ae(t,e){if(1&t&&(l.TgZ(0,"option",45),l._uU(1),l.qZA()),2&t){const t=e.$implicit;l.Q6J("ngValue",t.kode_satuan),l.xp6(1),l.hij("",t.kode_satuan," ")}}function ie(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Edit Satuan"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",37),l.TgZ(8,"select",42,43),l.NdJ("keydown.enter",function(){l.CHM(t);const e=l.MAs(9);return l.oxw().handleSatuanChange(e.value)}),l.YNc(10,ae,2,2,"option",44),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",40),l.TgZ(12,"button",41),l._uU(13,"Oke"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("value",t.detailSelected.kode_satuan_besar),l.xp6(2),l.Q6J("ngForOf",t.datasatuan)}}function ne(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Canceled"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",46),l.TgZ(8,"label",47),l.TgZ(9,"strong"),l._uU(10,"Reason Cancel"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(11,"div",48),l._UZ(12,"input",49),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",40),l.TgZ(14,"button",50),l.NdJ("click",function(){return l.CHM(t),l.oxw().onCalceled()}),l._uU(15,"Cancel Data"),l.qZA(),l.TgZ(16,"button",51),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._uU(17,"Batal"),l.qZA(),l.qZA()}}let re=(()=>{class t{constructor(t,e,a,i,n,r,o,l,d,s){this.formBuilder=t,this.pemakaianInternalService=e,this.encryptionService=a,this.activatedRoute=i,this.location=n,this.renderer=r,this.modalService=o,this.changeDetection=l,this.utilityService=d,this.setupItemService=s,this.urlNoRegistrasi=jt.MM.SETUP_DATA.SETUP_COA.GET_ALL_BY_PARMS,this.LookupGridNoRegistrasi=Kt,this.inputFieldState="detail",this.ButtonNav=[{Id:"Simpan",Captions:"simpan",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.GridLookUpItem=Qt,this.GridConfig=Ht,this.subscriptions=[],this.counterChildGrid=0,this.datasatuan=[],this.childGridSatuan=[],this.id_stockroom=0,this.dataSourceGrid=new O.X([]),this.dataScourceGridChild=[],this.totalJumlahItem=new O.X(0),this.itemBatch=[],this.id_item=new O.X(0),this.id=0}ngOnInit(){this.formInput=this.formBuilder.group({id_register:[""],depo:[""],debitur:[""],nama_pasien:[""],no_rm:[""],no_register:[""],dokter:[""],tanggal_lahir:[""],usia:[""],alamat:[""],ruang:[""],bed:[""]});let t=this.id_item,e=null;this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.childGridSatuan=this.pemakaianInternalService.getSatuanDetail(this.id_item.value),this.satuanObj=new G.NB({value:"",dataSource:this.childGridSatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem),e&&(this.satuanObj.value=e.satuan)}},this.itemsParams={create:()=>(this.itemsElem=document.createElement("input"),this.itemsElem),read:()=>this.itemsObj.text,destroy:()=>{this.itemsObj.destroy()},write:()=>{this.setupItemService.onGetEDItem(this.id_stockroom,t.value).subscribe(e=>{this.itemsObj=new G.NB({value:"",dataSource:e.data,fields:{value:"batch_number",text:"batch_number"},enabled:!0,placeholder:"Select a Batch",floatLabelType:"Never",change:(function(e){this.setFormGrif(e),t.next(e.itemData.id_item)}).bind(this)}),this.itemsObj.appendTo(this.itemsElem)}),e&&setTimeout(()=>{this.itemsObj.value=e.batch_number},500)}};let a=this.dataScourceGridChild,i=this.counterChildGrid,n=this.dataSourceGrid,r=this.totalJumlahItem;this.ChildGrid={dataSource:this.dataScourceGridChild,queryString:"id_item",rowHeight:30,allowResizing:!0,allowTextWrap:!1,textWrapSettings:{wrapMode:"Both"},toolbar:["Add","Edit","Delete","Update","Cancel"],editSettings:{allowEditing:!0,allowAdding:!0,allowDeleting:!0},columns:[{field:"no_urut",headerText:"urut",visible:!1},{field:"id_item",headerText:"id_item",width:100,visible:!1},{field:"batch_number",headerText:"Batch Number",editType:"dropdownedit",edit:this.itemsParams,width:200},{field:"expired_date",headerText:"Expired Date",textAlign:"Right",width:80,allowEditing:!1},{field:"qty_besar",headerText:"Banyak",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"satuan",headerText:"Satuan",visible:!1,editType:"dropdownedit",edit:this.satuanParams,width:200},{field:"isi",headerText:"Isi",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!1},{field:"qty",headerText:"Qty",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!0},{field:"nama_satuan",headerText:"Satuan",headerTextAlign:"Center",textAlign:"Left",width:100,format:"N2",allowEditing:!1,visible:!1},{field:"hpp_satuan",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1},{field:"sub_total",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1}],rowSelected(t){e=t.data},actionBegin(e){"add"===e.requestType&&(e.data.id_item=this.parentDetails.parentRowData.id_item,e.data.counterChildGrid=i++,t.next(this.parentDetails.parentRowData.id_item),console.log(t.value))},actionComplete(t){if("save"===t.requestType){if(console.log("complete",t),"add"===t.action&&a.push(t.data),"edit"===t.action){let e=a.map(t=>t.counterChildGrid).indexOf(t.data.counterChildGrid);a[e]=t.data}let e=[];n.value.forEach((t,i)=>{let n=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(n+=parseInt(e.qty_pemakaian_internal))}),t.qty=n,e.push(t)}),setTimeout(()=>{n.next(e),r.next(e.sum("qty_pemakaian_internal")),console.log(e)},500)}if("delete"===t.requestType){let e=a.map(t=>t.counterChildGrid).indexOf(t.data[0].counterChildGrid);a.splice(e,1);let i=[];n.value.forEach((t,e)=>{let n=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(n+=parseInt(e.qty_pemakaian_internal))}),t.qty=n,i.push(t)}),setTimeout(()=>{n.next(i),console.log(i)},500)}}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"| [*]=Ubah Banyak | [+]=Satuan |"}]}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onDataBound(){this.gridDetail.detailRowModule.expandAll()}setFormGrif(t){document.getElementsByName("expired_date")[0].value=t.itemData.expired_date,document.getElementsByName("nama_satuan")[0].value=t.itemData.nama_satuan,document.getElementsByName("hpp_satuan")[0].value=t.itemData.harga_satuan_netto}heandleSelectedNoRegistrasi(t){this.id_register.setValue(t.no_registrasi)}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectedPasien(t){}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuans,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.pemakaianInternalService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.pemakaianInternalService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}onLoadDetailData(t){this.pemakaianInternalService.onGetById(t).subscribe(e=>{this.id=parseInt(t),this.formInput.setValue({pemakaian_internal_id:parseInt(t),pic_pemberi:"",pic_penerima:"",time_serah_terima:new Date,total_transaksi:0}),this.id_stockroom=e.data.id_stockroom,this.pemakaianInternalService.getDetail(t).subscribe(t=>{t.data.map((t,e)=>t.qty=0),this.dataSourceGrid.next(t.data)})})}onOpenQty(){const t=(0,F.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,F.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){if(this.formInput.valid){let t=this.formInput.value;this.dataSourceGrid.subscribe(e=>{let a=e;a.map((t,e)=>t.detailBatch=[]),a.forEach((t,e)=>{let i=0;this.dataScourceGridChild.forEach((n,r)=>{t.id_item==n.id_item&&(n.qty_pemakaian_internal=parseFloat(n.qty_pemakaian_internal),n.hpp_satuan=parseFloat(n.hpp_satuan),n.sub_total=n.qty_pemakaian_internal*n.hpp_satuan,a[e].detailBatch.push(n),i+=n.sub_total)}),a[e].nominal_pemakaian_internal=i}),t.details=a,this.pemakaianInternalService.validasiPersetujuan(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.LookupNoRegistrasi.resetValue()})})})}else alert("isi semua data")}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":this.onSave();break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.pemakaianInternalService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}get id_register(){return this.formInput.get("id_register")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(L.q),l.Y36(h.C),l.Y36(o.gz),l.Y36(i.Ye),l.Y36(l.Qsj),l.Y36(H.tT),l.Y36(l.sBO),l.Y36(T.t),l.Y36(j.z))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-refund-obat-irna"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Vt,5),l.Gf(Wt,5),l.Gf(zt,5),l.Gf(Xt,5),l.Gf($t,5),l.Gf(te,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.LookupNoRegistrasi=t.first),l.iGM(t=l.CRH())&&(e.gridDetail=t.first),l.iGM(t=l.CRH())&&(e.LookupItem=t.first),l.iGM(t=l.CRH())&&(e.modalQty=t.first),l.iGM(t=l.CRH())&&(e.modalSatuan=t.first),l.iGM(t=l.CRH())&&(e.modalCanceled=t.first)}},decls:37,vars:55,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[3,"lookup-url","idTitle","modal-title","columns","filter-lookup","label","onGetSelectedData"],["LookupNoRegistrasi",""],["formControlName","no_rm",3,"label","inputFieldState"],["formControlName","debitur",3,"label","inputFieldState"],["formControlName","nama_pasien",3,"label","inputFieldState"],["formControlName","tanggal_lahir",3,"label","inputFieldState"],["formControlName","depo",3,"label","inputFieldState"],["formControlName","usia",3,"label","inputFieldState"],["formControlName","alamat",3,"label","inputFieldState"],["formControlName","ruang",3,"label","inputFieldState"],["formControlName","dokter",3,"label","inputFieldState"],[3,"editSettings","dataSource","gridLines","allowResizing","childGrid","actionComplete","toolbarClick","load","rowSelected","dataBound"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","no_bill","headerText","No Bill","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","Depo","headerText","Depo","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","user_entry","headerText","User Entry","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","waktu_entry","headerText","Waktu Entry","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Obat","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Obat","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_jual","headerText","QTY Jual","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_telah_diretur","headerText","QTY Telah Diretur","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_retur","headerText","QTY Akan Di Retur","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["modalQty",""],["modalSatuan",""],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],[1,"col-sm-4"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){if(1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"org-input-look-up",4,5),l.NdJ("onGetSelectedData",function(t){return e.heandleSelectedNoRegistrasi(t)}),l.qZA(),l._UZ(6,"mol-input-text",6),l._UZ(7,"mol-input-text",7),l._UZ(8,"mol-input-text",8),l._UZ(9,"mol-input-text",9),l.qZA(),l.TgZ(10,"div",3),l._UZ(11,"mol-input-text",10),l._UZ(12,"mol-input-text",11),l._UZ(13,"mol-input-text",12),l._UZ(14,"mol-input-text",13),l._UZ(15,"mol-input-text",14),l.qZA(),l.qZA(),l.TgZ(16,"ejs-grid",15,16),l.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)})("dataBound",function(){return e.onDataBound()}),l.ALo(18,"async"),l.TgZ(19,"e-columns"),l._UZ(20,"e-column",17),l._UZ(21,"e-column",18),l._UZ(22,"e-column",19),l._UZ(23,"e-column",20),l._UZ(24,"e-column",21),l._UZ(25,"e-column",22),l._UZ(26,"e-column",23),l._UZ(27,"e-column",24),l._UZ(28,"e-column",25),l._UZ(29,"e-column",26),l._UZ(30,"e-column",27),l.qZA(),l.qZA(),l.qZA(),l.YNc(31,ee,13,0,"ng-template",null,28,l.W1O),l.YNc(33,ie,14,2,"ng-template",null,29,l.W1O),l.YNc(35,ne,18,0,"ng-template",null,30,l.W1O),l.qZA()),2&t){const t=l.MAs(5);l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("formGroup",e.formInput),l.xp6(3),l.Q6J("lookup-url",e.urlNoRegistrasi)("idTitle","no_registrasi")("modal-title","Data No Registrasi")("columns",t.columns)("filter-lookup",t.filter)("label","No Registrasi"),l.xp6(2),l.Q6J("label","No Rm")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Debitur")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Nama Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Tanggal Lahir")("inputFieldState",e.inputFieldState),l.xp6(2),l.Q6J("label","Depo Anda")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Usia")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Alamat Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Ruang / Bed")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Dokter")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("editSettings",e.GridDataEditSettings)("dataSource",l.lcZ(18,53,e.dataSourceGrid))("gridLines","Both")("allowResizing",!0)("childGrid",e.ChildGrid),l.xp6(4),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1)}},directives:[u.G,n._Y,n.JL,n.sg,Y.U,K._,n.JJ,n.u,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,i.sg,n.YN,n.Kr],pipes:[i.Ov],styles:["#DropdownObat[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}#NumericQty[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{text-align:right;padding-right:5px}div.head[_ngcontent-%COMP%]{font-size:13px!important;font-weight:500!important}.is-racikan[_ngcontent-%COMP%]{background-color:#f3e6f3}.form_paragraf[_ngcontent-%COMP%]{display:inline-block!important}.form-label[_ngcontent-%COMP%]{margin-bottom:0}#basic-addon1[_ngcontent-%COMP%]{height:32px;padding-left:12px;width:100%;border-top-left-radius:0;border-bottom-left-radius:0;border:0}.e-toolbar[_ngcontent-%COMP%]   .e-toolbar-item[_ngcontent-%COMP%]   .e-tbar-btn.e-btn[_ngcontent-%COMP%]   .e-icons.e-btn-icon[_ngcontent-%COMP%]{min-height:14px!important}th.e-headercell[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.03);color:#000;border:1px solid rgba(0,0,0,.13);padding:5px!important;height:30px!important}span.e-headertext[_ngcontent-%COMP%]{font-size:13px!important}td.e-rowcell[_ngcontent-%COMP%]{padding:5px!important}"]}),t})(),oe=(()=>{class t{constructor(){this.ResepRacikan=new O.X([]),this.DetailResepRacikan=new O.X([])}onGetResepRacikanDummy(){return this.ResepRacikan.next([{id_obat:1,is_racikan:!0,kode_obat:"TES1",nama_obat:"OBAT A",jumlah:5,satuan:"pcs",harga:5e3,diskon:0,subtotal:25e3,detail_racikan:[]},{id_obat:2,is_racikan:!1,kode_obat:"TES2",nama_obat:"OBAT B",jumlah:1,satuan:"",harga:5e3,diskon:0,subtotal:5e3,detail_racikan:[]},{id_obat:3,is_racikan:!0,kode_obat:"TES1",nama_obat:"OBAT A",jumlah:5,satuan:"pcs",harga:5e3,diskon:0,subtotal:25e3,detail_racikan:[]},{id_obat:4,is_racikan:!1,kode_obat:"TES2",nama_obat:"OBAT B",jumlah:1,satuan:"",harga:5e3,diskon:0,subtotal:5e3,detail_racikan:[{id_obat:4,kode_obat:"TES21",nama_obat:"HOLIMOX 500 MG",satuan:"",satuan_terkecil:"TABLET",dosis_obat:.5,dosis_yg_diinginkan:.5,jumlah:1,harga:2500,subtotal:2500},{id_obat:4,kode_obat:"TES22",nama_obat:"AZOMAX 500 MG",satuan:"",satuan_terkecil:"TABLET",dosis_obat:.5,dosis_yg_diinginkan:.5,jumlah:1,harga:2500,subtotal:2500}]}]),this.ResepRacikan.asObservable()}onGetDetailResepRacikanDummy(){const t=[];return this.ResepRacikan.value.map(e=>{t.push(...e.detail_racikan)}),this.DetailResepRacikan.next(t),this.DetailResepRacikan.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const le=["GridResepRacikan"];let de=(()=>{class t{constructor(t){this.resepRacikanService=t,this.GridResepRacikanDatasource=[],this.GridDetailResepRacikanDatasource=[],this.ChildGrid={dataSource:this.GridDetailResepRacikanDatasource,queryString:"id_obat",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},toolbar:[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-xs",id:"Add"}],editSettings:{allowAdding:!0},columns:[{field:"id_obat",headerText:"ID Obat",visible:!1},{field:"nama_obat",headerText:"Nama Obat",width:200},{field:"satuan",headerText:"Satuan",width:100},{field:"satuan_terkecil",headerText:"Satuan Terkecil",width:100},{field:"dosis_obat",headerText:"Dosis Obat",textAlign:"Right",width:80},{field:"dosis_yg_diinginkan",headerText:"Dosis yang Diinginkan",width:100,headerTextAlign:"Center",textAlign:"Right"},{field:"jumlah",headerText:"Jumlah",textAlign:"Right",width:100,format:"N2"},{field:"harga",headerText:"Harga (Rp)",textAlign:"Right",width:100,format:"N2"},{field:"subtotal",headerText:"Subtotal (Rp)",textAlign:"Right",width:100,format:"N2"}]}}ngOnInit(){this.resepRacikanService.onGetResepRacikanDummy().subscribe(t=>{this.GridResepRacikanDatasource=t})}onLoad(t){this.resepRacikanService.onGetDetailResepRacikanDummy().subscribe(t=>{this.GridResepRacikan.childGrid.dataSource=t})}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(oe))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-resep-racikan"]],viewQuery:function(t,e){if(1&t&&l.Gf(le,5),2&t){let t;l.iGM(t=l.CRH())&&(e.GridResepRacikan=t.first)}},features:[l._Bn([V.B41])],decls:18,vars:3,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"card-header"],[1,"mb-0","text-biru-muda"],[1,"card-body","p-0"],["height","calc(100vh - 13rem)","gridLines","Both","rowHeight","30",3,"dataSource","childGrid","load"],["GridResepRacikan",""],["field","id_obat","headerText","Nama Obat","textAlign","Left",3,"visible"],["field","nama_obat","headerText","Nama Obat","textAlign","Left"],["field","jumlah","headerText","Jumlah","textAlign","Center","format","N1"],["field","satuan","headerText","Satuan","textAlign","Left"],["field","harga","headerText","Harga (Rp)","textAlign","Right","format","N2"],["field","diskon","headerText","Diskon (%)","textAlign","Right","format","N2"],["field","subtotal","headerText","Subtotal (Rp)","textAlign","Right","format","N2"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l.TgZ(5,"h5",4),l._uU(6,"Resep Racikan Example"),l.qZA(),l.qZA(),l.TgZ(7,"div",5),l.TgZ(8,"ejs-grid",6,7),l.NdJ("load",function(t){return e.onLoad(t)}),l.TgZ(10,"e-columns"),l._UZ(11,"e-column",8),l._UZ(12,"e-column",9),l._UZ(13,"e-column",10),l._UZ(14,"e-column",11),l._UZ(15,"e-column",12),l._UZ(16,"e-column",13),l._UZ(17,"e-column",14),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(8),l.Q6J("dataSource",e.GridResepRacikanDatasource)("childGrid",e.ChildGrid),l.xp6(3),l.Q6J("visible",!1))},directives:[u.G,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR],styles:[".e-toolbar[_ngcontent-%COMP%]   .e-toolbar-item[_ngcontent-%COMP%]   .e-tbar-btn.e-btn[_ngcontent-%COMP%]   .e-icons.e-btn-icon[_ngcontent-%COMP%]{min-height:14px!important}th.e-headercell[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.03);color:#000;border:1px solid rgba(0,0,0,.13);padding:10px!important;height:30px!important}span.e-headertext[_ngcontent-%COMP%]{font-size:13px!important}td.e-rowcell[_ngcontent-%COMP%]{padding:10px!important}"]}),t})();const se=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_cara_pakai_obat","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_cara_pakai_obat","headerText":"Kode Cara Pakai Obat","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"cara_pakai_obat","headerText":"Cara Pakai Obat","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var ue=a.t(se,2),ce=a(1329),pe=a(651),he=a(8511),me=a(1753),ge=a(8952);const fe=["OrgTabsRef"],be=function(){return[]};let _e=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupCaraPakaiObatService=a,this.GridConfig=ue,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_cara_pakai_obat:[0,[]],kode_cara_pakai_obat:["",[n.kI.required]],cara_pakai_obat:["",[n.kI.required]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_cara_pakai_obat)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset()}GetAllData(){this.setupCaraPakaiObatService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataCaraPakaiObat(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupCaraPakaiObatService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupCaraPakaiObatService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_cara_pakai_obat:e};console.log("data",a),console.log("is_active",t),t?this.setupCaraPakaiObatService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupCaraPakaiObatService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get kode_cara_pakai_obat(){return this.FormInputData.get("kode_cara_pakai_obat")}get cara_pakai_obat(){return this.FormInputData.get("cara_pakai_obat")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(T.t),l.Y36(ce.n))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-setup-cara-pakai-obat"]],viewQuery:function(t,e){if(1&t&&l.Gf(fe,7),2&t){let t;l.iGM(t=l.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:22,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_cara_pakai_obat",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","cara_pakai_obat",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),l.TgZ(1,"org-tabs",1,2),l.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),l.TgZ(3,"org-tabs-item"),l.TgZ(4,"org-tabs-label",3),l._uU(5,"Data Cara Pakai Obat"),l.qZA(),l.TgZ(6,"org-tabs-body"),l.TgZ(7,"mol-grid",4,5),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"org-tabs-item"),l.TgZ(10,"org-tabs-label",3),l._uU(11,"Input Cara Pakai Obat"),l.qZA(),l.TgZ(12,"org-tabs-body"),l.TgZ(13,"form",6),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l._UZ(16,"mol-input-text",9),l._UZ(17,"mol-input-text",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:l.DdM(21,be)),l.xp6(1),l.Q6J("showHeader",!1),l.xp6(3),l.Q6J("Id","Data"),l.xp6(3),l.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("Id","Input"),l.xp6(3),l.Q6J("formGroup",e.FormInputData),l.xp6(3),l.Q6J("label","Kode Cara Pakai Obat")("IsFormControlInvalid",e.kode_cara_pakai_obat.invalid)("ValidatorsCaption","Kode Cara Pakai Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),l.xp6(1),l.Q6J("label","Nama Cara Pakai Obat")("IsFormControlInvalid",e.cara_pakai_obat.invalid)("ValidatorsCaption","Nama Cara Pakai Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[u.G,pe.D,he.K,me.x,ge.C,ct.q,n._Y,n.JL,n.sg,K._,n.JJ,n.u],styles:[""]}),t})();const Te=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_grup_obat","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_grup_obat","headerText":"Kode Grup Obat","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"nama_grup_obat","headerText":"Nama Grup Obat","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Se=a.t(Te,2),ve=a(3186);const ke=["OrgTabsRef"],xe=function(){return[]};let Ae=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupGrupObatService=a,this.GridConfig=Se,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_grup_obat:["",[]],kode_grup_obat:["",[n.kI.required]],nama_grup_obat:["",[n.kI.required]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_grup_obat)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset()}GetAllData(){this.setupGrupObatService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataGrupObat(){console.log("Add")}SetFrom(t){delete t.user_created,delete t.time_created,delete t.user_deactived,delete t.time_deactived,this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupGrupObatService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupGrupObatService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_grup_obat:e};console.log("data",a),console.log("is_active",t),t?this.setupGrupObatService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupGrupObatService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get kode_grup_obat(){return this.FormInputData.get("kode_grup_obat")}get nama_grup_obat(){return this.FormInputData.get("nama_grup_obat")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(T.t),l.Y36(ve.$))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-setup-grup-obat"]],viewQuery:function(t,e){if(1&t&&l.Gf(ke,7),2&t){let t;l.iGM(t=l.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:22,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_grup_obat",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","nama_grup_obat",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),l.TgZ(1,"org-tabs",1,2),l.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),l.TgZ(3,"org-tabs-item"),l.TgZ(4,"org-tabs-label",3),l._uU(5,"Data Grup Obat"),l.qZA(),l.TgZ(6,"org-tabs-body"),l.TgZ(7,"mol-grid",4,5),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"org-tabs-item"),l.TgZ(10,"org-tabs-label",3),l._uU(11,"Input Grup Obat"),l.qZA(),l.TgZ(12,"org-tabs-body"),l.TgZ(13,"form",6),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l._UZ(16,"mol-input-text",9),l._UZ(17,"mol-input-text",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:l.DdM(21,xe)),l.xp6(1),l.Q6J("showHeader",!1),l.xp6(3),l.Q6J("Id","Data"),l.xp6(3),l.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("Id","Input"),l.xp6(3),l.Q6J("formGroup",e.FormInputData),l.xp6(3),l.Q6J("label","Kode Grup Obat")("IsFormControlInvalid",e.kode_grup_obat.invalid)("ValidatorsCaption","Kode Grup Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),l.xp6(1),l.Q6J("label","Nama Grup Obat")("IsFormControlInvalid",e.nama_grup_obat.invalid)("ValidatorsCaption","Nama Grup Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[u.G,pe.D,he.K,me.x,ge.C,ct.q,n._Y,n.JL,n.sg,K._,n.JJ,n.u],styles:[""]}),t})();const we=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_label_pemakaian_obat","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_label_pemakaian_obat","headerText":"Kode Label","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"nama_label_pemakaian_obat","headerText":"Nama Label","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"berapa_kali_per_hari","headerText":"Berapa Kali Per Hari","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Ze=a.t(we,2),Ce=a(1123);const ye=["OrgTabsRef"],De=function(){return[]};let Ie=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupLabelPemakaianObatService=a,this.GridConfig=Ze,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_label_pemakaian_obat:[0,[]],kode_label_pemakaian_obat:["",[n.kI.required]],nama_label_pemakaian_obat:["",[n.kI.required]],berapa_kali_per_hari:[0,[n.kI.required]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_label_pemakaian_obat)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.kode_label_pemakaian_obat.setValue(""),this.nama_label_pemakaian_obat.setValue("")}GetAllData(){this.setupLabelPemakaianObatService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataLabelPemakaianObat(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupLabelPemakaianObatService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupLabelPemakaianObatService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_label_pemakaian_obat:e};console.log("data",a),console.log("is_active",t),t?this.setupLabelPemakaianObatService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupLabelPemakaianObatService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get kode_label_pemakaian_obat(){return this.FormInputData.get("kode_label_pemakaian_obat")}get nama_label_pemakaian_obat(){return this.FormInputData.get("nama_label_pemakaian_obat")}get berapa_kali_per_hari(){return this.FormInputData.get("berapa_kali_per_hari")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(T.t),l.Y36(Ce.l))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-setup-label-pemakaian-obat"]],viewQuery:function(t,e){if(1&t&&l.Gf(ye,7),2&t){let t;l.iGM(t=l.CRH())&&(e.OrgTabsRef=t.first)}},decls:19,vars:24,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_label_pemakaian_obat",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","nama_label_pemakaian_obat",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","berapa_kali_per_hari",3,"label","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),l.TgZ(1,"org-tabs",1,2),l.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),l.TgZ(3,"org-tabs-item"),l.TgZ(4,"org-tabs-label",3),l._uU(5,"Data Label Pemakaian Obat"),l.qZA(),l.TgZ(6,"org-tabs-body"),l.TgZ(7,"mol-grid",4,5),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"org-tabs-item"),l.TgZ(10,"org-tabs-label",3),l._uU(11,"Input Label Pemakaian Obat"),l.qZA(),l.TgZ(12,"org-tabs-body"),l.TgZ(13,"form",6),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l._UZ(16,"mol-input-text",9),l._UZ(17,"mol-input-text",10),l._UZ(18,"mol-input-text",11),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:l.DdM(23,De)),l.xp6(1),l.Q6J("showHeader",!1),l.xp6(3),l.Q6J("Id","Data"),l.xp6(3),l.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("Id","Input"),l.xp6(3),l.Q6J("formGroup",e.FormInputData),l.xp6(3),l.Q6J("label","Kode Label Pemakaian Obat")("IsFormControlInvalid",e.kode_label_pemakaian_obat.invalid)("ValidatorsCaption","Kode Label Pemakaian Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),l.xp6(1),l.Q6J("label","Nama Label Pemakaian Obat")("IsFormControlInvalid",e.nama_label_pemakaian_obat.invalid)("ValidatorsCaption","Nama Label Pemakaian Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Berapa Kali Perhari")("inputFieldState",e.inputFieldState))},directives:[u.G,pe.D,he.K,me.x,ge.C,ct.q,n._Y,n.JL,n.sg,K._,n.JJ,n.u],styles:[""]}),t})();const Re=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_outlet","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_stockroom","headerText":"Id Stokroom","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_outlet","headerText":"Kode Outlet","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"nama_outlet","headerText":"Outlet","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_tipe_outlet","headerText":"Id Tipe Outlet","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Ee=a.t(Re,2),Ne=a(2282);let qe=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.SETUP_DATA.SETUP_TIPE_OUTLET,this.dataSource=new O.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ge=["OrgTabsRef"],Oe=function(){return[]};let Fe=(()=>{class t{constructor(t,e,a,i,r){this.formBuilder=t,this.utilityService=e,this.setupOutletService=a,this.setupStockroomService=i,this.setupTipeOutletService=r,this.MaritalTipeOutletDropdownField={text:"tipe_outlet",value:"id_tipe_outlet"},this.MaritalStockroomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.GridConfig=Ee,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_outlet:[0,[]],id_stockroom:[0,[n.kI.required]],kode_outlet:["",[n.kI.required]],nama_outlet:["",[n.kI.required]],id_tipe_outlet:[0,[n.kI.required]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData(),this.setupStockroomService.setDataSource(),this.setupTipeOutletService.setDataSource()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_outlet)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset()}GetAllData(){this.setupOutletService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataOutlet(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupOutletService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupOutletService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_outlet:e};console.log("data",a),console.log("is_active",t),t?this.setupOutletService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupOutletService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get id_stockroom(){return this.FormInputData.get("id_stockroom")}get kode_outlet(){return this.FormInputData.get("kode_outlet")}get nama_outlet(){return this.FormInputData.get("nama_outlet")}get id_tipe_outlet(){return this.FormInputData.get("id_tipe_outlet")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(T.t),l.Y36(yt.A),l.Y36(Ne.u),l.Y36(qe))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-setup-outlet"]],viewQuery:function(t,e){if(1&t&&l.Gf(Ge,7),2&t){let t;l.iGM(t=l.CRH())&&(e.OrgTabsRef=t.first)}},decls:32,vars:34,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_stockroom",3,"dataSource","fields","allowFiltering"],["MaritalStockroomDropdown",""],["formControlName","kode_outlet",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","nama_outlet",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["id","marital","formControlName","id_tipe_outlet",3,"dataSource","fields","allowFiltering"],["MaritalTipeOutletDropdown",""]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),l.TgZ(1,"org-tabs",1,2),l.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),l.TgZ(3,"org-tabs-item"),l.TgZ(4,"org-tabs-label",3),l._uU(5,"Data Outlet"),l.qZA(),l.TgZ(6,"org-tabs-body"),l.TgZ(7,"mol-grid",4,5),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"org-tabs-item"),l.TgZ(10,"org-tabs-label",3),l._uU(11,"Input Outlet"),l.qZA(),l.TgZ(12,"org-tabs-body"),l.TgZ(13,"form",6),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l.TgZ(16,"div",7),l.TgZ(17,"div",9),l._UZ(18,"atm-label",10),l.qZA(),l.TgZ(19,"div",11),l._UZ(20,"ejs-dropdownlist",12,13),l.ALo(22,"async"),l.qZA(),l.qZA(),l._UZ(23,"mol-input-text",14),l._UZ(24,"mol-input-text",15),l.TgZ(25,"div",7),l.TgZ(26,"div",9),l._UZ(27,"atm-label",10),l.qZA(),l.TgZ(28,"div",11),l._UZ(29,"ejs-dropdownlist",16,17),l.ALo(31,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:l.DdM(33,Oe)),l.xp6(1),l.Q6J("showHeader",!1),l.xp6(3),l.Q6J("Id","Data"),l.xp6(3),l.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("Id","Input"),l.xp6(3),l.Q6J("formGroup",e.FormInputData),l.xp6(5),l.Q6J("LabelCaption","Stockroom"),l.xp6(2),l.Q6J("dataSource",l.lcZ(22,29,e.setupStockroomService.dataSource))("fields",e.MaritalStockroomDropdownField)("allowFiltering",!0),l.xp6(3),l.Q6J("label","Kode Outlet")("IsFormControlInvalid",e.kode_outlet.invalid)("ValidatorsCaption","Kode Outlet Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),l.xp6(1),l.Q6J("label","Nama Outlet")("IsFormControlInvalid",e.nama_outlet.invalid)("ValidatorsCaption","Nama Outlet Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),l.xp6(3),l.Q6J("LabelCaption","Tipe Outlet"),l.xp6(2),l.Q6J("dataSource",l.lcZ(31,31,e.setupTipeOutletService.dataSource))("fields",e.MaritalTipeOutletDropdownField)("allowFiltering",!0))},directives:[u.G,pe.D,he.K,me.x,ge.C,ct.q,n._Y,n.JL,n.sg,Dt.D,It.rI,n.JJ,n.u,K._],pipes:[i.Ov],styles:[""]}),t})();const Pe=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_rute_pemberian_obat","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"nama_rute_pemberian_obat","headerText":"Nama Rute Pemberian Obat","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"rute_pasien","headerText":"Rute Pasien","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"ordered","headerText":"Ordered","visible":true},{"allowEditing":false,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_parenteral","headerText":"Parenteral","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Be=a.t(Pe,2),Je=a(4452),Me=a(6740);const Ue=["OrgTabsRef"],Qe=function(){return[]};let Le=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupRutePemberianObatService=a,this.GridConfig=Be,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_rute_pemberian_obat:[0,[]],nama_rute_pemberian_obat:["",[n.kI.required]],rute_pasien:["",[n.kI.required]],ordered:[0,[]],is_parenteral:[!1,[]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_rute_pemberian_obat)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset()}GetAllData(){this.setupRutePemberianObatService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataRutePemberianObat(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupRutePemberianObatService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupRutePemberianObatService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_rute_pemberian_obat:e};console.log("data",a),console.log("is_active",t),t?this.setupRutePemberianObatService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupRutePemberianObatService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get id_rute_pemberian_obat(){return this.FormInputData.get("id_rute_pemberian_obat")}get nama_rute_pemberian_obat(){return this.FormInputData.get("nama_rute_pemberian_obat")}get rute_pasien(){return this.FormInputData.get("rute_pasien")}get ordered(){return this.FormInputData.get("ordered")}get is_parenteral(){return this.FormInputData.get("is_parenteral")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(T.t),l.Y36(Je.j))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-setup-rute-pemberian-obat"]],viewQuery:function(t,e){if(1&t&&l.Gf(Ue,7),2&t){let t;l.iGM(t=l.CRH())&&(e.OrgTabsRef=t.first)}},decls:20,vars:24,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nama_rute_pemberian_obat",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","rute_pasien",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","ordered",3,"label","inputFieldState"],["formControlName","is_parenteral","id","is_parenteral",3,"label"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),l.TgZ(1,"org-tabs",1,2),l.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),l.TgZ(3,"org-tabs-item"),l.TgZ(4,"org-tabs-label",3),l._uU(5,"Data Rute Pemberian Obat"),l.qZA(),l.TgZ(6,"org-tabs-body"),l.TgZ(7,"mol-grid",4,5),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"org-tabs-item"),l.TgZ(10,"org-tabs-label",3),l._uU(11,"Input Rute Pemberian Obat"),l.qZA(),l.TgZ(12,"org-tabs-body"),l.TgZ(13,"form",6),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l._UZ(16,"mol-input-text",9),l._UZ(17,"mol-input-text",10),l._UZ(18,"mol-input-text",11),l._UZ(19,"mol-input-checkbox-single",12),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:l.DdM(23,Qe)),l.xp6(1),l.Q6J("showHeader",!1),l.xp6(3),l.Q6J("Id","Data"),l.xp6(3),l.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("Id","Input"),l.xp6(3),l.Q6J("formGroup",e.FormInputData),l.xp6(3),l.Q6J("label","Nama Rute Pemberian Obat")("IsFormControlInvalid",e.nama_rute_pemberian_obat.invalid)("ValidatorsCaption","Nama Rute Pemberian Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Kode Rute Pemberian Obat")("IsFormControlInvalid",e.rute_pasien.invalid)("ValidatorsCaption","Kode Rute Pemberian Obat Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Ordered")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Parenteral"))},directives:[u.G,pe.D,he.K,me.x,ge.C,ct.q,n._Y,n.JL,n.sg,K._,n.JJ,n.u,Me.O],styles:[""]}),t})();const He=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_tipe_outlet","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"tipe_outlet","headerText":"Tipe Outlet","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"keterangan","headerText":"Keterangan","visible":true}]}');var je=a.t(He,2);const Ye=["OrgTabsRef"],Ke=function(){return[]};let Ve=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupTipeOutletService=a,this.GridConfig=je,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_tipe_outlet:[0,[]],tipe_outlet:["",[n.kI.required]],keterangan:["",[n.kI.required]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset()}GetAllData(){this.setupTipeOutletService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataTipeOutlet(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupTipeOutletService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupTipeOutletService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get tipe_outlet(){return this.FormInputData.get("tipe_outlet")}get keterangan(){return this.FormInputData.get("keterangan")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(T.t),l.Y36(qe))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-setup-tipe-outlet"]],viewQuery:function(t,e){if(1&t&&l.Gf(Ye,7),2&t){let t;l.iGM(t=l.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:21,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","tipe_outlet",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","keterangan",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),l.TgZ(1,"org-tabs",1,2),l.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),l.TgZ(3,"org-tabs-item"),l.TgZ(4,"org-tabs-label",3),l._uU(5,"Data Tipe Outlet"),l.qZA(),l.TgZ(6,"org-tabs-body"),l.TgZ(7,"mol-grid",4,5),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"org-tabs-item"),l.TgZ(10,"org-tabs-label",3),l._uU(11,"Input Tipe Outlet"),l.qZA(),l.TgZ(12,"org-tabs-body"),l.TgZ(13,"form",6),l.TgZ(14,"div",7),l.TgZ(15,"div",8),l._UZ(16,"mol-input-text",9),l._UZ(17,"mol-input-text",10),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:l.DdM(20,Ke)),l.xp6(1),l.Q6J("showHeader",!1),l.xp6(3),l.Q6J("Id","Data"),l.xp6(3),l.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("Id","Input"),l.xp6(3),l.Q6J("formGroup",e.FormInputData),l.xp6(3),l.Q6J("label","Tipe Outlet")("IsFormControlInvalid",e.tipe_outlet.invalid)("ValidatorsCaption","Tipe Outlet Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Keterangan")("IsFormControlInvalid",e.keterangan.invalid)("ValidatorsCaption","Keterangan Outlet Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[u.G,pe.D,he.K,me.x,ge.C,ct.q,n._Y,n.JL,n.sg,K._,n.JJ,n.u],styles:[""]}),t})();const We=JSON.parse('{"GridGenerik":{"columns":[{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"no_terapi_generik","headerText":"No","type":"string","visible":true,"width":100},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"nama_generik","headerText":"Nama Generik","type":"string","visible":true}]},"GridSediaan":{"columns":[{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"jenis_formularium","headerText":"F/NF","visible":true},{"allowEditing":false,"allowSorting":false,"editType":"numericEdit","field":"sediaan_obat","headerText":"Sediaan","type":"string","visible":true},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"nama_restriksi","headerText":"Restriksi","type":"string","visible":true},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"peresepan_maksimal","headerText":"peresepan_maksimal","type":"string","visible":true}],"DataSource":[{"no":1,"fornasi":"F","ket":"Tab 10 mg, Tab 20 mg"},{"no":2,"fornasi":"NF","ket":"Caps"}]},"GridKeterangan":{"columns":[{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"no","headerText":"No","type":"string","visible":true,"width":50},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"ket","headerText":"Keteranga","type":"string","visible":true}],"DataSource":[{"no":1,"ket":"Hanya untuk pemakaian pada tindakan anestesi atau perawatan di Rumah Sakit"},{"no":2,"ket":"untuk mengatasi nyeri kanker yang tidak respon terhadap analgetik non narkotik"},{"no":3,"ket":"nyeri pada serangan jantung."}]},"GridPeresepan":{"columns":[{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"no","headerText":"No","type":"string","visible":true,"width":50},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"ket","headerText":"Keteranga","type":"string","visible":true}],"DataSource":[{"no":1,"ket":"Tab lepas lambat 10 mg dan 15 mg: 60 tab/bln"}]},"GridItem":{"columns":[{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"no","headerText":"No","type":"string","visible":true,"width":50},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"ket","headerText":"Keteranga","type":"string","visible":true}],"DataSource":[{"no":1,"ket":"Mefinal Tab 500 mg"},{"no":2,"ket":"Ponstan Tab 500 mg"},{"no":3,"ket":"Lapistan Caps 500 mg"}]}}');var ze=a.t(We,2);let Xe=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_TERAPI,this.dataSource=new O.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return console.log(this.API),this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),$e=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_TERAPI_GENERIK,this.dataSource=new O.X([])}setDataSource(t){this.onGetAll(t).subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID_TERAPI+"/"+t)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ta=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_GENERIK,this.dataSource=new O.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ea=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_FORMULARIUM,this.dataSource=new O.X([])}setDataSource(t){this.onGetAll(t).subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID_GENERIK+"/"+t)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),aa=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_JENIS_FORMULARIUM,this.dataSource=new O.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),ia=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_SEDIAAN_OBAT,this.dataSource=new O.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var na=a(5712);let ra=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_PERESEPAN_MAKSIMAL,this.dataSource=new O.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oa=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=g.PHARMACY.FORMULARIUM.SETUP_PARAMETER_MAKSIMAL,this.dataSource=new O.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(b.g),l.LFG(f.d))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var la=a(804);const da=["modalTambahTerapi"],sa=["modalTambahTerapiGenerik"],ua=["modalTambahFormularium"],ca=["modalSetupGenerik"],pa=["modalSetupTerapi"],ha=["modalSetupSediaan"],ma=["modalSetupRestriksi"],ga=["modalSetupPeresepanMaksimal"];function fa(t,e){1&t&&l._UZ(0,"i",30)}function ba(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div"),l.TgZ(1,"div",28),l.TgZ(2,"a",8),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSubTerapi()}),l.YNc(3,fa,1,0,"i",29),l.qZA(),l._uU(4),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(3),l.Q6J("ngIf",null==t.id_terapi_parent),l.xp6(1),l.AsE(" ",t.kode_terapi," ",t.nama_terapi," ")}}function _a(t,e){1&t&&l._UZ(0,"mol-input-text",47),2&t&&l.Q6J("inputFieldState","detail")("label","Parent Terapi")}function Ta(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Tambah Terapi"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",37),l.TgZ(8,"form",38),l.TgZ(9,"div",39),l.TgZ(10,"div",40),l.YNc(11,_a,1,2,"mol-input-text",41),l._UZ(12,"mol-input-text",42),l._UZ(13,"mol-input-text",43),l._UZ(14,"mol-input-text",44),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(15,"div",45),l.TgZ(16,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSimpanTerapi()}),l._uU(17,"Simpan Terapi"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("formGroup",t.FormInputDataTerapi),l.xp6(3),l.Q6J("ngIf",!t.hideParentTarif),l.xp6(1),l.Q6J("label","Kode Terapi")("IsFormControlInvalid",t.kode_terapi.invalid)("ValidatorsCaption","Kode Terapi Tidak Boleh Kosong")("inputFieldState",t.inputFieldState),l.xp6(1),l.Q6J("label","No Terapi")("IsFormControlInvalid",t.no_terapi.invalid)("ValidatorsCaption","No Terapi Tidak Boleh Kosong")("inputFieldState",t.inputFieldState),l.xp6(1),l.Q6J("label","Nama Terapi")("IsFormControlInvalid",t.nama_terapi.invalid)("ValidatorsCaption","Nama Terapi Outlet Tidak Boleh Kosong")("inputFieldState",t.inputFieldState)}}function Sa(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Tambah Terapi Generik"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",37),l.TgZ(8,"form",38),l.TgZ(9,"div",39),l._UZ(10,"mol-input-text",48),l.TgZ(11,"div",49),l._UZ(12,"atm-label",50),l.qZA(),l.TgZ(13,"div",51),l._UZ(14,"ejs-dropdownlist",52,53),l.ALo(16,"async"),l.qZA(),l.TgZ(17,"div",54),l.TgZ(18,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSetupGenerik()}),l._uU(19,"Setup"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"div",45),l.TgZ(21,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSimpanTerapiGenerik()}),l._uU(22,"Simpan Terapi Generik"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("formGroup",t.FormInputDataTerapiGenerik),l.xp6(2),l.Q6J("label","No")("inputFieldState",t.inputFieldState),l.xp6(2),l.Q6J("LabelCaption","Nama Generik"),l.xp6(2),l.Q6J("dataSource",l.lcZ(16,7,t.setupGenerikService.dataSource))("fields",t.MaritalGenerikDropdownField)("allowFiltering",!0)}}function va(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Tambah formularium"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"div",36),l.TgZ(7,"div",37),l.TgZ(8,"form",38),l.TgZ(9,"div",39),l.TgZ(10,"div",37),l.TgZ(11,"div",39),l.TgZ(12,"div",49),l._UZ(13,"atm-label",50),l.qZA(),l.TgZ(14,"div",55),l._UZ(15,"ejs-dropdownlist",56,57),l.ALo(17,"async"),l.qZA(),l.qZA(),l.TgZ(18,"div",39),l.TgZ(19,"div",49),l._UZ(20,"atm-label",50),l.qZA(),l.TgZ(21,"div",58),l._UZ(22,"ejs-dropdownlist",59,60),l.ALo(24,"async"),l.qZA(),l.TgZ(25,"div",54),l.TgZ(26,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSetupSediaan()}),l._uU(27,"Setup"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(28,"div",39),l.TgZ(29,"div",49),l._UZ(30,"atm-label",50),l.qZA(),l.TgZ(31,"div",58),l._UZ(32,"ejs-dropdownlist",61,62),l.ALo(34,"async"),l.qZA(),l.TgZ(35,"div",54),l.TgZ(36,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSetupRestriksi()}),l._uU(37,"Setup"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(38,"div",39),l.TgZ(39,"div",49),l._UZ(40,"atm-label",50),l.qZA(),l.TgZ(41,"div",58),l._UZ(42,"ejs-dropdownlist",63,64),l.ALo(44,"async"),l.qZA(),l.TgZ(45,"div",54),l.TgZ(46,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSetupPeresepanMaksimal()}),l._uU(47,"Setup"),l.qZA(),l.qZA(),l.qZA(),l._UZ(48,"mol-input-textarea",65),l._UZ(49,"mol-datepicker-syncfusion",66),l._UZ(50,"mol-datepicker-syncfusion",67),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(51,"div",45),l.TgZ(52,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSimpanFormularium()}),l._uU(53,"Simpan Formularium"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("formGroup",t.FormInputDataFormularium),l.xp6(5),l.Q6J("LabelCaption","Jenis"),l.xp6(2),l.Q6J("dataSource",l.lcZ(17,22,t.setupJenisFormulariumService.dataSource))("fields",t.MaritalJenisFormulariumDropdownField)("allowFiltering",!0),l.xp6(5),l.Q6J("LabelCaption","Sediaan"),l.xp6(2),l.Q6J("dataSource",l.lcZ(24,24,t.setupSediaanObatService.dataSource))("fields",t.MaritalSediaanObatDropdownField)("allowFiltering",!0),l.xp6(8),l.Q6J("LabelCaption","Restriksi"),l.xp6(2),l.Q6J("dataSource",l.lcZ(34,26,t.setupRestriksiObatService.dataSource))("fields",t.MaritalRestriksiObatDropdownField)("allowFiltering",!0),l.xp6(8),l.Q6J("LabelCaption","Peresepan Max"),l.xp6(2),l.Q6J("dataSource",l.lcZ(44,28,t.setupPeresepanMaksimalService.dataSource))("fields",t.MaritalPeresepanMaksimalDropdownField)("allowFiltering",!0),l.xp6(6),l.Q6J("label","Keterangan"),l.xp6(1),l.Q6J("label","Tgl Berlaku")("format","dd MMMM yyyy"),l.xp6(1),l.Q6J("label","Tgl Berakhir")("format","dd MMMM yyyy")}}function ka(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Setup Generik"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){l.CHM(t);const e=l.oxw();return e.modalRef.hide(),e.handleTambahTerapiGenerik(!1)}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"form",38),l.TgZ(7,"div",39),l.TgZ(8,"div",68),l._UZ(9,"mol-input-text",69),l._UZ(10,"mol-input-text",70),l._UZ(11,"mol-input-text",71),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",45),l.TgZ(13,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSimpanGenerik()}),l._uU(14,"Simpan Generk"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(6),l.Q6J("formGroup",t.FormInputDataGenerik),l.xp6(3),l.Q6J("label","No Generik")("IsFormControlInvalid",t.no_generik.invalid)("ValidatorsCaption","No Generik Tidak Boleh Kosong")("inputFieldState",t.inputFieldState)("disabled","edit"===t.inputFieldState),l.xp6(1),l.Q6J("label","Nama Generik")("IsFormControlInvalid",t.nama_generik.invalid)("ValidatorsCaption","Nama Generik Tidak Boleh Kosong")("inputFieldState",t.inputFieldState),l.xp6(1),l.Q6J("label","Alias")("inputFieldState",t.inputFieldState)}}function xa(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Setup Sediaan"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){l.CHM(t);const e=l.oxw();return e.modalRef.hide(),e.handleTambahFormularium(!1)}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"form",38),l.TgZ(7,"div",39),l.TgZ(8,"div",68),l._UZ(9,"mol-input-textarea",72),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",45),l.TgZ(11,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSimpanSediaan()}),l._uU(12,"Simpan Sediaan"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(6),l.Q6J("formGroup",t.FormInputDataSediaan),l.xp6(3),l.Q6J("label","sediaan_obat")}}function Aa(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Setup Restriksi"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){l.CHM(t);const e=l.oxw();return e.modalRef.hide(),e.handleTambahFormularium(!1)}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"form",38),l.TgZ(7,"div",39),l.TgZ(8,"div",68),l._UZ(9,"mol-input-textarea",73),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(10,"div",45),l.TgZ(11,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSimpanRestriksi()}),l._uU(12,"Simpan Restrisi"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(6),l.Q6J("formGroup",t.FormInputDataRestriksi),l.xp6(3),l.Q6J("label","restriksi_obat")}}function wa(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",31),l.TgZ(1,"h5",32),l._uU(2,"Setup Peresepan Maksimal"),l.qZA(),l.TgZ(3,"button",33),l.NdJ("click",function(){l.CHM(t);const e=l.oxw();return e.modalRef.hide(),e.handleTambahFormularium(!1)}),l._UZ(4,"i",34),l.qZA(),l.qZA(),l.TgZ(5,"div",35),l.TgZ(6,"form",38),l.TgZ(7,"div",39),l.TgZ(8,"div",68),l._UZ(9,"mol-input-text",74),l._UZ(10,"mol-input-text",75),l.TgZ(11,"div",39),l.TgZ(12,"div",49),l._UZ(13,"atm-label",50),l.qZA(),l.TgZ(14,"div",55),l._UZ(15,"ejs-dropdownlist",76,77),l.ALo(17,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"div",45),l.TgZ(19,"button",46),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleSimpanPeresepanMaksimal()}),l._uU(20,"Simpan Peresepan Maksimal"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(6),l.Q6J("formGroup",t.FormInputDataPeresepanMaksimal),l.xp6(3),l.Q6J("label","Peresepan Maksimal")("IsFormControlInvalid",t.peresepan_maksimal.invalid)("ValidatorsCaption","Peresepan Maksimal Tidak Boleh Kosong")("inputFieldState",t.inputFieldState),l.xp6(1),l.Q6J("label","Nilai")("inputFieldState",t.inputFieldState),l.xp6(3),l.Q6J("LabelCaption","Parameter"),l.xp6(2),l.Q6J("dataSource",l.lcZ(17,11,t.setupParameterMaksimalService.dataSource))("fields",t.MaritalParameterMaksimalDropdownField)("allowFiltering",!0)}}let Za=(()=>{class t{constructor(t,e,a,i,n,r,o,l,d,s,u,c){this.modalService=t,this.formBuilder=e,this.utilityService=a,this.setupTerapiService=i,this.setupTerapiGenerikService=n,this.setupGenerikService=r,this.setupFormulariumService=o,this.setupJenisFormulariumService=l,this.setupSediaanObatService=d,this.setupRestriksiObatService=s,this.setupPeresepanMaksimalService=u,this.setupParameterMaksimalService=c,this.MaritalGenerikDropdownField={text:"nama_generik",value:"id_generik"},this.MaritalJenisFormulariumDropdownField={text:"jenis_formularium",value:"id_jenis_formularium"},this.MaritalSediaanObatDropdownField={text:"sediaan_obat",value:"id_sediaan_obat"},this.MaritalRestriksiObatDropdownField={text:"nama_restriksi",value:"id_restriksi_obat"},this.MaritalPeresepanMaksimalDropdownField={text:"peresepan_maksimal",value:"id_peresepan_maksimal"},this.MaritalParameterMaksimalDropdownField={text:"parameter_maksimal",value:"id_parameter_maksimal"},this.GridSetting=ze,this.hideParentTarif=!0,this.allowMultiSelection=!1,this.DataSourceGeneric=[],this.DataSourceSediaan=[],this.DataSourceRestreksi=[],this.DataSourceMax=[],this.DataSourceDagang=[]}ngOnInit(){this.wrapSettings={wrapMode:"Content"},this.FormInputDataTerapi=this.formBuilder.group({id_terapi:[0,[]],id_terapi_parent:[null,[]],parent_terapi:["",[]],no_terapi:["",[n.kI.required]],kode_terapi:["",[n.kI.required]],nama_terapi:["",[n.kI.required]],level_rekursif_terapi:[1,[n.kI.required]]}),this.FormInputDataTerapiGenerik=this.formBuilder.group({id_terapi:[0,[]],no_terapi_generik:["",[n.kI.required]],id_generik:[0,[]]}),this.FormInputDataFormularium=this.formBuilder.group({id_formularium:[0,[]],id_generik:[0,[]],id_terapi:[0,[]],id_jenis_formularium:[0,[]],id_sediaan_obat:[0,[]],id_restriksi_obat:[0,[]],id_peresepan_maksimal:[0,[]],keterangan:["",[]],tgl_berlaku:[null,[]],tgl_berakhir:[null,[]]}),this.FormInputDataGenerik=this.formBuilder.group({id_generik:[0,[]],no_generik:["",[n.kI.required]],nama_generik:["",[n.kI.required]],alias_generik:["",[]],is_active:[!1,[]]}),this.FormInputDataSediaan=this.formBuilder.group({id_sediaan_obat:[0,[]],sediaan_obat:["",[n.kI.required]]}),this.FormInputDataRestriksi=this.formBuilder.group({nama_restriksi:["",[n.kI.required]]}),this.FormInputDataPeresepanMaksimal=this.formBuilder.group({peresepan_maksimal:["",[n.kI.required]],nilai_maksimal:[0,[]],id_parameter_maksimal:["",[n.kI.required]]}),this.getAllTerapi(),this.setupGenerikService.setDataSource(),this.setupJenisFormulariumService.setDataSource(),this.setupSediaanObatService.setDataSource(),this.setupRestriksiObatService.setDataSource(),this.setupPeresepanMaksimalService.setDataSource(),this.setupParameterMaksimalService.setDataSource()}nodeSelected(t){console.log(t),this.CurrentDataTerapi=t.nodeData,this.setupTerapiGenerikService.setDataSource(this.CurrentDataTerapi.id),this.setupFormulariumService.setDataSource(0)}getAllTerapi(){this.setupTerapiService.onGetAll().subscribe(t=>{this.field={dataSource:t.data,id:"id_terapi",parentID:"id_terapi_parent",text:"nama_terapi",hasChildren:"is_parent"}})}handleSimpanTerapi(){this.setupTerapiService.onPostSave(this.FormInputDataTerapi.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.FormInputDataTerapi.reset(),this.modalRef.hide(),this.getAllTerapi()})})}handleAddTerapi(){this.id_terapi_parent.setValue(null),this.parent_terapi.setValue(""),this.level_rekursif_terapi.setValue(0),this.hideParentTarif=!0,this.modalRef=this.modalService.show(this.modalTambahTerapi,Object.assign({},{class:"modal-lg"}))}handleSubTerapi(){this.id_terapi_parent.setValue(this.CurrentDataTerapi.id),this.parent_terapi.setValue(this.CurrentDataTerapi.text),this.level_rekursif_terapi.setValue(1),this.hideParentTarif=!1,this.modalRef=this.modalService.show(this.modalTambahTerapi,Object.assign({},{class:"modal-lg"}))}handleSetupTerapi(){console.log("setup terapi"),this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalSetupTerapi,Object.assign({},{class:"modal-lg"}))}handleTambahTerapiGenerik(t){this.id_terapi_g.setValue(this.CurrentDataTerapi.id),t&&this.FormInputDataTerapiGenerik.reset(),this.modalRef=this.modalService.show(this.modalTambahTerapiGenerik,Object.assign({},{class:"modal-lg"}))}handleSimpanTerapiGenerik(){this.setupTerapiGenerikService.onPostSave(this.FormInputDataTerapiGenerik.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.FormInputDataTerapiGenerik.reset(),this.modalRef.hide(),this.setupTerapiGenerikService.setDataSource(this.CurrentDataTerapi.id)})})}handleSelectedGeneric(t){this.CurrentDataTerapiGenerik=t.data,console.log(this.CurrentDataTerapiGenerik),this.setupFormulariumService.setDataSource(this.CurrentDataTerapiGenerik.id_generik)}handleTambahFormularium(t){this.id_terapi_f.setValue(this.CurrentDataTerapi.id),this.id_generik_f.setValue(this.CurrentDataTerapiGenerik.id_generik),t&&this.FormInputDataFormularium.reset(),this.modalRef=this.modalService.show(this.modalTambahFormularium,Object.assign({},{class:"modal-lg"}))}handleSimpanFormularium(){this.setupFormulariumService.onPostSave(this.FormInputDataFormularium.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.FormInputDataFormularium.reset(),this.modalRef.hide(),this.setupFormulariumService.setDataSource(this.CurrentDataTerapiGenerik.id_generik)})})}handleSetupGenerik(){this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalSetupGenerik,Object.assign({},{class:"modal-lg"}))}handleSimpanGenerik(){this.setupGenerikService.onPostSave(this.FormInputDataGenerik.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.setupGenerikService.setDataSource(),this.id_generik_g.setValue(t.data),this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalTambahTerapiGenerik,Object.assign({},{class:"modal-lg"}))})})}handleSetupSediaan(){this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalSetupSediaan,Object.assign({},{class:"modal-lg"}))}handleSimpanSediaan(){this.setupSediaanObatService.onPostSave(this.FormInputDataSediaan.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.setupSediaanObatService.setDataSource(),this.id_sediaan_obat_f.setValue(t.data),this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalTambahFormularium,Object.assign({},{class:"modal-lg"}))})})}handleSetupRestriksi(){this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalSetupRestriksi,Object.assign({},{class:"modal-lg"}))}handleSimpanRestriksi(){this.setupRestriksiObatService.onPostSave(this.FormInputDataRestriksi.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.setupRestriksiObatService.setDataSource(),this.id_restriksi_obat_f.setValue(t.data),this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalTambahFormularium,Object.assign({},{class:"modal-lg"}))})})}handleSetupPeresepanMaksimal(){this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalSetupPeresepanMaksimal,Object.assign({},{class:"modal-lg"}))}handleSimpanPeresepanMaksimal(){this.setupPeresepanMaksimalService.onPostSave(this.FormInputDataPeresepanMaksimal.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.setupPeresepanMaksimalService.setDataSource(),this.id_peresepan_maksimal_f.setValue(t.data),this.modalRef.hide(),this.modalRef=this.modalService.show(this.modalTambahFormularium,Object.assign({},{class:"modal-lg"}))})})}handleSelectedSediaan(t){console.log(t),this.DataSourceRestreksi=this.GridSetting.GridKeterangan.DataSource,this.DataSourceMax=this.GridSetting.GridPeresepan.DataSource,this.DataSourceDagang=this.GridSetting.GridItem.DataSource}get parent_terapi(){return this.FormInputDataTerapi.get("parent_terapi")}get id_terapi_parent(){return this.FormInputDataTerapi.get("id_terapi_parent")}get kode_terapi(){return this.FormInputDataTerapi.get("kode_terapi")}get no_terapi(){return this.FormInputDataTerapi.get("no_terapi")}get nama_terapi(){return this.FormInputDataTerapi.get("nama_terapi")}get level_rekursif_terapi(){return this.FormInputDataTerapi.get("level_rekursif_terapi")}get id_terapi_g(){return this.FormInputDataTerapiGenerik.get("id_terapi")}get id_generik_g(){return this.FormInputDataTerapiGenerik.get("id_generik")}get no_terapi_generik(){return this.FormInputDataTerapiGenerik.get("no_terapi_generik")}get id_formularium(){return this.FormInputDataFormularium.get("id_formularium")}get id_generik_f(){return this.FormInputDataFormularium.get("id_generik")}get id_terapi_f(){return this.FormInputDataFormularium.get("id_terapi")}get id_jenis_formularium_f(){return this.FormInputDataFormularium.get("id_jenis_formularium")}get id_sediaan_obat_f(){return this.FormInputDataFormularium.get("id_sediaan_obat")}get id_restriksi_obat_f(){return this.FormInputDataFormularium.get("id_restriksi_obat")}get id_peresepan_maksimal_f(){return this.FormInputDataFormularium.get("id_peresepan_maksimal")}get keterangan(){return this.FormInputDataFormularium.get("keterangan")}get tgl_berlaku(){return this.FormInputDataFormularium.get("tgl_berlaku")}get tgl_berakhir(){return this.FormInputDataFormularium.get("tgl_berakhir")}get no_generik(){return this.FormInputDataGenerik.get("no_generik")}get nama_generik(){return this.FormInputDataGenerik.get("nama_generik")}get nilai_maksimal(){return this.FormInputDataPeresepanMaksimal.get("nilai_maksimal")}get id_parameter_maksimal(){return this.FormInputDataPeresepanMaksimal.get("id_parameter_maksimal")}get peresepan_maksimal(){return this.FormInputDataPeresepanMaksimal.get("peresepan_maksimal")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(H.tT),l.Y36(n.qu),l.Y36(T.t),l.Y36(Xe),l.Y36($e),l.Y36(ta),l.Y36(ea),l.Y36(aa),l.Y36(ia),l.Y36(na.C),l.Y36(ra),l.Y36(oa))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-setup-formularium"]],viewQuery:function(t,e){if(1&t&&(l.Gf(da,5),l.Gf(sa,5),l.Gf(ua,5),l.Gf(ca,5),l.Gf(pa,5),l.Gf(ha,5),l.Gf(ma,5),l.Gf(ga,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.modalTambahTerapi=t.first),l.iGM(t=l.CRH())&&(e.modalTambahTerapiGenerik=t.first),l.iGM(t=l.CRH())&&(e.modalTambahFormularium=t.first),l.iGM(t=l.CRH())&&(e.modalSetupGenerik=t.first),l.iGM(t=l.CRH())&&(e.modalSetupTerapi=t.first),l.iGM(t=l.CRH())&&(e.modalSetupSediaan=t.first),l.iGM(t=l.CRH())&&(e.modalSetupRestriksi=t.first),l.iGM(t=l.CRH())&&(e.modalSetupPeresepanMaksimal=t.first)}},decls:73,vars:23,consts:[[1,"row"],[1,"col-sm-3"],[1,"card"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-md-7"],[1,"m-0"],[1,"col-auto"],[3,"click"],[1,"fas","fa-plus-circle","tambah","text-primary"],[1,"card-body","p-0"],["id","treeparent"],["id","treeelement","e-nodeclick","onClick",3,"fields","allowMultiSelection","nodeSelected"],["nodeTemplate",""],[3,"grid-id","grid-height","grid-lines","columns","grid-DataSource","row-selected"],["gridDaftarOrder",""],[1,"col-sm-6"],[1,"col-sm-12","mb-3"],[3,"grid-id","grid-height","grid-lines","columns","grid-DataSource","textWrapSettings","row-selected"],[1,"col-sm-12"],[3,"grid-id","grid-height","grid-lines","columns","grid-DataSource","textWrapSettings"],["modalTambahTerapi",""],["modalTambahTerapiGenerik",""],["modalTambahFormularium",""],["modalSetupGenerik",""],["modalSetupSediaan",""],["modalSetupRestriksi",""],["modalSetupPeresepanMaksimal",""],[1,"ejob"],["class","fas fa-plus-circle tambah_terapi text-primary ",4,"ngIf"],[1,"fas","fa-plus-circle","tambah_terapi","text-primary"],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","parent_terapi",3,"inputFieldState","label",4,"ngIf"],["formControlName","kode_terapi",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","no_terapi",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","nama_terapi",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["formControlName","parent_terapi",3,"inputFieldState","label"],["formControlName","no_terapi_generik",3,"label","inputFieldState"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-6","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_generik",3,"dataSource","fields","allowFiltering"],["MaritalGenerikDropdown",""],[1,"col-sm-2"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_jenis_formularium",3,"dataSource","fields","allowFiltering"],["MaritalJenisFormulariumDropdown",""],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6"],["id","marital","formControlName","id_sediaan_obat",3,"dataSource","fields","allowFiltering"],["MaritalSediaanObatDropdown",""],["id","marital","formControlName","id_restriksi_obat",3,"dataSource","fields","allowFiltering"],["MaritalRestriksiObatDropdown",""],["id","marital","formControlName","id_peresepan_maksimal",3,"dataSource","fields","allowFiltering"],["MaritalPeresepanMaksimalDropdown",""],["formControlName","keterangan",3,"label"],["formControlName","tgl_berlaku",3,"label","format"],["formControlName","tgl_berakhir",3,"label","format"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],["formControlName","no_generik",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","nama_generik",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","alias_generik",3,"label","inputFieldState"],["formControlName","sediaan_obat",3,"label"],["formControlName","nama_restriksi",3,"label"],["formControlName","peresepan_maksimal",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","nilai",3,"label","inputFieldState"],["id","marital","formControlName","id_parameter_maksimal",3,"dataSource","fields","allowFiltering"],["MaritalParameterMaksimalDropdown",""]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"div",2),l.TgZ(4,"div",3),l.TgZ(5,"div",4),l.TgZ(6,"div",5),l.TgZ(7,"h5",6),l._uU(8,"Terapi"),l.qZA(),l.qZA(),l.TgZ(9,"div",7),l.TgZ(10,"a",8),l.NdJ("click",function(){return e.handleAddTerapi()}),l._UZ(11,"i",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(12,"div",10),l.TgZ(13,"div",11),l.TgZ(14,"ejs-treeview",12),l.NdJ("nodeSelected",function(t){return e.nodeSelected(t)}),l.YNc(15,ba,5,3,"ng-template",null,13,l.W1O),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(17,"div",1),l.TgZ(18,"div",2),l.TgZ(19,"div",3),l.TgZ(20,"div",4),l.TgZ(21,"div",5),l.TgZ(22,"h5",6),l._uU(23,"Generik"),l.qZA(),l.qZA(),l.TgZ(24,"div",7),l.TgZ(25,"a",8),l.NdJ("click",function(){return e.handleTambahTerapiGenerik(!0)}),l._UZ(26,"i",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(27,"div",10),l.TgZ(28,"mol-grid",14,15),l.NdJ("row-selected",function(t){return e.handleSelectedGeneric(t)}),l.ALo(30,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(31,"div",16),l.TgZ(32,"div",0),l.TgZ(33,"div",17),l.TgZ(34,"div",2),l.TgZ(35,"div",3),l.TgZ(36,"div",4),l.TgZ(37,"div",5),l.TgZ(38,"h5",6),l._uU(39,"Formularium"),l.qZA(),l.qZA(),l.TgZ(40,"div",7),l.TgZ(41,"a",8),l.NdJ("click",function(){return e.handleTambahFormularium(!0)}),l._UZ(42,"i",9),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(43,"div",10),l.TgZ(44,"mol-grid",18,15),l.NdJ("row-selected",function(t){return e.handleSelectedSediaan(t)}),l.ALo(46,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(47,"div",19),l.TgZ(48,"div",2),l.TgZ(49,"div",3),l.TgZ(50,"div",4),l.TgZ(51,"div",7),l.TgZ(52,"h5",6),l._uU(53,"Nama Dagang"),l.qZA(),l.qZA(),l.TgZ(54,"div",7),l._UZ(55,"i",9),l.qZA(),l.qZA(),l.qZA(),l.TgZ(56,"div",10),l._UZ(57,"mol-grid",20,15),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(59,Ta,18,14,"ng-template",null,21,l.W1O),l.YNc(61,Sa,23,9,"ng-template",null,22,l.W1O),l.YNc(63,va,54,30,"ng-template",null,23,l.W1O),l.YNc(65,ka,15,12,"ng-template",null,24,l.W1O),l.YNc(67,xa,13,2,"ng-template",null,25,l.W1O),l.YNc(69,Aa,13,2,"ng-template",null,26,l.W1O),l.YNc(71,wa,21,13,"ng-template",null,27,l.W1O),l.qZA()),2&t&&(l.xp6(14),l.Q6J("fields",e.field)("allowMultiSelection",e.allowMultiSelection),l.xp6(14),l.Q6J("grid-id","GridDaftarOrder")("grid-height","calc(100vh - 250px)")("grid-lines","Both")("columns",e.GridSetting.GridGenerik.columns)("grid-DataSource",l.lcZ(30,19,e.setupTerapiGenerikService.dataSource)),l.xp6(16),l.Q6J("grid-id","GridDaftarOrder")("grid-height","calc((100vh - 350px)/2)")("grid-lines","Both")("columns",e.GridSetting.GridSediaan.columns)("grid-DataSource",l.lcZ(46,21,e.setupFormulariumService.dataSource))("textWrapSettings",e.wrapSettings),l.xp6(13),l.Q6J("grid-id","GridDaftarOrder")("grid-height","calc((100vh - 350px)/2)")("grid-lines","Both")("columns",e.GridSetting.GridItem.columns)("grid-DataSource",e.DataSourceDagang)("textWrapSettings",e.wrapSettings))},directives:[u.G,la.kD,ct.q,i.O5,n._Y,n.JL,n.sg,K._,n.JJ,n.u,Dt.D,It.rI,_t.h,Rt.i],pipes:[i.Ov],styles:["#treeparent[_ngcontent-%COMP%]{display:block;max-width:400px;height:calc(100vh - 210px);margin:auto;overflow:auto;border:1px solid #ddd;border-radius:3px}#treeelement[_ngcontent-%COMP%]{max-height:calc(100vh - 210px);overflow:auto}.tambah[_ngcontent-%COMP%]{font-size:23px;margin-top:1px}.tambah_terapi[_ngcontent-%COMP%]{font-size:18px;margin-top:1px}"]}),t})();var Ca=a(4762),ya=a(5776);const Da=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"set_racikan_id","headerText":"Id","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_obat","headerText":"Nama Racikan","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"qty_resep","headerText":"Qty","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"ket_label","headerText":"Label","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"ket_aturan","headerText":"Tambahan Aturan","type":"string","visible":true}],"columnsChild":[{"field":"nama_obat","headerText":"Nama Obat"},{"field":"kandungan_obat","headerText":"Kandungan"},{"field":"nama_satuan","headerText":"Satuan"},{"field":"qty_racikan","headerText":"Qty"}],"filter":[{"field":"nama_racikan","filter":"like","title":"Nama Racikan"}]}');var Ia=a.t(Da,2);const Ra=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"set_racikan_id","headerText":"Id","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_template","headerText":"Nama Template Resep","type":"string","visible":true}],"columnsChild":[{"field":"nama_obat","headerText":"Nama Obat"},{"field":"qty_resep","headerText":"Qty"}],"filter":[{"field":"nama_racikan","filter":"like","title":"Nama Racikan"}]}');var Ea=a.t(Ra,2);const Na=JSON.parse('{"GridInputResep":{"columns":[{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"rx","headerText":"Rx","type":"string","visible":true,"width":30},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"no_urut","headerText":"No","visible":true,"width":30},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"kode_resep","headerText":"Kode Resep","visible":false,"width":50},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"nama_obat","headerText":"Nama Obat","visible":true,"width":150},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"satuan","headerText":"Satuan","visible":true,"width":70},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"qty_obat","headerText":"Qty","format":"N","textAlign":"Right","visible":true,"width":70},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"aturan_pakai","headerText":"Jumlah Pakai","type":"string","visible":true,"width":120},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"keterangan_pakai","headerText":"Aturan Pakai","type":"string","visible":true,"width":120},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"waktu_pakai","headerText":"Waktu Pakai","type":"string","visible":true,"width":120},{"allowEditing":false,"allowSorting":false,"editType":"defaultEdit","field":"catatan","headerText":"Catatan","type":"string","visible":true,"width":100}]},"GridHistoryResep":{"columns":[],"dataSource":[]}}');var qa=a.t(Na,2);const Ga=JSON.parse('{"LookupPasien":{"columns":[{"allowEditing":true,"allowSorting":true,"displayAsCheckBox":true,"editType":"booleanEdit","field":"cek","headerText":"CEK","visible":false,"width":150},{"allowEditing":true,"allowSorting":true,"editType":"numericEdit","field":"id_person","format":"N2","headerText":"PERSON ID","type":"number","visible":false,"width":150},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"no_register","headerText":"NO. REGISTER","type":"string","visible":true,"width":100},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_pasien","headerText":"NAMA PASIEN","type":"string","visible":true,"width":200},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"no_rekam_medis","headerText":"NO. RM","type":"string","visible":true,"width":100},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"tgl_admisi","headerText":"TGL. ADMISI","type":"Date","format":"dd/MM/yyyy","visible":true,"width":100},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_kelas","headerText":"KELAS","type":"string","visible":true,"width":70},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_debitur","headerText":"DEBITUR","type":"string","visible":true,"width":150}],"filter":[{"field":"p.no_identitas","filter":"like","title":"NO. IDENTITAS"},{"field":"tp.no_register","filter":"like","title":"NO. REGISTER"},{"field":"concat(p.nama_depan, \' \',p.nama_belakang)","filter":"like","title":"NAMA PASIEN"},{"field":"tp.no_rekam_medis","filter":"like","title":"NO. RM"}]}}');var Oa=a.t(Ga,2),Fa=a(2997),Pa=a(9609),Ba=a.n(Pa),Ja=a(1344),Ma=a(917),Ua=a(5521),Qa=a(266),La=a(5740),Ha=a(6296),ja=a(7696),Ya=a(389);const Ka=["LookupRacikan"],Va=["LookupTemplateResep"],Wa=["GridResepRacikan"],za=["itemTemplate"],Xa=["modalTemplateResep"];function $a(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",7),l.TgZ(1,"div",6),l.TgZ(2,"div",17),l.TgZ(3,"label",18),l._uU(4,"Nama Obat"),l.qZA(),l.qZA(),l.TgZ(5,"div",17),l.TgZ(6,"div",4),l.TgZ(7,"div",61),l.TgZ(8,"ejs-dropdownlist",62,63),l.NdJ("filtering",function(e){return l.CHM(t),l.oxw().onFiltering(e)})("change",function(e){return l.CHM(t),l.oxw().handleChangeObat(e)}),l.qZA(),l.qZA(),l.TgZ(10,"div",64),l.TgZ(11,"span",65),l._uU(12),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(8),l.Q6J("allowFiltering",!0)("dataSource",t.data)("fields",t.fields)("placeholder",t.text)("query",t.query)("sortOrder",t.sorting)("allowFiltering",!0),l.xp6(4),l.hij(" ",t.nama_satuan.value," ")}}function ti(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",66),l.TgZ(1,"div",6),l.TgZ(2,"div",17),l.TgZ(3,"label",18),l._uU(4,"Nama Racikan Obat"),l.qZA(),l.qZA(),l.TgZ(5,"div",17),l.TgZ(6,"div",67),l.TgZ(7,"input",68),l.NdJ("change",function(){return l.CHM(t),l.oxw().handleChangeNamaRacikan()}),l.qZA(),l.TgZ(8,"button",69),l.NdJ("click",function(e){return l.CHM(t),l.oxw().handelClickRacikan(e)}),l._UZ(9,"i",70),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}}function ei(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",71),l.TgZ(1,"div",6),l.TgZ(2,"div",17),l.TgZ(3,"label",18),l._uU(4,"Kemasan Racikan"),l.qZA(),l.qZA(),l.TgZ(5,"div",17),l.TgZ(6,"div",67),l.TgZ(7,"ejs-dropdownlist",72,73),l.NdJ("change",function(e){return l.CHM(t),l.oxw().handleChangeMetodeRacikan(e)}),l.ALo(9,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(7),l.Q6J("dataSource",l.lcZ(9,3,t.setupMetodeRacikanService.dataSource))("fields",t.DropdownMetodeRacikanFields)("allowFiltering",!0)}}function ai(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",23),l.TgZ(1,"div",4),l.TgZ(2,"div",17),l.TgZ(3,"label",24),l._uU(4,"Satuan"),l.qZA(),l.qZA(),l.TgZ(5,"div",27),l.TgZ(6,"ejs-combobox",74),l.NdJ("change",function(e){return l.CHM(t),l.oxw().handleChangeSatuanAturan(e)}),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(6),l.Q6J("allowFiltering",!0)("dataSource",t.dataSourceSatuanAturanPakai)("fields",t.DropdownsatuanPakaiFields)}}function ii(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",75),l.TgZ(1,"h5",76),l._uU(2,"Simpan Template Resep Dokter"),l.qZA(),l.TgZ(3,"button",77),l.NdJ("click",function(){return l.CHM(t),l.oxw().modalRef.hide()}),l._UZ(4,"i",78),l.qZA(),l.qZA(),l.TgZ(5,"div",79),l.TgZ(6,"div",80),l.TgZ(7,"div",81),l.TgZ(8,"h2"),l._uU(9,"Apakah Dokter Ingin Menyimapan Resep Ini Sebagai Template Resep?"),l.qZA(),l.TgZ(10,"p"),l._uU(11,"Template resep di gunakan untuk membuat resep dengan data resep yg sudah ada"),l.qZA(),l.qZA(),l.TgZ(12,"div",82),l.TgZ(13,"div",83),l.TgZ(14,"div",84),l.TgZ(15,"label",85),l.TgZ(16,"strong"),l._uU(17,"Nama Template Resep"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(18,"div",86),l._UZ(19,"input",87),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(20,"div",88),l.TgZ(21,"button",89),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleClickSimpanTemplateResepDokter()}),l._uU(22,"Simpan Template Resep"),l.qZA(),l.TgZ(23,"button",90),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleClickAbaikan()}),l._uU(24,"Tidak"),l.qZA(),l.qZA()}}let ni=(()=>{class t{constructor(t,e,a,i,n,r,o,l,d,s,u,c,p,h){this.formBuilder=t,this.resepDokterService=e,this.setupLabelPemakaianObatService=a,this.setupTambahanAturanPakaiService=i,this.setupSatuanAturanPakaiService=n,this.setupMetodeRacikanService=r,this.setupOutletService=o,this.daftarPasienService=l,this.utilityService=d,this.navigationService=s,this.modalService=u,this.router=c,this.renderer=p,this.location=h,this.API_TRANS_BILLING=Fa.API_BILLING,this.Config=Oa,this.UrlLookupDaftarPasien=g.PHARMACY.RESEP_DOKTER.RESEP_DOKTER_IRJA.ADMISI_PASIEN_IRJA,this.urlRacikan="",this.urlTemplateResep="",this.GridLookUpItem=Ia,this.GridlookUpTemplateResep=Ea,this.DropdownLabelFields={text:"nama_label_pemakaian_obat",value:"id_label_pemakaian_obat"},this.DropdownAturanFields={text:"tambahan_aturan_pakai",value:"id_tambahan_aturan_pakai"},this.DropdownsatuanPakaiFields={text:"satuan_aturan_pakai",value:"id_satuan_aturan_pakai"},this.SetupOutletDropdownField={text:"nama_outlet",value:"id_outlet"},this.FormAddObatState="input",this.SatuanObat="-",this.DropdownObatFields={text:"nama_obat",value:"id_item"},this.DropdownMetodeRacikanFields={text:"metode_racikan",value:"id_metode_racikan"},this.NamaObatDatasource=[],this.WaktuPakai=[],this.GridDaftarObatEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.GridDaftarObatDataSource=[],this.GridDaftarObatColumns=qa,this.GridDetailResepRacikanDatasource=[],this.GridResepRacikanDatasource=[],this.dataSourceLabelPemakaian=[],this.dataSourceTambahanAturanPakai=[],this.dataSourceSatuanAturanPakai=[],this.counter=0,this.counterRacikan=0,this.dataScourceGridChild=[],this.IsUserLogin=JSON.parse(localStorage.getItem("UserData")),this.data=new ya.hm({headers:[{Authorization:"Bearer "+this.IsUserLogin.token}],url:g.PHARMACY.RESEP_DOKTER.RESEP_DOKTER_IRJA.GET_OBAT_PARAMS_DROPDOWNLIST,adaptor:new ya.um,crossDomain:!0}),this.fields={text:"nama_obat",value:"id_item"},this.query=(new ya.AE).from("Obat").select(["nama_obat","id_item","kandungan_obat","nama_satuan"]).take(10).where("nama_obat","contains","",!0),this.text="Select a Obat",this.sorting="Ascending",this.onFiltering=t=>{if(""===t.text)t.updateData(this.data);else{let e=(new ya.AE).from("Obat").select(["nama_obat","id_item","kandungan_obat","nama_satuan"]).take(10).where("nama_obat","contains",t.text,!0);t.updateData(this.data,e)}},this.dataChild=new ya.hm({headers:[{Authorization:"Bearer "+this.IsUserLogin.token}],url:g.PHARMACY.RESEP_DOKTER.RESEP_DOKTER_IRJA.GET_OBAT_PARAMS_DROPDOWNLIST,adaptor:new ya.um,crossDomain:!0}),this.queryChild=(new ya.AE).from("Obat").select(["nama_obat","id_item","kandungan_obat","nama_satuan"]).take(10).where("nama_obat","contains","",!0),this.ButtonNav=[{Id:"Kembali",Icons1:"fa-chevron-left",Captions:"Kembali"},{Id:"Template",Icons1:"fas fa-tags fa-sm",Captions:"Template Resep"},{Id:"Reset",Icons1:"fas fa-undo fa-sm",Captions:"Reset"},{Id:"Simpan",Icons1:"fas fa-save fa-sm",Captions:"Simpan"}],this.Data=[],this.newdetail=[],this.baru=0,this.nama_resep=""}get width(){return window.innerWidth}ngOnInit(){this.currentTanggal=Ba()().format(),this.FormAddObat=this.formBuilder.group({counter:[0,[]],is_racikan:[!1,[]],no_urut:[0,[]],set_racikan_id:[null,[]],id_metode_racikan:[null,[]],metode_racikan:["",[]],id_item:[null,[]],nama_racikan:["",[]],nama_obat:["",[]],qty_resep:["",[]],nama_satuan:["-",[]],label:["",[]],ket_label:["",[]],id_label_pemakaian_obat:[null,[]],label_pemakaian_obat:["",[]],id_satuan_aturan_pakai:[null,[]],satuan_aturan_pakai:[null,[]],aturan:["",[]],ket_aturan:["",[]],id_tambahan_aturan_pakai:[null,[]],label_tambahan_aturan_pakai_obat:["",[]]}),this.GridDaftarObatToolbar=[{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Delete",tooltipText:"Delete",prefixIcon:"fas fa-trash-alt fa-sm",id:"delete"},"Search"];let t=this.currentQtyResep,e=this.currentIdItem,a=this.SelectedDataRacikanObat;this.resepDokterService.dataSelectRacikan.next(a),this.itemsParams={create:()=>(a&&(this.queryChild=(new ya.AE).from("Obat").select(["nama_obat","id_item","kandungan_obat","nama_satuan"]).take(10).where("nama_obat","contains",a.nama_obat,!0)),this.itemsElem=document.createElement("input"),this.itemsElem),read:()=>this.itemsObj.text,destroy:()=>{this.itemsObj.destroy()},write:()=>{this.itemsObj=new G.NB({dataSource:this.dataChild,fields:this.fields,query:this.queryChild,enabled:!0,placeholder:"Select a obat",allowFiltering:!0,popupWidth:"55rem",filtering:(function(t){if(""===t.text)t.updateData(this.data);else{let e=(new ya.AE).from("Obat").select(["nama_obat","id_item","kandungan_obat","nama_satuan"]).take(10).where("nama_obat","contains",t.text,!0);t.updateData(this.data,e)}}).bind(this),change:(function(i){this.setFormGrif(i,t,e,a),e=i.itemData.id_item,console.log(i.itemData.id_item)}).bind(this)}),this.itemsObj.appendTo(this.itemsElem),a&&setTimeout(()=>{this.itemsObj.value=a.id_item},500)}};let i=this.counterRacikan,n=this.dataScourceGridChild;this.resepDokterService.dataSourceChildGrid.next(n),this.ChildGrid={dataSource:this.dataScourceGridChild,queryString:"counter",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},toolbar:["Add","Edit","Delete","Update","Cancel"],editSettings:{allowEditing:!0,allowAdding:!0,allowDeleting:!0},columns:[{field:"counter",headerText:"c",width:100,visible:!1},{field:"no_urut",headerText:"ID Obat",visible:!1},{field:"nama_obat",headerText:"Nama Obat",editType:"dropdownedit",edit:this.itemsParams,width:200},{field:"nama_satuan",headerText:"Satuan",textAlign:"Right",width:80,allowEditing:!1},{field:"id_item",headerText:"id",width:100,visible:!1},{field:"komposisi",headerText:"kps",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!1},{field:"seper",headerText:"1/",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"kandungan",headerText:"Kandungan",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"qty_resep",headerText:"qty",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",visible:!1},{field:"qty_racikan",headerText:"QTY",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"keterangan",headerText:"Keterangan",headerTextAlign:"Center",textAlign:"Left",width:100}],rowSelected(t){a=t.data},actionBegin(e){console.log("begin",e),"add"===e.requestType&&(e.data.counter=this.parentDetails.parentKeyFieldValue,e.data.qty_resep=this.parentDetails.parentRowData.qty_resep,e.data.counterRacikan=i++,t=this.parentDetails.parentRowData.qty_resep,a=null)},actionComplete(t){if("save"===t.requestType&&("add"===t.action&&(t.data.id_item=e,n.push(t.data)),"edit"===t.action)){t.data.id_item=e;let a=n.map(t=>t.counterRacikan).indexOf(t.data.counterRacikan);n[a]=t.data}if("delete"===t.requestType){let e=n.map(t=>t.counterRacikan).indexOf(t.data[0].counterRacikan);n.splice(e,1)}}},this.setupLabelPemakaianObatService.onGetAll().subscribe(t=>{this.dataSourceLabelPemakaian=t.data}),this.setupTambahanAturanPakaiService.onGetAll().subscribe(t=>{this.dataSourceTambahanAturanPakai=t.data}),this.setupSatuanAturanPakaiService.onGetAll().subscribe(t=>{this.dataSourceSatuanAturanPakai=t.data}),this.setupMetodeRacikanService.setDataSource(),this.setupOutletService.setDataSource()}onLoad(t){}setFormGrif(t,e,a,i){i?(document.getElementsByName("nama_satuan")[0].value=i.nama_satuan,document.getElementsByName("komposisi")[0].value=i.komposisi,document.getElementsByName("seper")[0].value=i.seper,document.getElementsByName("kandungan")[0].value=i.kandungan,document.getElementsByName("qty_racikan")[0].value=i.qty_racikan):(document.getElementsByName("nama_satuan")[0].value=t.itemData.nama_satuan,document.getElementsByName("komposisi")[0].value=t.itemData.kandungan_obat,document.getElementsByName("seper")[0].value="1",document.getElementsByName("kandungan")[0].value=t.itemData.kandungan_obat,document.getElementsByName("qty_racikan")[0].value=e.toString());let n=document.getElementsByName("seper")[0];n&&(n.addEventListener("click",t=>{n.select()}),n.addEventListener("keyup",t=>{let a=parseInt(document.getElementsByName("komposisi")[0].value),i=a/parseInt(document.getElementsByName("seper")[0].value);document.getElementsByName("kandungan")[0].value=i.toString();let n=e*i/a;document.getElementsByName("qty_racikan")[0].value=n.toString()}),this.setInputFilter(n,function(t){return/^\d*$/.test(t)}));let r=document.getElementsByName("kandungan")[0];r&&(r.addEventListener("click",t=>{r.select()}),r.addEventListener("keyup",t=>{let a=parseInt(document.getElementsByName("kandungan")[0].value),i=parseInt(document.getElementsByName("komposisi")[0].value),n=e*a;console.log(n);let r=n/i;document.getElementsByName("qty_racikan")[0].value=r.toString(),document.getElementsByName("seper")[0].value="1"}),this.setInputFilter(r,function(t){return/^\d*$/.test(t)}));let o=document.getElementsByName("qty_racikan")[0];o&&(o.addEventListener("click",t=>{o.select()}),this.setInputFilter(o,function(t){return/^\d*$/.test(t)}))}setInputFilter(t,e){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(function(a){t.addEventListener(a,function(){e(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):Object.prototype.hasOwnProperty.call(this,"oldValue")?(this.value=this.oldValue,null!==this.oldSelectionStart&&null!==this.oldSelectionEnd&&this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""})})}rowDataBound(t){t.data.is_racikan||(t.row.querySelector("td").innerHTML=" ",t.row.querySelector("td").className="e-customizedExpandcell")}onDataBound(){this.GridResepRacikan.detailRowModule.expandAll()}handleSelectedLookupPasien(t){this.idDokter=t.id_dokter,this.idPasien=t.id_pasien,this.idRegister=t.id_register,this.idPerson=t.id_person,this.no_register=t.no_register,this.urlTemplateResep=g.PHARMACY.RESEP_DOKTER.RESEP_DOKTER_IRJA.GET_TEMPLATE_RESEP+"/"+t.id_dokter,this.urlRacikan=g.PHARMACY.RESEP_DOKTER.RESEP_DOKTER_IRJA.GET_RACIKAN+"/"+t.id_dokter+"/J"}handleChangeOutlet(t){this.idOutlet=t.value}handleChangeObat(t){this.nama_satuan.setValue(t.itemData.nama_satuan),this.nama_obat.setValue(t.itemData.nama_obat)}handleChangeLabel(t){"number"==typeof t.value&&t.value%1==0?(this.label_pemakaian_obat.setValue(""),this.id_label_pemakaian_obat.setValue(t.value),this.ket_label.setValue(t.itemData.nama_label_pemakaian_obat)):(this.label_pemakaian_obat.setValue(t.value),this.id_label_pemakaian_obat.setValue(1),this.ket_label.setValue(t.itemData.nama_label_pemakaian_obat))}handleChangeAturan(t){"number"==typeof t.value&&t.value%1==0?(this.label_tambahan_aturan_pakai_obat.setValue(""),this.id_tambahan_aturan_pakai.setValue(t.value),this.ket_aturan.setValue(t.itemData.tambahan_aturan_pakai)):(this.label_tambahan_aturan_pakai_obat.setValue(t.value),this.id_tambahan_aturan_pakai.setValue(1),this.ket_aturan.setValue(t.itemData.tambahan_aturan_pakai))}handleChangeSatuanAturan(t){this.satuan_aturan_pakai.setValue(t.itemData.satuan_aturan_pakai)}handleChangeNamaRacikan(){this.set_racikan_id.setValue(null)}handelClickRacikan(){this.idRegister?this.LookupRacikan.onOpenModal():this.utilityService.onShowingCustomAlert("warning","Isi Data Pasien Terlebih Dahulu","")}handelClickTemplateResep(){this.idRegister?this.LookupTemplateResep.onOpenModal():this.utilityService.onShowingCustomAlert("warning","Isi Data Pasien Terlebih Dahulu","")}handleChangeMetodeRacikan(t){this.metode_racikan.setValue(t.itemData.metode_racikan)}heandleSelectedRacikan(t){let e;this.counter++,t.counter=this.counter,t.is_racikan=!0,t.is_racikan=!0,t.no_urut=0,t.id_item=null,t.nama_satuan=null,t.label=null,t.nama_racikan=t.nama_obat,t.label=t.ket_label,t.aturan=t.ket_aturan,this.resepDokterService.addDetail(t),e=this.GridResepRacikan.childGrid.dataSource,t.details.forEach(t=>{let a=this.counterRacikan++;t.counter=this.counter,t.counterRacikan=a,e.push(t)}),console.log(e),this.resepDokterService.dataSourceChildGrid.next(e)}heandleSelectedTemplateResep(t){let e;e=this.GridResepRacikan.childGrid.dataSource,t.details.forEach(t=>{this.counter++,t.counter=this.counter,t.nama_racikan=t.is_racikan?t.nama_obat:"",t.label=1==t.id_label_pemakaian_obat?t.ket_label:t.id_label_pemakaian_obat,t.aturan=1==t.id_tambahan_aturan_pakai?t.ket_aturan:t.id_tambahan_aturan_pakai,this.resepDokterService.addDetail(t),t.racikans.forEach(t=>{let a=this.counterRacikan++;t.counter=this.counter,t.counterRacikan=a,e.push(t)})}),this.resepDokterService.dataSourceChildGrid.next(e),this.onSetTemplateResep()}handleAddObat(t){this.counter++,t.counter=this.counter,t.is_racikan?t.nama_obat=t.nama_racikan:(t.id_metode_racikan=null,t.metode_racikan=null),this.resepDokterService.addDetail(t),this.onResetFormObat()}onResetFormObat(){this.FormAddObat.reset(),this.is_racikan.setValue(!1)}onChangeWaktuPakai(t){const e=document.getElementById("waktuPakai"+t),a=this.WaktuPakai.indexOf(t);e.checked?this.WaktuPakai.push(t):this.WaktuPakai.splice(a,1)}onUpdateDataObat(t){this.resepDokterService.editDetail(this.currentIndex,t),this.onResetFormObat(),this.GridResepRacikan.refresh(),this.FormAddObatState="input"}onResetFormDataObat(){this.FormAddObat.reset(),this.SatuanObat=""}onInitalizedGrid(t){this.gridDaftarObat=t}onToolbarClick(t){switch(t.item.id){case"edit":this.onEditData(),this.FormAddObatState="edit";break;case"delete":this.resepDokterService.removeDataDetail(this.currentIndex),this.GridResepRacikan.refresh()}}onEditData(){let t=this.SelectedDataObat;this.FormAddObat.setValue({counter:t.counter,no_urut:t.no_urut,is_racikan:t.is_racikan,set_racikan_id:t.set_racikan_id,id_metode_racikan:t.id_metode_racikan,metode_racikan:t.metode_racikan,id_item:t.id_item,nama_obat:t.nama_obat,qty_resep:t.qty_resep,nama_satuan:t.nama_satuan,label:t.label,ket_label:t.ket_label,id_label_pemakaian_obat:t.id_label_pemakaian_obat,label_pemakaian_obat:t.label_pemakaian_obat,aturan:t.aturan,ket_aturan:t.ket_aturan,id_tambahan_aturan_pakai:t.id_tambahan_aturan_pakai,label_tambahan_aturan_pakai_obat:t.label_tambahan_aturan_pakai_obat,nama_racikan:t.nama_racikan,id_satuan_aturan_pakai:t.id_satuan_aturan_pakai,satuan_aturan_pakai:t.satuan_aturan_pakai})}onActionComplete(t){}onRowSelected(t){this.currentIndex=t.rowIndex,this.SelectedDataObat=t.data}onClickButtonNav(t){switch(t){case"Template":this.handelClickTemplateResep();case"Reset":this.resepDokterService.reset(),this.isGetFromTemplate=!1;break;case"Simpan":this.onGetGridResepDatasource();break;case"Kembali":this.location.back()}}onSetTemplateResep(){this.isGetFromTemplate=!0}onGetGridResepDatasource(){return(0,Ca.mG)(this,void 0,void 0,function*(){this.dataHeader={id_dokter:this.idDokter,id_register:this.idRegister,id_outlet:this.idOutlet,id_person:this.idPerson,jenis_rawat:"J",nama_template:"",tanggal_resep:this.currentTanggal};let t=yield this.resepDokterService.dataDetail;this.newdetail=t.filter(t=>t.is_racikan&&!t.set_racikan_id),this.baru=0,this.isGetFromTemplate?this.methodConfirmSetRacikan(0):this.modalRef=this.modalService.show(this.modalTemplateResep,Object.assign({},{class:"modal-lg"}))})}handleClickSimpanTemplateResepDokter(){let t=document.getElementsByName("nama_resep")[0].value;this.dataHeader.nama_template=t,this.modalRef.hide(),this.methodConfirmSetRacikan(1)}handleClickAbaikan(){this.modalRef.hide(),this.methodConfirmSetRacikan(0)}methodConfirmSetRacikan(t){this.newdetail.length>0?gt().fire({title:"Apakah Anda Ingin Menyimapan Racikan Baru ke dalam Setting Racikan dokter?",text:"Racikan akan bisa di gunakan lagi untuk template",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Iya, Saya Yakin",cancelButtonText:"Tidak",focusCancel:!0}).then(e=>{this.baru=e.isConfirmed?1:0,this.methodInsert(this.dataHeader,t,this.baru)}):this.methodInsert(this.dataHeader,t,0)}methodInsert(t,e,a){this.resepDokterService.Insert(t,e,a).subscribe(t=>{t.responseResult&&this.resepDokterService.generadeNoAntrian(this.no_register).subscribe(t=>{t.responseResult&&this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.resepDokterService.reset(),this.isGetFromTemplate=!1,this.location.back()})})})}get is_racikan(){return this.FormAddObat.get("is_racikan")}get set_racikan_id(){return this.FormAddObat.get("set_racikan_id")}get id_metode_racikan(){return this.FormAddObat.get("id_metode_racikan")}get metode_racikan(){return this.FormAddObat.get("metode_racikan")}get id_item(){return this.FormAddObat.get("id_item")}get nama_obat(){return this.FormAddObat.get("nama_obat")}get qty_resep(){return this.FormAddObat.get("qty_resep")}get nama_satuan(){return this.FormAddObat.get("nama_satuan")}get label(){return this.FormAddObat.get("label")}get ket_label(){return this.FormAddObat.get("ket_label")}get id_label_pemakaian_obat(){return this.FormAddObat.get("id_label_pemakaian_obat")}get label_pemakaian_obat(){return this.FormAddObat.get("label_pemakaian_obat")}get aturan(){return this.FormAddObat.get("aturan")}get ket_aturan(){return this.FormAddObat.get("ket_aturan")}get id_tambahan_aturan_pakai(){return this.FormAddObat.get("id_tambahan_aturan_pakai")}get label_tambahan_aturan_pakai_obat(){return this.FormAddObat.get("label_tambahan_aturan_pakai_obat")}get nama_racikan(){return this.FormAddObat.get("nama_racikan")}get satuan_aturan_pakai(){return this.FormAddObat.get("satuan_aturan_pakai")}ngOnDestroy(){this.resepDokterService.reset()}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(d.f),l.Y36(Ce.l),l.Y36(Ja.f),l.Y36(Ma.I),l.Y36(Ua.m),l.Y36(yt.A),l.Y36(Qa.O),l.Y36(T.t),l.Y36(La.f),l.Y36(H.tT),l.Y36(o.F0),l.Y36(l.Qsj),l.Y36(i.Ye))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-input-resep-irja"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Ka,5),l.Gf(Va,5),l.Gf(Wa,5),l.Gf(za,5),l.Gf(Xa,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.LookupRacikan=t.first),l.iGM(t=l.CRH())&&(e.LookupTemplateResep=t.first),l.iGM(t=l.CRH())&&(e.GridResepRacikan=t.first),l.iGM(t=l.CRH())&&(e.itemTemplate=t.first),l.iGM(t=l.CRH())&&(e.modalTemplateResep=t.first)}},decls:88,vars:83,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"card"],[1,"card-body","p-2"],[1,"row"],[1,"col-sm-5"],[1,"row","mb-2"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital",3,"dataSource","fields","allowFiltering","change"],["MaritalOutletDropdown",""],[1,"col-sm-7"],[3,"modal-title","idKode","idTitle","label","lookup-url","filter-lookup","columns","onGetSelectedData"],["LookupPasien",""],[1,"row","pt-2","mb-2"],[1,"col-lg-1","col-md-1","col-sm-1","col-xs-1"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],["for","DropdownObat",1,"form-label"],["type","checkbox","formControlName","is_racikan",1,"form-check-input"],["class","col-lg-4 col-md-4 col-sm-4 col-xs-4",4,"ngIf"],["class","col-lg-3 col-md-3 col-sm-3 col-xs-3",4,"ngIf"],["class","col-lg-2 col-md-2 col-sm-2 col-xs-2",4,"ngIf"],[1,"col-lg-1","col-md-1","col-sm-1","col-xs-1","pe-1"],["for","NumericQty",1,"form-label"],["id","NumericQty","formControlName","qty_resep",3,"format","showSpinButton","showClearButton","ste"],[1,"col-lg-2","col-md-2","col-sm-2","col-xs-2","pe-1"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","pe-1"],["id","DropdownLabelPemakaian","formControlName","label","popupWidth","30rem",3,"allowFiltering","dataSource","fields","change"],["class","col-lg-1 col-md-1 col-sm-1 col-xs-1 pe-1",4,"ngIf"],["id","DropdownTambahanAturanPakai","formControlName","aturan","popupWidth","25rem",3,"allowFiltering","dataSource","fields","change"],[1,"col-lg-1","col-md-1","col-sm-1","col-xs-1","ps-4"],[1,"row","align-content-center","h-100","mb-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","px-0",3,"hidden"],["type","button",1,"btn","btn-primary","btn-sm",3,"disabled","click"],[1,"fas","fa-plus-circle","fa-sm"],[3,"hidden"],["type","button",1,"btn","btn-warning","btn-sm",3,"disabled","click"],[1,"fas","fa-edit","fa-sm"],[3,"lookup-url","columns","columnsChild","filter-lookup","queryString","modal-title","onGetSelectedData"],["LookupRacikan",""],[3,"lookup-url","columns","columnsChild","filter-lookup","modal-title","queryString","onGetSelectedData"],["LookupTemplateResep",""],[1,"col-lg-12","col-md-12","col-xs-12","col-sm-12"],[1,"card-body","p-0"],["height","calc(100vh - 27rem)","gridLines","Both","rowHeight","30",3,"dataSource","childGrid","toolbar","allowResizing","toolbarClick","load","rowDataBound","dataBound","rowSelected","actionComplete"],["GridResepRacikan",""],["field","no_urut","headerText","no_urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","is_racikan","headerText","is_racikan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","set_racikan_id","headerText","set_racikan_id","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_metode_racikan","headerText","id_metode_racikan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_label_pemakaian_obat","headerText","id_label_pemakaian_obat","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_tambahan_aturan_pakai","headerText","id_tambahan_aturan_pakai","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_obat","headerText","Nama Obat","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_satuan","headerText","Satuan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","width"],["field","metode_racikan","headerText","Racikan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","width"],["field","qty_resep","headerText","Qty","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width"],["field","ket_label","headerText","Pemakaian","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","ket_aturan","headerText","Aturan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["modalTemplateResep",""],[1,"col-lg-10","col-md-10","col-sm-10","col-xs-10","pe-0"],["id","DropdownObat","formControlName","id_item","popupWidth","55rem",3,"allowFiltering","dataSource","fields","placeholder","query","sortOrder","filtering","change"],["Drop",""],[1,"col-lg-2","col-md-2","col-sm-2","col-xs-2","px-0"],["id","basic-addon1",1,"input-group-text","bg-primary","text-white"],[1,"col-lg-3","col-md-3","col-sm-3","col-xs-3"],[1,"input-group"],["type","text","formControlName","nama_racikan",1,"form-control","form-select-sm",3,"change"],["id","btnInputGroup","type","button",1,"btn","btn-primary",2,"padding",".1rem .8rem","background-color","#00afff; border: 0",3,"click"],[1,"fas","fa-search"],[1,"col-lg-2","col-md-2","col-sm-2","col-xs-2"],["formControlName","id_metode_racikan",3,"dataSource","fields","allowFiltering","change"],["MolDropdown",""],["id","DropdownLabelPemakaian","formControlName","id_satuan_aturan_pakai","popupWidth","30rem",3,"allowFiltering","dataSource","fields","change"],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12",2,"text-align","center"],[1,"col-lg-12","col-md-12","col-sm-12"],[1,"mb-2","row"],[1,"col-sm-4"],["for","nama_resep"],[1,"col-sm-8"],["type","text","name","nama_resep",1,"form-control","form-control-sm"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l.TgZ(6,"div",6),l.TgZ(7,"div",7),l._UZ(8,"atm-label",8),l.qZA(),l.TgZ(9,"div",9),l.TgZ(10,"ejs-dropdownlist",10,11),l.NdJ("change",function(t){return e.handleChangeOutlet(t)}),l.ALo(12,"async"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(13,"div",12),l.TgZ(14,"org-input-look-up-kode",13,14),l.NdJ("onGetSelectedData",function(t){return e.handleSelectedLookupPasien(t)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(16,"div",15),l.TgZ(17,"div",16),l.TgZ(18,"div",6),l.TgZ(19,"div",17),l.TgZ(20,"label",18),l._uU(21,"Racik"),l.qZA(),l.qZA(),l.TgZ(22,"div",17),l._UZ(23,"input",19),l.qZA(),l.qZA(),l.qZA(),l.YNc(24,$a,13,8,"div",20),l.YNc(25,ti,10,0,"div",21),l.YNc(26,ei,10,5,"div",22),l.TgZ(27,"div",23),l.TgZ(28,"div",4),l.TgZ(29,"div",17),l.TgZ(30,"label",24),l._uU(31,"Qty"),l.qZA(),l.qZA(),l.TgZ(32,"div",17),l._UZ(33,"ejs-numerictextbox",25),l.qZA(),l.qZA(),l.qZA(),l.TgZ(34,"div",26),l.TgZ(35,"div",4),l.TgZ(36,"div",17),l.TgZ(37,"label",24),l._uU(38,"Label Obat"),l.qZA(),l.qZA(),l.TgZ(39,"div",27),l.TgZ(40,"ejs-combobox",28),l.NdJ("change",function(t){return e.handleChangeLabel(t)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(41,ai,7,3,"div",29),l.TgZ(42,"div",26),l.TgZ(43,"div",4),l.TgZ(44,"div",17),l.TgZ(45,"label",24),l._uU(46,"Aturan Tambahan"),l.qZA(),l.qZA(),l.TgZ(47,"div",27),l.TgZ(48,"ejs-combobox",30),l.NdJ("change",function(t){return e.handleChangeAturan(t)}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(49,"div",31),l.TgZ(50,"div",32),l.TgZ(51,"div",33),l.TgZ(52,"button",34),l.NdJ("click",function(){return e.handleAddObat(e.FormAddObat.value)}),l._UZ(53,"i",35),l.TgZ(54,"span",36),l._uU(55,"\xa0Obat"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(56,"div",33),l.TgZ(57,"button",37),l.NdJ("click",function(){return e.onUpdateDataObat(e.FormAddObat.value)}),l._UZ(58,"i",38),l.TgZ(59,"span",36),l._uU(60,"\xa0Edit"),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.TgZ(61,"org-look-up-hirarki",39,40),l.NdJ("onGetSelectedData",function(t){return e.heandleSelectedRacikan(t)}),l.qZA(),l.TgZ(63,"org-look-up-hirarki",41,42),l.NdJ("onGetSelectedData",function(t){return e.heandleSelectedTemplateResep(t)}),l.qZA(),l.qZA(),l.qZA(),l.TgZ(65,"div",15),l.TgZ(66,"div",43),l.TgZ(67,"div",2),l.TgZ(68,"div",44),l.TgZ(69,"ejs-grid",45,46),l.NdJ("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.onLoad(t)})("rowDataBound",function(t){return e.rowDataBound(t)})("dataBound",function(){return e.onDataBound()})("rowSelected",function(t){return e.onRowSelected(t)})("actionComplete",function(t){return e.onActionComplete(t)}),l.ALo(71,"async"),l.TgZ(72,"e-columns"),l._UZ(73,"e-column",47),l._UZ(74,"e-column",48),l._UZ(75,"e-column",49),l._UZ(76,"e-column",50),l._UZ(77,"e-column",51),l._UZ(78,"e-column",52),l._UZ(79,"e-column",53),l._UZ(80,"e-column",54),l._UZ(81,"e-column",55),l._UZ(82,"e-column",56),l._UZ(83,"e-column",57),l._UZ(84,"e-column",58),l._UZ(85,"e-column",59),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.YNc(86,ii,25,0,"ng-template",null,60,l.W1O),l.qZA()),2&t&&(l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("formGroup",e.FormAddObat),l.xp6(7),l.Q6J("LabelCaption","Depo Farmasi"),l.xp6(2),l.Q6J("dataSource",l.lcZ(12,79,e.setupOutletService.dataSource))("fields",e.SetupOutletDropdownField)("allowFiltering",!0),l.xp6(4),l.Q6J("modal-title","Daftar Pasien")("idKode","no_rekam_medis")("idTitle","nama_pasien")("label","Pasien")("lookup-url",e.UrlLookupDaftarPasien)("filter-lookup",e.Config.LookupPasien.filter)("columns",e.Config.LookupPasien.columns),l.xp6(10),l.Q6J("ngIf",!e.is_racikan.value),l.xp6(1),l.Q6J("ngIf",e.is_racikan.value),l.xp6(1),l.Q6J("ngIf",e.is_racikan.value),l.xp6(7),l.Q6J("format","N0")("showSpinButton",!1)("showClearButton",!1),l.xp6(7),l.Q6J("allowFiltering",!0)("dataSource",e.dataSourceLabelPemakaian)("fields",e.DropdownLabelFields),l.xp6(1),l.Q6J("ngIf",!e.is_racikan.value),l.xp6(7),l.Q6J("allowFiltering",!0)("dataSource",e.dataSourceTambahanAturanPakai)("fields",e.DropdownAturanFields),l.xp6(2),l.Tol(e.width>=1023&&e.width<=1200?"pt-1":"pt-4"),l.xp6(1),l.Q6J("hidden","input"!=e.FormAddObatState),l.xp6(1),l.Q6J("disabled",e.FormAddObat.invalid),l.xp6(2),l.Q6J("hidden",e.width>=1023&&e.width<=1200),l.xp6(2),l.Q6J("hidden","input"==e.FormAddObatState),l.xp6(1),l.Q6J("disabled",e.FormAddObat.invalid),l.xp6(2),l.Q6J("hidden",e.width>=1023&&e.width<=1200),l.xp6(2),l.Q6J("lookup-url",e.urlRacikan)("columns",e.GridLookUpItem.columns)("columnsChild",e.GridLookUpItem.columnsChild)("filter-lookup",e.GridLookUpItem.filter)("queryString","set_racikan_id")("modal-title","Data Racikan Dokter"),l.xp6(2),l.Q6J("lookup-url",e.urlTemplateResep)("columns",e.GridlookUpTemplateResep.columns)("columnsChild",e.GridlookUpTemplateResep.columnsChild)("filter-lookup",e.GridlookUpTemplateResep.filter)("modal-title","Data Template Resep Dokter")("queryString","resep_id"),l.xp6(6),l.Q6J("dataSource",l.lcZ(71,81,e.resepDokterService.dataDetail$))("childGrid",e.ChildGrid)("toolbar",e.GridDaftarObatToolbar)("allowResizing",!0),l.xp6(4),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!1)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1)("width",100),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1)("width",100),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",60),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1))},directives:[u.G,n._Y,n.JL,n.sg,Dt.D,It.rI,Ha.E,n.Wl,n.JJ,n.u,i.O5,ja.Uw,It.oX,Ya.K,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,n.Fj],pipes:[i.Ov],styles:["#basic-addon1[_ngcontent-%COMP%]{height:32px;padding-left:12px;width:100%;border-top-left-radius:0;border-bottom-left-radius:0;border:0}#DropdownObat[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}#NumericQty[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{text-align:right;padding-right:5px}div.head[_ngcontent-%COMP%]{font-size:13px!important;font-weight:500!important}.is-racikan[_ngcontent-%COMP%]{background-color:#f3e6f3}.e-toolbar[_ngcontent-%COMP%]   .e-toolbar-item[_ngcontent-%COMP%]   .e-tbar-btn.e-btn[_ngcontent-%COMP%]   .e-icons.e-btn-icon[_ngcontent-%COMP%]{min-height:14px!important}th.e-headercell[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.03);color:#000;border:1px solid rgba(0,0,0,.13);padding:5px!important;height:30px!important}span.e-headertext[_ngcontent-%COMP%]{font-size:13px!important}td.e-rowcell[_ngcontent-%COMP%]{padding:5px!important}.e-grid[_ngcontent-%COMP%]   .e-detailheadercell[_ngcontent-%COMP%], div.e-gridcontent[_ngcontent-%COMP%]   tr.e-detailrow[_ngcontent-%COMP%]   td.e-detailcell[_ngcontent-%COMP%]   div.e-headercontent[_ngcontent-%COMP%]   th.e-headercell[_ngcontent-%COMP%], td.e-detailcell.e-lastrowcell[_ngcontent-%COMP%]{background-color:var(--biru-muda)!important}"]}),t})();const ri=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"id_poli","headerText":"Id","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_poli","headerText":"Kode Ruangan","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_poli","headerText":"Nama Ruangan","type":"string","visible":true}],"filter":[{"field":"kode_poli","filter":"like","title":"Kode Ruangan"},{"field":"nama_ruangan","filter":"like","title":"Nama Ruangan"}]}');var oi=a.t(ri,2);const li=JSON.parse('{"GridColumns":[{"field":"id_register","headerText":"Id","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"no_register","headerText":"No Register","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_pasien","headerText":"Nama Pasien","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Nama Dokter","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}]}');var di=a.t(li,2);const si=JSON.parse('{"GridColumns":[{"field":"id_register","headerText":"Id","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nomor_resep","headerText":"Nomor Resep","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Dokter","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"status_resep","headerText":"Status Resep","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}],"columnsChild":[{"field":"nama_obat","headerText":"Nama Obat"},{"field":"qty_racikan","headerText":"Qty","width":50},{"field":"harga_jual_apotek","headerText":"Harga","format":"N2","width":70},{"field":"total_harga","headerText":"Total Harga","textAlign":"Right","format":"N2","width":70}]}');var ui=a.t(si,2),ci=a(1468);let pi=(()=>{class t{constructor(t,e){this.httpOperationService=t,this.notificationService=e,this.API=g.PHARMACY.TRANSAKSI_OBAT.TRANSAKSI_OBAT_IRDA,this.dataResep=new O.X([])}Insert(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT+"/"+t,[]).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}setResep(t){this.dataResep.next(t)}onGetPasienIrda(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_PASIEN_IRDA,t).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(f.d),l.LFG(b.g))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var hi=a(7958);const mi=["LookupKodeRuangan"],gi=["GridDetailResep"],fi=["GridPasien"];function bi(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"mol-grid",2,13),l.NdJ("row-selected",function(e){return l.CHM(t),l.oxw().handleSelectedRowResep(e)}),l.ALo(3,"async"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(1),l.Q6J("grid-height","calc(100vh - 20rem)")("grid-DataSource",l.lcZ(3,5,t.transaksiObatIrdaService.dataResep))("grid-paging",!1)("grid-lines","Both")("columns",t.GridConfigResep.GridColumns)}}const _i=function(){return{wrapMode:"Both"}};function Ti(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"button",14),l.NdJ("click",function(){return l.CHM(t),l.oxw().handelClickLihatresep()}),l._UZ(2,"i",15),l._uU(3," Daftar Resep"),l.qZA(),l.TgZ(4,"button",16),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleClickSimpan()}),l._UZ(5,"i",17),l._uU(6," Simpan Transaksi Obat"),l.qZA(),l.TgZ(7,"ejs-grid",18,19),l.NdJ("rowDataBound",function(e){return l.CHM(t),l.oxw().rowDataBound(e)})("dataBound",function(){return l.CHM(t),l.oxw().onDataBound()}),l.TgZ(9,"e-columns"),l._UZ(10,"e-column",20),l._UZ(11,"e-column",21),l._UZ(12,"e-column",22),l._UZ(13,"e-column",23),l.qZA(),l.qZA(),l.TgZ(14,"div",24),l._UZ(15,"div",25),l.TgZ(16,"div",26),l._UZ(17,"mol-input-numeric",27),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(7),l.Q6J("dataSource",t.DataSourceDetailResep)("childGrid",t.childGrid)("allowTextWrap",!0)("textWrapSettings",l.DdM(22,_i)),l.xp6(3),l.Q6J("visible",!0)("allowEditing",!1)("valueAccessor",t.keterangan),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130)("valueAccessor",t.quantity),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130)("valueAccessor",t.hargajual),l.xp6(4),l.Q6J("label","Total Bayar Resep")("isFooter",!0)("inputFieldState","detail")("inputFieldState",t.inputFieldState)}}let Si=(()=>{class t{constructor(t,e,a,i,n){this.formBuilder=t,this.resepDokterIrdaService=e,this.transaksiObatIrdaService=a,this.admisiPasienRawatInapService=i,this.utilityService=n,this.urlRuangan=Fa.API_BILLING.SETUP_DATA.SETUP_POLI.GET_ALL_POLI_FOR_LOOKUP_RAWAT_INAP,this.LookupGridRuangan=oi,this.GridConfig=di,this.GridConfigResep=ui,this.DataSourcePasien=[],this.DataSourceResep=[],this.DataSourceDetailResep=[],this.DataSourceDetailResepRacikan=[],this.inputFieldState="detail",this.handleClickResep=!1,this.currentResepId=null,this.currentRegisterId=1,this.keterangan=(t,e)=>e.nama_obat+", "+e.ket_label+", "+e.ket_aturan,this.quantity=(t,e)=>e.qty_harian+" "+e.nama_satuan,this.hargajual=(t,e)=>e.is_racikan?e.harga_jual_apotek:e.harga_jual_apotek*e.qty_harian}ngOnInit(){this.formInput=this.formBuilder.group({nama_pasien:["",[]],umur:["",[]],bed:["",[]],dokter:["",[]],nomor_rm:["",[]],nomor_registrasi:["",[]],total_bayar_resep:[0,[]]}),this.childGrid={dataSource:this.DataSourceDetailResepRacikan,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:[{field:"nama_obat",headerText:"Nama Obat"},{field:"qty_racikan",headerText:"Qty",width:50},{field:"harga_jual_apotek",headerText:"Harga",textAlign:"Right",format:"N2",width:70},{field:"total_harga",headerText:"Total Harga",textAlign:"Right",format:"N2",width:70}]},this.set(1),this.refreshGridPasien()}refreshGridPasien(){this.transaksiObatIrdaService.onGetPasienIrda([]).subscribe(t=>{this.DataSourcePasien=t.data,this.GridPasien.Grid.refresh()})}set(t){this.resepDokterIrdaService.onGetByIdRegisterToTrans(t).subscribe(t=>{this.transaksiObatIrdaService.setResep(t.data),console.log(t.data)})}handleSelectedRow(t){console.log(t),this.currentRegisterId=t.data.id_register,this.formInput.setValue({nama_pasien:t.data.nama_pasien,umur:t.data.umur,bed:"",dokter:t.data.nama_dokter,nomor_rm:t.data.no_rekam_medis,nomor_registrasi:t.data.no_register,total_bayar_resep:0}),this.resepDokterIrdaService.onGetByIdRegisterToTrans(this.currentRegisterId).subscribe(t=>{this.transaksiObatIrdaService.setResep(t.data)}),this.handleClickResep=!1}handleSelectedRowResep(t){this.handleClickResep=!0,this.onLoadDetailData(t.data.resep_id),this.currentResepId=t.data.resep_id}rowDataBound(t){t.data.is_racikan||(t.row.querySelector("td").innerHTML=" ",t.row.querySelector("td").className="e-customizedExpandcell")}onDataBound(){this.GridDetailResep.detailRowModule.expandAll()}onLoadDetailData(t){this.resepDokterIrdaService.onGetById(t).subscribe(t=>{this.DataSourceDetailResep=t.data.details,this.GridDetailResep.refresh(),this.mapingRacikan(t.data.details);let e=0;this.DataSourceDetailResep.map(t=>{console.log(),e+=t.is_racikan?t.harga_jual_apotek:t.qty_harian*t.harga_jual_apotek,this.total_bayar_resep.setValue(e)})})}mapingRacikan(t){this.DataSourceDetailResepRacikan=[],t.map(t=>{t.racikans.map(t=>t.total_harga=t.qty_racikan*t.harga_jual_apotek),this.DataSourceDetailResepRacikan.push(...t.racikans)}),this.childGrid={dataSource:this.DataSourceDetailResepRacikan,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:[{field:"nama_obat",headerText:"Nama Obat"},{field:"qty_racikan",headerText:"Qty",width:50},{field:"harga_jual_apotek",headerText:"Harga",textAlign:"Right",format:"N2",width:70},{field:"total_harga",headerText:"Total Harga",textAlign:"Right",format:"N2",width:70}]}}handelClickLihatresep(){this.handleClickResep=!1}handleClickSimpan(){this.transaksiObatIrdaService.Insert(this.currentResepId).subscribe(t=>{this.handleClickResep=!1,this.resepDokterIrdaService.onGetByIdRegisterToTrans(this.currentRegisterId).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.transaksiObatIrdaService.setResep(t.data),this.refreshGridPasien()})})})}get total_bayar_resep(){return this.formInput.get("total_bayar_resep")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(ci.f),l.Y36(pi),l.Y36(hi.l),l.Y36(T.t))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-transaksi-obat-irda"]],viewQuery:function(t,e){if(1&t&&(l.Gf(mi,5),l.Gf(gi,5),l.Gf(fi,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.LookupKodeRuangan=t.first),l.iGM(t=l.CRH())&&(e.GridDetailResep=t.first),l.iGM(t=l.CRH())&&(e.GridPasien=t.first)}},decls:17,vars:18,consts:[[1,"row"],[1,"col-sm-4"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected"],["GridPasien",""],[1,"col-sm-8"],[3,"formGroup"],[1,"col-sm-6"],["formControlName","nomor_rm",3,"label","inputFieldState"],["formControlName","nama_pasien",3,"label","inputFieldState"],["formControlName","umur",3,"label","inputFieldState"],["formControlName","dokter",3,"label","inputFieldState"],["formControlName","nomor_registrasi",3,"label","inputFieldState"],[4,"ngIf"],["GridResep",""],["type","button",1,"app-btn-master","me-5","btn","btn-sm","btn-primary-outline",3,"click"],[1,"fas","fa-arrow-left"],["type","button",1,"app-btn-master","btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-save"],["height","calc(100vh - 24rem)","gridLines","Both","rowHeight","30",3,"dataSource","childGrid","allowTextWrap","textWrapSettings","rowDataBound","dataBound"],["GridDetailResep",""],["field","rute_pemberian_obat","headerText","Resep","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","valueAccessor"],["field","qty_harian","headerText","Qty","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing","width","valueAccessor"],["field","harga_jual_apotek","headerText","Harga","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width"],["field","harga_jual_apotek","headerText","Total Harga","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width","valueAccessor"],[1,"row","pe-2"],[1,"col-sm-5"],[1,"col-sm-7"],["formControlName","total_bayar_resep",3,"label","isFooter","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"mol-grid",2,3),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)}),l.qZA(),l.qZA(),l.TgZ(5,"div",4),l.TgZ(6,"form",5),l.TgZ(7,"div",0),l.TgZ(8,"div",6),l._UZ(9,"mol-input-text",7),l._UZ(10,"mol-input-text",8),l._UZ(11,"mol-input-text",9),l.qZA(),l.TgZ(12,"div",6),l._UZ(13,"mol-input-text",10),l._UZ(14,"mol-input-text",11),l.qZA(),l.qZA(),l.YNc(15,bi,4,7,"span",12),l.YNc(16,Ti,18,23,"span",12),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(3),l.Q6J("grid-height","calc(100vh - 13rem)")("grid-DataSource",e.DataSourcePasien)("grid-paging",!1)("grid-lines","Both")("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("formGroup",e.formInput),l.xp6(3),l.Q6J("label","No Rm")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Umur")("inputFieldState",e.inputFieldState),l.xp6(2),l.Q6J("label","Dokter")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","No Reg")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("ngIf",!e.handleClickResep),l.xp6(1),l.Q6J("ngIf",e.handleClickResep))},directives:[u.G,ct.q,n._Y,n.JL,n.sg,K._,n.JJ,n.u,i.O5,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,Tt.G],pipes:[i.Ov],styles:["#DropdownObat[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}#NumericQty[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{text-align:right;padding-right:5px}div.head[_ngcontent-%COMP%]{font-size:13px!important;font-weight:500!important}.is-racikan[_ngcontent-%COMP%]{background-color:#f3e6f3}.form_paragraf[_ngcontent-%COMP%]{display:inline-block!important}.form-label[_ngcontent-%COMP%]{margin-bottom:0}#basic-addon1[_ngcontent-%COMP%]{height:32px;padding-left:12px;width:100%;border-top-left-radius:0;border-bottom-left-radius:0;border:0}.e-toolbar[_ngcontent-%COMP%]   .e-toolbar-item[_ngcontent-%COMP%]   .e-tbar-btn.e-btn[_ngcontent-%COMP%]   .e-icons.e-btn-icon[_ngcontent-%COMP%]{min-height:14px!important}th.e-headercell[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.03);color:#000;border:1px solid rgba(0,0,0,.13);padding:5px!important;height:30px!important}span.e-headertext[_ngcontent-%COMP%]{font-size:13px!important}td.e-rowcell[_ngcontent-%COMP%]{padding:5px!important}.e-grid[_ngcontent-%COMP%]   .e-detailheadercell[_ngcontent-%COMP%], div.e-gridcontent[_ngcontent-%COMP%]   tr.e-detailrow[_ngcontent-%COMP%]   td.e-detailcell[_ngcontent-%COMP%]   div.e-headercontent[_ngcontent-%COMP%]   th.e-headercell[_ngcontent-%COMP%], td.e-detailcell.e-lastrowcell[_ngcontent-%COMP%]{background-color:var(--biru-muda)!important}"]}),t})();const vi=JSON.parse('{"GridColumns":[{"field":"id_dokter","headerText":"Pemesanan Id","type":"number","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Pemesanan Id","type":"number","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nomor_resep","headerText":"Pemesanan Id","type":"number","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"id_dokter","headerText":"Pemesanan Id","type":"number","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"id_dokter","headerText":"Pemesanan Id","type":"number","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}],"columnsChild":[{"field":"nama_obat","headerText":"Nama Obat"},{"field":"qty_racikan","headerText":"Qty","width":50}]}');var ki=a.t(vi,2),xi=a(7232),Ai=a(3762);const wi=["LookupRacikan"],Zi=["GridResepRacikan"],Ci=["itemTemplate"],yi=["modalTambahanHariResep"],Di=function(){return{wrapMode:"Both"}};let Ii=(()=>{class t{constructor(t,e,a,i,n,r,o,l,d){this.resepDokterService=t,this.transaksiObatIrjaService=e,this.router=a,this.encryptionService=i,this.activatedRoute=n,this.utilityService=r,this.utilityHelperService=o,this.pendaftaranPasienBaruService=l,this.formBuilder=d,this.ButtonNav=[{Id:"kembali",Captions:"Kembali",Icons1:"fa-arrow-left fa-sm"},{Id:"simpan",Captions:"Simpan Penjualan Resep",Icons1:"fa-save fa-sm"}],this.GridConfig=ki,this.inputFieldState="detail",this.keterangan=(t,e)=>e.nama_obat+", "+e.ket_label+", "+e.ket_aturan,this.quantity=(t,e)=>e.qty_resep+" "+e.nama_satuan,this.totalharga=(t,e)=>e.is_racikan?e.harga_jual_apotek:e.qty_resep*e.harga_jual_apotek,this.dataSourceChild=[],this.dataSource=[],this.dataHeader=[]}ngOnInit(){this.formInput=this.formBuilder.group({outlet:["",[]],pasien:["",[]],poli:["",[]],dokter:["",[]],umur:["",[]],total_bayar_resep:[0,[]]}),this.childGrid={dataSource:this.dataSourceChild,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:[{field:"nama_obat",headerText:"Nama Obat"},{field:"qty_racikan",headerText:"Qty",width:50},{field:"harga_jual_apotek",headerText:"Harga",textAlign:"Right",format:"N2",width:70},{field:"total_harga",headerText:"Total Harga",textAlign:"Right",format:"N2",width:70}]}}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onLoadDetailData(t){this.resepDokterService.onGetById(t).subscribe(t=>{this.dataHeader=t.data,console.log("header",this.dataHeader),this.dataSource=t.data.details,this.GridResepRacikan.refresh(),this.mapingRacikan(t.data.details),this.formInput.setValue({outlet:t.data.nama_outlet,poli:t.data.nama_poli,pasien:t.data.nama_pasien,dokter:t.data.nama_dokter,umur:t.data.tgl_lahir,total_bayar_resep:0}),this.pendaftaranPasienBaruService.onGetLinkFotoPerson(this.dataHeader.id_person,!1).subscribe(t=>{this.imageSrc=t.data})})}mapingRacikan(t){this.dataSourceChild=[],t.map(t=>{t.racikans.map(t=>t.total_harga=t.qty_racikan*t.harga_jual_apotek),this.dataSourceChild.push(...t.racikans)}),this.childGrid={dataSource:this.dataSourceChild,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:[{field:"nama_obat",headerText:"Nama Obat"},{field:"qty_racikan",headerText:"Qty",width:50},{field:"harga_jual_apotek",headerText:"Harga",textAlign:"Right",format:"N2",width:70},{field:"total_harga",headerText:"Total Harga",textAlign:"Right",format:"N2",width:70}]}}rowDataBound(t){t.data.is_racikan||(t.row.querySelector("td").innerHTML=" ",t.row.querySelector("td").className="e-customizedExpandcell")}onDataBound(){this.GridResepRacikan.detailRowModule.expandAll()}handleSelected(t){let e=0;this.GridResepRacikan.getSelectedRecords().map(t=>{e+=t.is_racikan?t.harga_jual_apotek:t.qty_resep*t.harga_jual_apotek,this.total_bayar_resep.setValue(e)})}onClickButtonNav(t){switch(t){case"kembali":this.router.navigateByUrl("dashboard/Pharmacy/antrian-farmasi");break;case"simpan":let t=this.dataHeader;t.details=this.GridResepRacikan.getSelectedRecords(),this.transaksiObatIrjaService.Insert(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Berhasil Tersimpan",t.message).then(()=>{this.router.navigateByUrl("dashboard/Pharmacy/antrian-farmasi")})})}}get total_bayar_resep(){return this.formInput.get("total_bayar_resep")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(d.f),l.Y36(_),l.Y36(o.F0),l.Y36(h.C),l.Y36(o.gz),l.Y36(T.t),l.Y36(xi.j),l.Y36(Ai.P),l.Y36(n.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-transaksi-obat-irja"]],viewQuery:function(t,e){if(1&t&&(l.Gf(wi,5),l.Gf(Zi,5),l.Gf(Ci,5),l.Gf(yi,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.LookupRacikan=t.first),l.iGM(t=l.CRH())&&(e.GridResepRacikan=t.first),l.iGM(t=l.CRH())&&(e.itemTemplate=t.first),l.iGM(t=l.CRH())&&(e.modalTambahanHariResep=t.first)}},decls:27,vars:42,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row"],[1,"col-sm-4"],[1,"row","mb-3"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"img-thumbnail",2,"width","120px","max-width","120px","height","150px","max-height","150px",3,"src"],["formControlName","outlet",3,"label","inputFieldState"],["formControlName","poli",3,"label","inputFieldState"],["formControlName","dokter",3,"label","inputFieldState"],["formControlName","pasien",3,"label","inputFieldState"],["formControlName","umur",3,"label","inputFieldState"],[1,"col-sm-8"],[1,"card"],[1,"card-body","p-0"],["height","calc(100vh - 20rem)","gridLines","Both","rowHeight","30",3,"dataSource","childGrid","allowTextWrap","textWrapSettings","rowDataBound","dataBound","rowSelected","rowDeselected"],["GridResepRacikan",""],[3,"width","field","visible","type","textAlign","headerTextAlign"],["field","rute_pemberian_obat","headerText","Resep","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","valueAccessor"],["field","qty_resep","headerText","Qty","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing","width","valueAccessor"],["field","harga_jual_apotek","headerText","Harga","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width"],["field","harga_jual_apotek","headerText","Total","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width","valueAccessor"],[1,"row","pe-2"],[1,"col-sm-5"],[1,"col-sm-7"],["formControlName","total_bayar_resep",3,"label","isFooter","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l._UZ(6,"img",6),l.qZA(),l.qZA(),l._UZ(7,"mol-input-text",7),l._UZ(8,"mol-input-text",8),l._UZ(9,"mol-input-text",9),l._UZ(10,"mol-input-text",10),l._UZ(11,"mol-input-text",11),l.qZA(),l.TgZ(12,"div",12),l.TgZ(13,"div",13),l.TgZ(14,"div",14),l.TgZ(15,"ejs-grid",15,16),l.NdJ("rowDataBound",function(t){return e.rowDataBound(t)})("dataBound",function(){return e.onDataBound()})("rowSelected",function(t){return e.handleSelected(t)})("rowDeselected",function(t){return e.handleSelected(t)}),l.TgZ(17,"e-columns"),l._UZ(18,"e-column",17),l._UZ(19,"e-column",18),l._UZ(20,"e-column",19),l._UZ(21,"e-column",20),l._UZ(22,"e-column",21),l.qZA(),l.qZA(),l.TgZ(23,"div",22),l._UZ(24,"div",23),l.TgZ(25,"div",24),l._UZ(26,"mol-input-numeric",25),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("formGroup",e.formInput),l.xp6(5),l.Q6J("src",e.imageSrc?e.imageSrc:"../../../../../../assets/image/pendaftaran-ulang-pasien/blank.png",l.LSH),l.xp6(1),l.Q6J("label","Outlet")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Poli")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Dokter")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Umur")("inputFieldState",e.inputFieldState),l.xp6(4),l.Q6J("dataSource",e.dataSource)("childGrid",e.childGrid)("allowTextWrap",!0)("textWrapSettings",l.DdM(41,Di)),l.xp6(3),l.Q6J("width",50)("field","Checkbox")("visible",!0)("type","checkbox")("textAlign","Center")("headerTextAlign","Center"),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!1)("valueAccessor",e.keterangan),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",120)("valueAccessor",e.quantity),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",120),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130)("valueAccessor",e.totalharga),l.xp6(4),l.Q6J("label","Total Bayar Resep")("isFooter",!0)("inputFieldState","detail")("inputFieldState",e.inputFieldState))},directives:[u.G,n._Y,n.JL,n.sg,K._,n.JJ,n.u,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,Tt.G],styles:["#DropdownObat[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{border-top-right-radius:0;border-bottom-right-radius:0}#NumericQty[_ngcontent-%COMP%] > span[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{text-align:right;padding-right:5px}div.head[_ngcontent-%COMP%]{font-size:13px!important;font-weight:500!important}.is-racikan[_ngcontent-%COMP%]{background-color:#f3e6f3}.form_paragraf[_ngcontent-%COMP%]{display:inline-block!important}.form-label[_ngcontent-%COMP%]{margin-bottom:0}#basic-addon1[_ngcontent-%COMP%]{height:32px;padding-left:12px;width:100%;border-top-left-radius:0;border-bottom-left-radius:0;border:0}.e-toolbar[_ngcontent-%COMP%]   .e-toolbar-item[_ngcontent-%COMP%]   .e-tbar-btn.e-btn[_ngcontent-%COMP%]   .e-icons.e-btn-icon[_ngcontent-%COMP%]{min-height:14px!important}th.e-headercell[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.03);color:#000;border:1px solid rgba(0,0,0,.13);padding:5px!important;height:30px!important}span.e-headertext[_ngcontent-%COMP%]{font-size:13px!important}td.e-rowcell[_ngcontent-%COMP%]{padding:5px!important}.e-grid[_ngcontent-%COMP%]   .e-detailheadercell[_ngcontent-%COMP%], div.e-gridcontent\r\ntr.e-detailrow\r\ntd.e-detailcell\r\ndiv.e-headercontent\r\nth.e-headercell[_ngcontent-%COMP%], td.e-detailcell.e-lastrowcell[_ngcontent-%COMP%]{background-color:var(--biru-muda)!important}"]}),t})();const Ri=["LookupRacikan"],Ei=["GridResepRacikan"],Ni=["itemTemplate"],qi=["modalTambahanHariResep"],Gi=function(){return{wrapMode:"Both"}};let Oi=(()=>{class t{constructor(t,e,a,i,n,r,o,l){this.resepDokterService=t,this.transaksiObatIrjaService=e,this.router=a,this.encryptionService=i,this.activatedRoute=n,this.utilityService=r,this.utilityHelperService=o,this.formBuilder=l,this.ButtonNav=[{Id:"kembali",Captions:"Kembali",Icons1:"fa-arrow-left fa-sm"}],this.GridConfig=ki,this.inputFieldState="detail",this.keterangan=(t,e)=>e.nama_obat+", "+e.ket_label+", "+e.ket_aturan,this.quantity=(t,e)=>e.qty_resep+" "+e.nama_satuan,this.totalharga=(t,e)=>e.is_racikan?e.harga_jual_apotek:e.qty_resep*e.harga_jual_apotek,this.dataSourceChild=[],this.dataSource=[],this.dataHeader=[]}ngOnInit(){this.formInput=this.formBuilder.group({pasien:["",[]],poli:["",[]],dokter:["",[]],umur:["",[]],total_bayar_resep:[0,[]]}),this.childGrid={dataSource:this.dataSourceChild,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:this.GridConfig.columnsChild}}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onLoadDetailData(t){this.resepDokterService.onGetById(t).subscribe(t=>{this.dataHeader=t.data,this.dataSource=t.data.details,this.GridResepRacikan.refresh(),this.mapingRacikan(t.data.details),this.formInput.setValue({poli:t.data.nama_poli,pasien:t.data.nama_pasien,dokter:t.data.nama_dokter,umur:t.data.tgl_lahir,total_bayar_resep:0}),this.imageSrc=t.data.nama_foto})}mapingRacikan(t){this.dataSourceChild=[],t.map(t=>{this.dataSourceChild.push(...t.racikans)}),this.childGrid={dataSource:this.dataSourceChild,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:this.GridConfig.columnsChild}}rowDataBound(t){t.data.is_racikan||(t.row.querySelector("td").innerHTML=" ",t.row.querySelector("td").className="e-customizedExpandcell")}onDataBound(){this.GridResepRacikan.detailRowModule.expandAll()}handleSelected(t){let e=0;this.GridResepRacikan.getSelectedRecords().map(t=>{e+=t.is_racikan?t.harga_jual_apotek:t.qty_resep*t.harga_jual_apotek,this.total_bayar_resep.setValue(e)})}onClickButtonNav(t){switch(t){case"kembali":this.router.navigateByUrl("dashboard/Pharmacy/antrian-farmasi");break;case"simpan":let t=this.dataHeader;t.details=this.GridResepRacikan.getSelectedRecords(),this.transaksiObatIrjaService.Insert(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Berhasil Tersimpan",t.message).then(()=>{this.router.navigateByUrl("dashboard/Pharmacy/antrian-farmasi")})})}}get total_bayar_resep(){return this.formInput.get("total_bayar_resep")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(d.f),l.Y36(_),l.Y36(o.F0),l.Y36(h.C),l.Y36(o.gz),l.Y36(T.t),l.Y36(xi.j),l.Y36(n.qu))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-view-resep-irja"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Ri,5),l.Gf(Ei,5),l.Gf(Ni,5),l.Gf(qi,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.LookupRacikan=t.first),l.iGM(t=l.CRH())&&(e.GridResepRacikan=t.first),l.iGM(t=l.CRH())&&(e.itemTemplate=t.first),l.iGM(t=l.CRH())&&(e.modalTambahanHariResep=t.first)}},decls:25,vars:34,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row"],[1,"col-sm-4"],[1,"row","mb-3"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"img-thumbnail",2,"width","120px","max-width","120px","height","150px","max-height","150px",3,"src"],["formControlName","poli",3,"label","inputFieldState"],["formControlName","dokter",3,"label","inputFieldState"],["formControlName","pasien",3,"label","inputFieldState"],["formControlName","umur",3,"label","inputFieldState"],[1,"col-sm-8"],[1,"card"],[1,"card-body","p-0"],["height","calc(100vh - 20rem)","gridLines","Both","rowHeight","30",3,"dataSource","childGrid","allowTextWrap","textWrapSettings","rowDataBound","dataBound","rowSelected","rowDeselected"],["GridResepRacikan",""],["field","rute_pemberian_obat","headerText","Resep","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","valueAccessor"],["field","qty_resep","headerText","Qty","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing","width","valueAccessor"],["field","harga_jual_apotek","headerText","Harga","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width"],["field","harga_jual_apotek","headerText","Total","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width","valueAccessor"],[1,"row","pe-2"],[1,"col-sm-5"],[1,"col-sm-7"],["formControlName","total_bayar_resep",3,"label","isFooter","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout",0),l.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),l.TgZ(1,"form",1),l.TgZ(2,"div",2),l.TgZ(3,"div",3),l.TgZ(4,"div",4),l.TgZ(5,"div",5),l._UZ(6,"img",6),l.qZA(),l.qZA(),l._UZ(7,"mol-input-text",7),l._UZ(8,"mol-input-text",8),l._UZ(9,"mol-input-text",9),l._UZ(10,"mol-input-text",10),l.qZA(),l.TgZ(11,"div",11),l.TgZ(12,"div",12),l.TgZ(13,"div",13),l.TgZ(14,"ejs-grid",14,15),l.NdJ("rowDataBound",function(t){return e.rowDataBound(t)})("dataBound",function(){return e.onDataBound()})("rowSelected",function(t){return e.handleSelected(t)})("rowDeselected",function(t){return e.handleSelected(t)}),l.TgZ(16,"e-columns"),l._UZ(17,"e-column",16),l._UZ(18,"e-column",17),l._UZ(19,"e-column",18),l._UZ(20,"e-column",19),l.qZA(),l.qZA(),l.TgZ(21,"div",20),l._UZ(22,"div",21),l.TgZ(23,"div",22),l._UZ(24,"mol-input-numeric",23),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.Q6J("ButtonNav",e.ButtonNav),l.xp6(1),l.Q6J("formGroup",e.formInput),l.xp6(5),l.Q6J("src",e.imageSrc?e.imageSrc:"../../../../../../assets/image/pendaftaran-ulang-pasien/blank.png",l.LSH),l.xp6(1),l.Q6J("label","Poli")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Dokter")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Umur")("inputFieldState",e.inputFieldState),l.xp6(4),l.Q6J("dataSource",e.dataSource)("childGrid",e.childGrid)("allowTextWrap",!0)("textWrapSettings",l.DdM(33,Gi)),l.xp6(3),l.Q6J("visible",!0)("allowEditing",!1)("valueAccessor",e.keterangan),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",120)("valueAccessor",e.quantity),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",120),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130)("valueAccessor",e.totalharga),l.xp6(4),l.Q6J("label","Total Bayar Resep")("isFooter",!0)("inputFieldState","detail")("inputFieldState",e.inputFieldState))},directives:[u.G,n._Y,n.JL,n.sg,K._,n.JJ,n.u,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,Tt.G],styles:[""]}),t})();const Fi=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"id_poli","headerText":"Id","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_poli","headerText":"Kode Ruangan","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_poli","headerText":"Nama Ruangan","type":"string","visible":true}],"filter":[{"field":"kode_poli","filter":"like","title":"Kode Ruangan"},{"field":"nama_ruangan","filter":"like","title":"Nama Ruangan"}]}');var Pi=a.t(Fi,2);const Bi=JSON.parse('{"GridColumns":[{"field":"id_register","headerText":"Id","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nama_pasien","headerText":"Nama Pasien","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"bed_no","headerText":"Bed","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Nama Dokter","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}]}');var Ji=a.t(Bi,2);const Mi=JSON.parse('{"GridColumns":[{"field":"id_register","headerText":"Id","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nomor_resep","headerText":"Nomor Resep","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_dokter","headerText":"Dokter","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"status_resep","headerText":"Status Resep","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}],"columnsChild":[{"field":"nama_obat","headerText":"Nama Obat"},{"field":"qty_racikan","headerText":"Qty","width":100}]}');var Ui=a.t(Mi,2),Qi=a(1009);let Li=(()=>{class t{constructor(t,e){this.httpOperationService=t,this.notificationService=e,this.API=g.PHARMACY.TRANSAKSI_OBAT.TRANSAKSI_OBAT_IRNA,this.dataResep=new O.X([])}Insert(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT+"/"+t,[]).pipe((0,m.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}setResep(t){this.dataResep.next(t)}}return t.\u0275fac=function(e){return new(e||t)(l.LFG(f.d),l.LFG(b.g))},t.\u0275prov=l.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Hi=["LookupKodeRuangan"],ji=["GridDetailResep"],Yi=["GridPasien"];function Ki(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"mol-grid",4,16),l.NdJ("row-selected",function(e){return l.CHM(t),l.oxw().handleSelectedRowResep(e)}),l.ALo(3,"async"),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(1),l.Q6J("grid-height","calc(100vh - 20rem)")("grid-DataSource",l.lcZ(3,5,t.transaksiObatIrnaService.dataResep))("grid-paging",!1)("grid-lines","Both")("columns",t.GridConfigResep.GridColumns)}}const Vi=function(){return{wrapMode:"Both"}};function Wi(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"span"),l.TgZ(1,"button",17),l.NdJ("click",function(){return l.CHM(t),l.oxw().handelClickLihatresep()}),l._UZ(2,"i",18),l._uU(3," Lihat Resep"),l.qZA(),l.TgZ(4,"button",19),l.NdJ("click",function(){return l.CHM(t),l.oxw().handleClickSimpan()}),l._UZ(5,"i",20),l._uU(6," Simpan Transaksi Obat"),l.qZA(),l.TgZ(7,"ejs-grid",21,22),l.NdJ("rowDataBound",function(e){return l.CHM(t),l.oxw().rowDataBound(e)})("dataBound",function(){return l.CHM(t),l.oxw().onDataBound()}),l.TgZ(9,"e-columns"),l._UZ(10,"e-column",23),l._UZ(11,"e-column",24),l._UZ(12,"e-column",25),l._UZ(13,"e-column",26),l.qZA(),l.qZA(),l.TgZ(14,"div",27),l._UZ(15,"div",28),l.TgZ(16,"div",29),l._UZ(17,"mol-input-numeric",30),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.oxw();l.xp6(7),l.Q6J("dataSource",t.DataSourceDetailResep)("childGrid",t.childGrid)("allowTextWrap",!0)("textWrapSettings",l.DdM(22,Vi)),l.xp6(3),l.Q6J("visible",!0)("allowEditing",!1)("valueAccessor",t.keterangan),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130)("valueAccessor",t.quantity),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130),l.xp6(1),l.Q6J("visible",!0)("allowEditing",!0)("width",130)("valueAccessor",t.hargajual),l.xp6(4),l.Q6J("label","Total Bayar Resep")("isFooter",!0)("inputFieldState","detail")("inputFieldState",t.inputFieldState)}}const zi=[{path:"",component:null,data:{title:"Pharmacy"}},{path:"antrian-farmasi",component:q,data:{title:"Antrian Pharmacy"}},{path:"setup-formularium",component:Za,data:{title:"Setup Formularium"}},{path:"resep-racikan",component:de,data:{title:"Resep Racikan"}},{path:"setup-data",component:null,data:{title:"Setup Data"},children:[{path:"setup-tipe-outlet",component:Ve,data:{title:"Setup Tipe Outlet"}},{path:"setup-outlet",component:Fe,data:{title:"Setup Outlet"}},{path:"setup-grup-obat",component:Ae,data:{title:"Setup Grup Obat"}},{path:"setup-cara-pakai-obat",component:_e,data:{title:"Setup Cara Pakai Obat"}},{path:"setup-rute-pemberian-obat",component:Le,data:{title:"Setup rute Pemberian Obat"}},{path:"setup-label-pemakaian-obat",component:Ie,data:{title:"Setup Label Pemakaian Obat"}}]},{path:"transaksi-obat",component:null,data:{title:"Transaksi Obat"},children:[{path:"view-obat-irja/:id/:key",component:Oi,data:{title:"View Resep Rawat Jalan"}},{path:"transaksi-obat-irja/:id/:key",component:Ii,data:{title:"Transaksi Obat Rawat Jalan"}},{path:"transaksi-obat-irna",component:(()=>{class t{constructor(t,e,a,i){this.formBuilder=t,this.resepDokterIrnaService=e,this.transaksiObatIrnaService=a,this.admisiPasienRawatInapService=i,this.urlRuangan=Fa.API_BILLING.SETUP_DATA.SETUP_POLI.GET_ALL_POLI_FOR_LOOKUP_RAWAT_INAP,this.LookupGridRuangan=Pi,this.GridConfig=Ji,this.GridConfigResep=Ui,this.DataSourcePasien=[],this.DataSourceResep=[],this.DataSourceDetailResep=[],this.DataSourceDetailResepRacikan=[],this.inputFieldState="detail",this.handleClickResep=!1,this.currentResepId=null,this.currentRegisterId=1,this.keterangan=(t,e)=>e.nama_obat+", "+e.ket_label+", "+e.ket_aturan,this.quantity=(t,e)=>e.qty_harian+" "+e.nama_satuan,this.hargajual=(t,e)=>e.harga_jual_apotek*e.qty_harian}ngOnInit(){this.formInput=this.formBuilder.group({nama_pasien:["",[]],umur:["",[]],bed:["",[]],dokter:["",[]],nomor_rm:["",[]],nomor_registrasi:["",[]],total_bayar_resep:[0,[]]}),this.childGrid={dataSource:this.DataSourceDetailResepRacikan,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:this.GridConfigResep.columnsChild},this.set(1)}heandleSelectedRuangan(t){console.log(t),this.admisiPasienRawatInapService.onGetPasienByPoli(t.id_poli).subscribe(t=>{this.DataSourcePasien=t.data,this.GridPasien.Grid.refresh()}),this.handleClickResep=!1}set(t){this.resepDokterIrnaService.onGetByIdRegisterToTrans(t).subscribe(t=>{this.transaksiObatIrnaService.setResep(t.data),console.log(t.data)})}handleSelectedRow(t){console.log(t),this.currentRegisterId=t.data.id_register,this.formInput.setValue({nama_pasien:t.data.nama_pasien,umur:"",bed:t.data.bed_no,dokter:t.data.nama_dokter,nomor_rm:t.data.no_rekam_medis,nomor_registrasi:t.data.no_register,total_bayar_resep:0}),this.resepDokterIrnaService.onGetByIdRegisterToTrans(this.currentRegisterId).subscribe(t=>{this.transaksiObatIrnaService.setResep(t.data)})}handleSelectedRowResep(t){this.handleClickResep=!0,this.onLoadDetailData(t.data.resep_id),this.currentResepId=t.data.resep_id}rowDataBound(t){t.data.is_racikan||(t.row.querySelector("td").innerHTML=" ",t.row.querySelector("td").className="e-customizedExpandcell")}onDataBound(){this.GridDetailResep.detailRowModule.expandAll()}onLoadDetailData(t){this.resepDokterIrnaService.onGetById(t).subscribe(t=>{this.DataSourceDetailResep=t.data.details,this.GridDetailResep.refresh(),this.mapingRacikan(t.data.details);let e=0;this.DataSourceDetailResep.map(t=>{e+=t.is_racikan?t.harga_jual_apotek:t.qty_resep*t.harga_jual_apotek,this.total_bayar_resep.setValue(e)})})}mapingRacikan(t){this.DataSourceDetailResepRacikan=[],t.map(t=>{this.DataSourceDetailResepRacikan.push(...t.racikans)}),this.childGrid={dataSource:this.DataSourceDetailResepRacikan,queryString:"resep_detail_id",rowHeight:30,allowResizing:!0,allowTextWrap:!0,textWrapSettings:{wrapMode:"Both"},columns:this.GridConfigResep.columnsChild}}handelClickLihatresep(){this.handleClickResep=!1}handleClickSimpan(){this.transaksiObatIrnaService.Insert(this.currentResepId).subscribe(t=>{this.handleClickResep=!1,this.resepDokterIrnaService.onGetByIdRegisterToTrans(this.currentRegisterId).subscribe(t=>{this.transaksiObatIrnaService.setResep(t.data)})})}get total_bayar_resep(){return this.formInput.get("total_bayar_resep")}}return t.\u0275fac=function(e){return new(e||t)(l.Y36(n.qu),l.Y36(Qi.Z),l.Y36(Li),l.Y36(hi.l))},t.\u0275cmp=l.Xpm({type:t,selectors:[["app-transaksi-obat-irna"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Hi,5),l.Gf(ji,5),l.Gf(Yi,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.LookupKodeRuangan=t.first),l.iGM(t=l.CRH())&&(e.GridDetailResep=t.first),l.iGM(t=l.CRH())&&(e.GridPasien=t.first)}},decls:20,vars:27,consts:[[1,"row"],[1,"col-sm-4"],[3,"lookup-url","idKode","modal-title","idTitle","columns","filter-lookup","label","onGetSelectedData"],["LookupKodeRuangan",""],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected"],["GridPasien",""],[1,"col-sm-8"],[3,"formGroup"],[1,"col-sm-6"],["formControlName","nama_pasien",3,"label","inputFieldState"],["formControlName","umur",3,"label","inputFieldState"],["formControlName","bed",3,"label","inputFieldState"],["formControlName","dokter",3,"label","inputFieldState"],["formControlName","nomor_rm",3,"label","inputFieldState"],["formControlName","nomor_registrasi",3,"label","inputFieldState"],[4,"ngIf"],["GridResep",""],["type","button",1,"app-btn-master","me-5","btn","btn-sm","btn-primary-outline",3,"click"],[1,"fas","fa-arrow-left"],["type","button",1,"app-btn-master","btn","btn-sm","btn-primary",3,"click"],[1,"fas","fa-save"],["height","calc(100vh - 23rem)","gridLines","Both","rowHeight","30",3,"dataSource","childGrid","allowTextWrap","textWrapSettings","rowDataBound","dataBound"],["GridDetailResep",""],["field","rute_pemberian_obat","headerText","Resep","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","valueAccessor"],["field","qty_harian","headerText","Qty","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing","width","valueAccessor"],["field","harga_jual_apotek","headerText","Harga","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width"],["field","harga_jual_apotek","headerText","Total Harga","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width","valueAccessor"],[1,"row","pe-2"],[1,"col-sm-5"],[1,"col-sm-7"],["formControlName","total_bayar_resep",3,"label","isFooter","inputFieldState"]],template:function(t,e){1&t&&(l.TgZ(0,"org-card-layout"),l.TgZ(1,"div",0),l.TgZ(2,"div",1),l.TgZ(3,"org-input-look-up-kode",2,3),l.NdJ("onGetSelectedData",function(t){return e.heandleSelectedRuangan(t)}),l.qZA(),l.TgZ(5,"mol-grid",4,5),l.NdJ("row-selected",function(t){return e.handleSelectedRow(t)}),l.qZA(),l.qZA(),l.TgZ(7,"div",6),l.TgZ(8,"form",7),l.TgZ(9,"div",0),l.TgZ(10,"div",8),l._UZ(11,"mol-input-text",9),l._UZ(12,"mol-input-text",10),l._UZ(13,"mol-input-text",11),l.qZA(),l.TgZ(14,"div",8),l._UZ(15,"mol-input-text",12),l._UZ(16,"mol-input-text",13),l._UZ(17,"mol-input-text",14),l.qZA(),l.qZA(),l.YNc(18,Ki,4,7,"span",15),l.YNc(19,Wi,18,23,"span",15),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&t&&(l.xp6(3),l.Q6J("lookup-url",e.urlRuangan)("idKode","kode_poli")("modal-title","Data Ruangan")("idTitle","nama_poli")("columns",e.LookupGridRuangan.columns)("filter-lookup",e.LookupGridRuangan.filter)("label","Ruangan"),l.xp6(2),l.Q6J("grid-height","calc(100vh - 16rem)")("grid-DataSource",e.DataSourcePasien)("grid-paging",!1)("grid-lines","Both")("columns",e.GridConfig.GridColumns),l.xp6(3),l.Q6J("formGroup",e.formInput),l.xp6(3),l.Q6J("label","Pasien")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Umur")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","Bed")("inputFieldState",e.inputFieldState),l.xp6(2),l.Q6J("label","Dokter")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","No Rm")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("label","No Reg")("inputFieldState",e.inputFieldState),l.xp6(1),l.Q6J("ngIf",!e.handleClickResep),l.xp6(1),l.Q6J("ngIf",e.handleClickResep))},directives:[u.G,Ha.E,ct.q,n._Y,n.JL,n.sg,K._,n.JJ,n.u,i.O5,V.MwP,V.SRY,V.NQQ,V.iKq,V.fMR,Tt.G],pipes:[i.Ov],styles:[""]}),t})(),data:{title:"Transaksi Obat Rawat Inap"}},{path:"transaksi-obat-irda",component:Si,data:{title:"Transaksi Obat Rawat Darurat"}},{path:"input-resep-irja",component:ni,data:{title:"Input Resep Irja"}}]},{path:"refund-obat",component:null,data:{title:"Refund Obat"},children:[{path:"refund-obat-irja",component:Mt,data:{title:"Input Retur Penjualan Obat Rawat Jalan"}},{path:"refund-obat-irja-daftar",component:ht,data:{title:"Daftar Retur Penjualan Obat Rawat Jalan"}},{path:"refund-obat-irja-detail/:id/:key",component:xt,data:{title:"Detail Retur Penjualan Obat Rawat Jalan"}},{path:"refund-obat-irna",component:re,data:{title:"Input Retur Penjualan Obat Rawat Inap"}},{path:"refund-obat-irda",component:ot,data:{title:"Input Retur Penjualan Obat Rawat Darurat"}}]}];let Xi=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[o.Bz.forChild(zi)],o.Bz]}),t})(),$i=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({imports:[[i.ez,n.u5,n.UX,r.m,Xi]]}),t})()}}]);