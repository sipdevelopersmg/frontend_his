(self.webpackChunkdashboard_template=self.webpackChunkdashboard_template||[]).push([[228],{7232:(t,e,a)=>{"use strict";a.d(e,{j:()=>l});var i=a(5366);let l=(()=>{class t{constructor(){}onRemoveInfo(t,e){return e.forEach(e=>{delete t[e]}),t}onSplitKodeWilayahKecamatan(t){const e=t.split(".");return{kode_wilayah_provinsi:e[0],kode_wilayah_kota:`${e[0]}.${e[1]}`}}getDiskon(t,e){let a,i;return 0!=e?(a=t*(e/100),i=a):i=0,i}getAge(t){let e=new Date;var a,i=e.getFullYear(),l=e.getMonth()+1,n=e.getDate(),o=t.split("-"),r=new Date(parseInt(o[0]),parseInt(o[1]),parseInt(o[2])),s=r.getFullYear(),d=r.getMonth(),u=r.getDate();if(a=i-s,l>=d)var c=l-d;else a--,c=12+l-d;if(n>=u)var p=n-u;else p=31+n-u,--c<0&&(c=11,a--);return{years:a,months:c,days:p}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},8228:(t,e,a)=>{"use strict";a.r(e),a.d(e,{MaterialManagementModule:()=>bo});var i=a(1116),l=a(1041),n=a(4839),o=a(5424);const r=JSON.parse('{"GridColumns":[{"field":"pemakaian_internal_id","headerText":"Id","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nomor_pemakaian_internal","headerText":"Nomor Pemakaian","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_pemakaian_internal","headerText":"Tanggal Pemakaian","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom","headerText":"Id Stockroom Pemberi","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nama_stockroom","headerText":"Nama Stockroom","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"keterangan_pemakaian_internal","headerText":"Keterangan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"pic_pemberi","headerText":"PIC Pemberi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"pic_penerima","headerText":"PIC Penerima","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"time_serah_terima","headerText":"Waktu Serah Terima","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"Status Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item","headerText":"Jumlah Item","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"total_transaksi","headerText":"Nominal","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"}]}');var s=a.t(r,2),d=a(5366),u=a(8757),c=a(2901),p=a(5343),m=a(2064),h=a(9456);const g=["GridData"];let f=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.pemakaianInternalService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=s}ngAfterViewInit(){}ngOnInit(){this.pemakaianInternalService.onInitList()}handlePencarianFilter(t){this.pemakaianInternalService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/issue/input-issue");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.pemakaian_internal_id));this.router.navigate(["dashboard/MM/issue/view-issue",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(c.q))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-issue"]],viewQuery:function(t,e){if(1&t&&d.Gf(g,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,7,e.pemakaianInternalService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();var _=a(654),b=a(1305),T=a(8830);const S=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"qty_on_hand","headerText":"Sisa Stok","textAlign":"Left","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var v=a.t(S,2),k=a(5470),x=a(2282),A=a(5228),y=a(1998),I=a(151),w=a(3391),D=a(4594),Z=a(3163),C=a(1876),E=a(3864),N=a(3363);const F=["templateToolbar"],G=["gridDetail"],q=["LookupItem"],P=["modalQty"],B=["modalHarga"],R=["modalSubtotal"],J=["modalSatuan"];function U(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",33),d.TgZ(1,"h5",34),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",35),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",36),d.qZA(),d.qZA(),d.TgZ(5,"div",37),d.TgZ(6,"div",38),d.TgZ(7,"div",39),d.TgZ(8,"input",40,41),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",42),d.TgZ(11,"button",43),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function O(t,e){if(1&t&&(d.TgZ(0,"option",47),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function M(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",33),d.TgZ(1,"h5",34),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",35),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",36),d.qZA(),d.qZA(),d.TgZ(5,"div",37),d.TgZ(6,"div",38),d.TgZ(7,"div",39),d.TgZ(8,"select",44,45),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,O,2,2,"option",46),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",42),d.TgZ(12,"button",43),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}let L=(()=>{class t{constructor(t,e,a,i,l,n,o,r){this.modalService=t,this.formBuilder=e,this.pemakaianInternalService=a,this.changeDetection=i,this.renderer=l,this.location=n,this.setupStockroomService=o,this.utilityService=r,this.MaritalStockroomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.inputFieldState="input",this.GridLookUpItem=v,this.Detail=[],this.url=T.MM.PEMAKAIAN_INTERNAL.TRANSPEMAKAIANINTERNAL.GET_ITEM_BY_STOCKROOM,this.urlItem=this.url,this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.subscriptions=[],this.datasatuan=[],this.TglExpiredParams={params:{min:new Date}}}ngOnInit(){this.formKontrak=this.formBuilder.group({nomor_pemakaian_internal:[""],tanggal_pemakaian_internal:[null,l.kI.required],id_stockroom:[0,l.kI.required],keterangan_pemakaian_internal:["",l.kI.required],time_serah_terima:[null],pic_pemberi:[""],pic_penerima:[""],jumlah_item:[0,l.kI.required],total_transaksi:[0]}),this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.satuanObj=new _.NB({value:this.detailSelected.kode_satuan_besar_pemakaian_internal,dataSource:this.datasatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem)}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"Add[F1]",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"| [*]=Ubah Banyak | [+]=Satuan |"}],this.setupStockroomService.setDataSource()}ngAfterViewInit(){}onLoadDetailData(t){this.pemakaianInternalService.onGetById(t).subscribe(t=>{this.formKontrak.setValue({id_supplier:t.data.id_supplier,nomor_kontrak_spjb:t.data.nomor_kontrak_spjb,nomor_kontrak:t.data.nomor_kontrak,tanggal_ttd_kontrak:t.data.tanggal_ttd_kontrak,tanggal_berlaku_kontrak:t.data.tanggal_berlaku_kontrak,tanggal_berakhir_kontrak:t.data.tanggal_berakhir_kontrak,judul_kontrak:t.data.judul_kontrak,tahun_anggaran:t.data.tahun_anggaran,keterangan:t.data.keterangan,total_transaksi_kontrak:t.data.total_transaksi_kontrak,jumlah_item_kontrak:t.data.jumlah_item_kontrak,user_inputed:1})})}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom();break;case"Back":this.location.back()}}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}heandleSelectedItem(t){this.pemakaianInternalService.addDataDetail({no_urut:0,id_item:t.id_item,kode_item:t.kode_item,nama_item:t.nama_item,qty_satuan_besar_pemakaian_internal:1,kode_satuan_besar_pemakaian_internal:t.satuans[0].kode_satuan,isi_pemakaian_internal:t.satuans[0].isi,qty_pemakaian_internal:t.satuans[0].isi,satuans:t.satuans}),this.selectLastRowdetail()}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.pemakaianInternalService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}handleChangeStockroom(t){this.urlItem=this.url+"/"+t.itemData.id_stockroom}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuans,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleQtyChange(t){let e=parseInt(t);this.pemakaianInternalService.editBanyak(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSatuanChange(t){this.pemakaianInternalService.editSatuan(this.currentIndex,t),this.modalRef.hide(),this.gridDetail.refresh()}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.pemakaianInternalService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenHarga(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("HargaValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalHarga,Object.assign({},{class:"modal-lg"}))}onOpenSubtotal(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SubtotalValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{console.log(t,"subTotal hidden"),this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSubtotal,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){this.formKontrak.valid?this.pemakaianInternalService.Insert(this.formKontrak.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):alert("isi semua data")}ResetFrom(){this.pemakaianInternalService.Reset(),this.formKontrak.reset()}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(k.tT),d.Y36(l.qu),d.Y36(c.q),d.Y36(d.sBO),d.Y36(d.Qsj),d.Y36(i.Ye),d.Y36(x.u),d.Y36(A.t))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-input-issue"]],viewQuery:function(t,e){if(1&t&&(d.Gf(F,5),d.Gf(G,5),d.Gf(q,5),d.Gf(P,5),d.Gf(B,5),d.Gf(R,5),d.Gf(J,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.templateToolbar=t.first),d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalHarga=t.first),d.iGM(t=d.CRH())&&(e.modalSubtotal=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first)}},decls:40,vars:50,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_pemakaian_internal",3,"label","inputFieldState"],["formControlName","tanggal_pemakaian_internal",3,"label","format"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_stockroom",3,"dataSource","fields","allowFiltering","change"],["MaritalStockroomDropdown",""],["formControlName","keterangan_pemakaian_internal",3,"label"],[3,"id","editSettings","dataSource","gridLines","toolbar","allowResizing","actionComplete","toolbarClick","load","rowSelected"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_satuan_besar_pemakaian_internal","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","kode_satuan_besar_pemakaian_internal","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit"],["field","isi_pemakaian_internal","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_pemakaian_internal","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","nominal_pemakaian_internal","headerText","Nominal","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","keterangan_pemakaian_internal","headerText","Keterangan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-3"],[1,"col-sm-4"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],[3,"lookup-url","columns","filter-lookup","modal-title","onGetSelectedData"],["LookupItem",""],["modalQty",""],["modalSatuan",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d.qZA(),d.TgZ(6,"div",3),d.TgZ(7,"div",2),d.TgZ(8,"div",6),d._UZ(9,"atm-label",7),d.qZA(),d.TgZ(10,"div",8),d.TgZ(11,"ejs-dropdownlist",9,10),d.NdJ("change",function(t){return e.handleChangeStockroom(t)}),d.ALo(13,"async"),d.qZA(),d.qZA(),d.qZA(),d._UZ(14,"mol-input-textarea",11),d.qZA(),d.qZA(),d.TgZ(15,"ejs-grid",12,13),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)}),d.ALo(17,"async"),d.TgZ(18,"e-columns"),d._UZ(19,"e-column",14),d._UZ(20,"e-column",15),d._UZ(21,"e-column",16),d._UZ(22,"e-column",17),d._UZ(23,"e-column",18),d._UZ(24,"e-column",19),d._UZ(25,"e-column",20),d._UZ(26,"e-column",21),d._UZ(27,"e-column",22),d._UZ(28,"e-column",23),d.qZA(),d.qZA(),d.TgZ(29,"div",24),d._UZ(30,"div",25),d._UZ(31,"div",26),d.TgZ(32,"div",27),d._UZ(33,"mol-input-numeric",28),d.qZA(),d.qZA(),d.qZA(),d.TgZ(34,"org-look-up",29,30),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedItem(t)}),d.qZA(),d.YNc(36,U,13,0,"ng-template",null,31,d.W1O),d.YNc(38,M,14,2,"ng-template",null,32,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formKontrak),d.xp6(3),d.Q6J("label","Nomor Pemakian")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Pemakaian")("format","dd MMMM yyyy"),d.xp6(4),d.Q6J("LabelCaption","Stockroom"),d.xp6(2),d.Q6J("dataSource",d.lcZ(13,46,e.setupStockroomService.dataSource))("fields",e.MaritalStockroomDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(17,48,e.pemakaianInternalService.dataDetail$))("gridLines","Both")("toolbar",e.GridDetailToolbar)("allowResizing",!0),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.satuanParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.pemakaianInternalService.jumlah_item)("inputFieldState","detail"),d.xp6(1),d.Q6J("lookup-url",e.urlItem)("columns",e.GridLookUpItem.columns)("filter-lookup",e.GridLookUpItem.filter)("modal-title","Data Item"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,w.D,D.rI,Z.h,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,N.N,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const Q=JSON.parse('{"TrDetail":[{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"qty_satuan_besar_pemakaian_internal","headerText":"Banyak","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"editParams":"satuanParams","field":"nama_satuan_besar_pemakaian_internal","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi_pemakaian_internal","headerText":"Isi","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_pemakaian_internal","headerText":"Qty","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nominal_pemakaian_internal","headerText":"Nominal","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"keterangan_pemakaian_internal","headerText":"Keterangan","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true}]}');var K=a.t(Q,2);let H=(()=>{class t{constructor(t,e,a,i,l){this.formBuilder=t,this.pemakaianInternalService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"}],this.ConfigGrid=K}ngOnInit(){this.formInput=this.formBuilder.group({nomor_pemakaian_internal:[""],tanggal_pemakaian_internal:[null],time_serah_terima:[null],nama_stockroom:[0],keterangan_pemakaian_internal:[0],pic_pemberi:[0],pic_penerima:[0],jumlah_item:[0],total_transaksi:[0]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onLoadDetailData(t){this.pemakaianInternalService.onGetById(t).subscribe(e=>{this.formInput.setValue({nomor_pemakaian_internal:e.data.nomor_pemakaian_internal,tanggal_pemakaian_internal:e.data.tanggal_pemakaian_internal,time_serah_terima:e.data.time_serah_terima,nama_stockroom:e.data.nama_stockroom,keterangan_pemakaian_internal:e.data.keterangan_pemakaian_internal,pic_pemberi:e.data.pic_pemberi,pic_penerima:e.data.pic_penerima,jumlah_item:e.data.jumlah_item,total_transaksi:e.data.total_transaksi}),this.pemakaianInternalService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back()}}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(c.q),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-issue"]],decls:20,vars:27,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_pemakaian_internal",3,"label","inputFieldState"],["formControlName","tanggal_pemakaian_internal",3,"label","format"],["formControlName","nama_stockroom",3,"label","inputFieldState"],["formControlName","time_serah_terima",3,"label","format"],["formControlName","pic_pemberi",3,"label","inputFieldState"],["formControlName","pic_penerima",3,"label","inputFieldState"],["formControlName","keterangan_pemakaian_internal",3,"label"],[3,"grid-DataSource","columns"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],[1,"col-sm-3"],["formControlName","total_transaksi",3,"label","isFooter","value","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d._UZ(6,"mol-input-text",6),d._UZ(7,"mol-datepicker-syncfusion",7),d.qZA(),d.TgZ(8,"div",3),d._UZ(9,"mol-input-text",8),d._UZ(10,"mol-input-text",9),d._UZ(11,"mol-input-textarea",10),d.qZA(),d.qZA(),d._UZ(12,"mol-grid",11),d.ALo(13,"async"),d.TgZ(14,"div",12),d._UZ(15,"div",13),d.TgZ(16,"div",14),d._UZ(17,"mol-input-numeric",15),d.qZA(),d.TgZ(18,"div",16),d._UZ(19,"mol-input-numeric",17),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Nomor Pemakaian")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Pemakaian")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Stokroom")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Serah Terima")("format","dd MMMM yyyy HH:mm:ss"),d.xp6(2),d.Q6J("label","PIC Pemberi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","PIC Penerima")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Keretangan"),d.xp6(1),d.Q6J("grid-DataSource",d.lcZ(13,25,e.pemakaianInternalService.dataDetail$))("columns",e.ConfigGrid.TrDetail),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.pemakaianInternalService.jumlah_item)("inputFieldState","detail"),d.xp6(2),d.Q6J("label","Nominal")("isFooter",!0)("value",e.pemakaianInternalService.total_transaksi)("inputFieldState","detail"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,Z.h,h.q,E.G],pipes:[i.Ov],styles:[""]}),t})();const j=JSON.parse('{"GridColumns":[{"field":"nomor_pemakaian_internal","headerText":"Nomor Pemakaian Internal","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_pemakaian_internal","headerText":"Tanggal Pemakaina Internal","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"nama_stockroom","headerText":"Nama Stockroom","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"Status Transaksi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item","headerText":"Jumlah Item","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"keterangan_pemakaian_internal","headerText":"Keterangan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"}]}');var V=a.t(j,2);const Y=["GridData"];let z=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.pemakaianInternalService=a,this.ButtonNav=[{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=V,this.id=0}ngAfterViewInit(){}ngOnInit(){this.pemakaianInternalService.onInitList()}handlePencarianFilter(t){this.pemakaianInternalService.onGetAllOpenByParams(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/issue-validation/view-issue-validation");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.pemakaian_internal_id));this.router.navigate(["dashboard/MM/issue-validation/view-issue-validation",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(c.q))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-issue-validation"]],viewQuery:function(t,e){if(1&t&&d.Gf(Y,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,7,e.pemakaianInternalService.dataOpenSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();const X=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var W=a.t(X,2),$=a(8512),tt=a(3166);const et=["gridDetail"],at=["LookupItem"],it=["modalQty"],lt=["modalSatuan"],nt=["modalCanceled"];function ot(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",28),d.TgZ(1,"h5",29),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",30),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",31),d.qZA(),d.qZA(),d.TgZ(5,"div",32),d.TgZ(6,"div",33),d.TgZ(7,"div",34),d.TgZ(8,"input",35,36),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",37),d.TgZ(11,"button",38),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function rt(t,e){if(1&t&&(d.TgZ(0,"option",42),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function st(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",28),d.TgZ(1,"h5",29),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",30),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",31),d.qZA(),d.qZA(),d.TgZ(5,"div",32),d.TgZ(6,"div",33),d.TgZ(7,"div",34),d.TgZ(8,"select",39,40),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,rt,2,2,"option",41),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",37),d.TgZ(12,"button",38),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}function dt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",28),d.TgZ(1,"h5",29),d._uU(2,"Canceled"),d.qZA(),d.TgZ(3,"button",30),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",31),d.qZA(),d.qZA(),d.TgZ(5,"div",32),d.TgZ(6,"div",33),d.TgZ(7,"div",22),d.TgZ(8,"label",43),d.TgZ(9,"strong"),d._uU(10,"Reason Cancel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",44),d._UZ(12,"input",45),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",37),d.TgZ(14,"button",46),d.NdJ("click",function(){return d.CHM(t),d.oxw().onCalceled()}),d._uU(15,"Cancel Data"),d.qZA(),d.TgZ(16,"button",47),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}let ut=(()=>{class t{constructor(t,e,a,i,l,n,o,r,s,d){this.formBuilder=t,this.pemakaianInternalService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.renderer=n,this.modalService=o,this.changeDetection=r,this.utilityService=s,this.setupItemService=d,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Validasi",Captions:"Validasi",Icons1:"fa-check"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"}],this.GridDataEditSettings={allowEditing:!0},this.GridLookUpItem=W,this.subscriptions=[],this.counterChildGrid=0,this.datasatuan=[],this.childGridSatuan=[],this.id_stockroom=0,this.dataSourceGrid=new $.X([]),this.dataScourceGridChild=[],this.totalJumlahItem=new $.X(0),this.itemBatch=[],this.id_item=new $.X(0),this.id=0}ngOnInit(){this.formInput=this.formBuilder.group({pemakaian_internal_id:[0],time_serah_terima:[null],pic_pemberi:[""],pic_penerima:[""],total_transaksi:[0]});let t=this.id_item,e=null;this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.childGridSatuan=this.pemakaianInternalService.getSatuanDetail(this.id_item.value),this.satuanObj=new _.NB({value:"",dataSource:this.childGridSatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem),e&&(this.satuanObj.value=e.satuan)}},this.itemsParams={create:()=>(this.itemsElem=document.createElement("input"),this.itemsElem),read:()=>this.itemsObj.text,destroy:()=>{this.itemsObj.destroy()},write:()=>{this.setupItemService.onGetEDItem(this.id_stockroom,t.value).subscribe(e=>{this.itemsObj=new _.NB({value:"",dataSource:e.data,fields:{value:"batch_number",text:"batch_number"},enabled:!0,placeholder:"Select a Batch",floatLabelType:"Never",change:(function(e){this.setFormGrif(e),t.next(e.itemData.id_item)}).bind(this)}),this.itemsObj.appendTo(this.itemsElem)}),e&&setTimeout(()=>{this.itemsObj.value=e.batch_number},500)}};let a=this.dataScourceGridChild,i=this.counterChildGrid,l=this.dataSourceGrid,n=this.totalJumlahItem;this.ChildGrid={dataSource:this.dataScourceGridChild,queryString:"id_item",rowHeight:30,allowResizing:!0,allowTextWrap:!1,textWrapSettings:{wrapMode:"Both"},toolbar:["Add","Edit","Delete","Update","Cancel"],editSettings:{allowEditing:!0,allowAdding:!0,allowDeleting:!0},columns:[{field:"no_urut",headerText:"urut",visible:!1},{field:"id_item",headerText:"id_item",width:100,visible:!1},{field:"batch_number",headerText:"Batch Number",editType:"dropdownedit",edit:this.itemsParams,width:200},{field:"expired_date",headerText:"Expired Date",textAlign:"Right",width:80,allowEditing:!1},{field:"qty_besar",headerText:"Banyak",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"satuan",headerText:"Satuan",visible:!1,editType:"dropdownedit",edit:this.satuanParams,width:200},{field:"isi",headerText:"Isi",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!1},{field:"qty_pemakaian_internal",headerText:"Qty",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!0},{field:"nama_satuan",headerText:"Satuan",headerTextAlign:"Center",textAlign:"Left",width:100,format:"N2",allowEditing:!1},{field:"hpp_satuan",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!0},{field:"sub_total",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1}],rowSelected(t){e=t.data},actionBegin(e){"add"===e.requestType&&(e.data.id_item=this.parentDetails.parentRowData.id_item,e.data.counterChildGrid=i++,t.next(this.parentDetails.parentRowData.id_item),console.log(t.value))},actionComplete(t){if("save"===t.requestType){if(console.log("complete",t),"add"===t.action&&a.push(t.data),"edit"===t.action){let e=a.map(t=>t.counterChildGrid).indexOf(t.data.counterChildGrid);a[e]=t.data}let e=[];l.value.forEach((t,i)=>{let l=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(l+=parseInt(e.qty_pemakaian_internal))}),t.qty=l,e.push(t)}),setTimeout(()=>{l.next(e),n.next(e.sum("qty_pemakaian_internal")),console.log(e)},500)}if("delete"===t.requestType){let e=a.map(t=>t.counterChildGrid).indexOf(t.data[0].counterChildGrid);a.splice(e,1);let i=[];l.value.forEach((t,e)=>{let l=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(l+=parseInt(e.qty_pemakaian_internal))}),t.qty=l,i.push(t)}),setTimeout(()=>{l.next(i),console.log(i)},500)}}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"| [*]=Ubah Banyak | [+]=Satuan |"}]}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onDataBound(){this.gridDetail.detailRowModule.expandAll()}setFormGrif(t){document.getElementsByName("expired_date")[0].value=t.itemData.expired_date,document.getElementsByName("nama_satuan")[0].value=t.itemData.nama_satuan,document.getElementsByName("hpp_satuan")[0].value=t.itemData.harga_satuan_netto}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuans,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.pemakaianInternalService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.pemakaianInternalService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}onLoadDetailData(t){this.pemakaianInternalService.onGetById(t).subscribe(e=>{this.id=parseInt(t),this.formInput.setValue({pemakaian_internal_id:parseInt(t),pic_pemberi:"",pic_penerima:"",time_serah_terima:new Date,total_transaksi:0}),this.id_stockroom=e.data.id_stockroom,this.pemakaianInternalService.getDetail(t).subscribe(t=>{t.data.map((t,e)=>t.qty=0),this.dataSourceGrid.next(t.data)})})}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){if(this.formInput.valid){let t=this.formInput.value;this.dataSourceGrid.subscribe(e=>{let a=e;a.map((t,e)=>t.detailBatch=[]),a.forEach((t,e)=>{let i=0;this.dataScourceGridChild.forEach((l,n)=>{t.id_item==l.id_item&&(l.qty_pemakaian_internal=parseFloat(l.qty_pemakaian_internal),l.hpp_satuan=parseFloat(l.hpp_satuan),l.sub_total=l.qty_pemakaian_internal*l.hpp_satuan,a[e].detailBatch.push(l),i+=l.sub_total)}),a[e].nominal_pemakaian_internal=i}),t.details=a,this.pemakaianInternalService.validasiPersetujuan(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{})})})}else alert("isi semua data")}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":this.onSave();break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.pemakaianInternalService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(c.q),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye),d.Y36(d.Qsj),d.Y36(k.tT),d.Y36(d.sBO),d.Y36(A.t),d.Y36(tt.z))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-issue-validation"]],viewQuery:function(t,e){if(1&t&&(d.Gf(et,5),d.Gf(at,5),d.Gf(it,5),d.Gf(lt,5),d.Gf(nt,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first),d.iGM(t=d.CRH())&&(e.modalCanceled=t.first)}},decls:33,vars:43,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","time_serah_terima",3,"label","format"],["formControlName","pic_pemberi",3,"label","inputFieldState"],["formControlName","pic_penerima",3,"label","inputFieldState"],[3,"id","editSettings","dataSource","gridLines","allowResizing","childGrid","actionComplete","toolbarClick","load","rowSelected","dataBound"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_satuan_besar_pemakaian_internal","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","kode_satuan_besar_pemakaian_internal","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","isi_pemakaian_internal","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_pemakaian_internal","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty","headerText","QTY Batch","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","keterangan_pemakaian_internal","headerText","Keterangan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nominal_pemakaian_internal","headerText","Nominal","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],[3,"label","isFooter","value","inputFieldState"],["modalQty",""],["modalSatuan",""],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-datepicker-syncfusion",4),d._UZ(5,"mol-input-text",5),d._UZ(6,"mol-input-text",6),d.qZA(),d.qZA(),d.TgZ(7,"ejs-grid",7,8),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)})("dataBound",function(){return e.onDataBound()}),d.ALo(9,"async"),d.TgZ(10,"e-columns"),d._UZ(11,"e-column",9),d._UZ(12,"e-column",10),d._UZ(13,"e-column",11),d._UZ(14,"e-column",12),d._UZ(15,"e-column",13),d._UZ(16,"e-column",14),d._UZ(17,"e-column",15),d._UZ(18,"e-column",16),d._UZ(19,"e-column",17),d._UZ(20,"e-column",18),d._UZ(21,"e-column",19),d.qZA(),d.qZA(),d.TgZ(22,"div",20),d._UZ(23,"div",21),d._UZ(24,"div",22),d.TgZ(25,"div",23),d._UZ(26,"mol-input-numeric",24),d.qZA(),d.qZA(),d.qZA(),d.YNc(27,ot,13,0,"ng-template",null,25,d.W1O),d.YNc(29,st,14,2,"ng-template",null,26,d.W1O),d.YNc(31,dt,18,0,"ng-template",null,27,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Tanggal Serah Terima")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","PIC Pemberi")("inputFieldState","input"),d.xp6(1),d.Q6J("label","PIC Penerima")("inputFieldState","input"),d.xp6(1),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(9,41,e.dataSourceGrid))("gridLines","Both")("allowResizing",!0)("childGrid",e.ChildGrid),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.totalJumlahItem.value)("inputFieldState","detail")("inputFieldState","detail"))},directives:[p.G,l._Y,l.JL,l.sg,I.i,l.JJ,l.u,y._,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const ct=JSON.parse('{"GridColumns":[{"field":"mutasi_id","headerText":"mutasi_id Id","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nomor_mutasi","headerText":"Nomor Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_mutasi","headerText":"Tanggal Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom_pemberi","headerText":"Id Stockroom Pemberi","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"nama_stockroom_pemberi","headerText":"Nama Stockroom Pemberi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom_penerima","headerText":"Id Stockroom Penerima","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"nama_stockroom_penerima","headerText":"Nama Stockroom Penerima","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"status_mutasi","headerText":"Status Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item","headerText":"Jumlah Item","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"}]}');var pt=a.t(ct,2),mt=a(7727),ht=a(3393),gt=a(7369);let ft=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.MUTASI.PENGAJUAN_MUTASI,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.sub_total_1=0,this.total_disc=0,this.sub_total_2=0,this.total_tax=0,this.total_transaksi=0,this.jumlah_item=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_HEADER_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetAllByParamsSource(t){this.onGetAllByParams(t).subscribe(t=>{t&&this.dataSource.next(t.data)})}setDetail(t){this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t).subscribe(t=>{this.dataDetail=t.data})}addDataDetail(t){this.dataDetail=[...this.dataDetail,t],this.sum()}updateFromInline(t,e,a){let i=e.satuan.findIndex(t=>t.kode_satuan==e.kode_satuan_besar_permintaan),l=e.satuan[i].isi;e.isi_permintaan=l,e.qty_permintaan=e.qty_satuan_besar_permintaan*l,this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_satuan_besar_permintaan=e,this.dataDetail[t].qty_permintaan=e*this.dataDetail[t].isi_permintaan}editSatuan(t,e){let a=this.dataDetail[t].satuan.findIndex(e=>e.kode_satuan==this.dataDetail[t].kode_satuan_besar_permintaan),i=this.dataDetail[t].satuan[a].isi;this.dataDetail[t].kode_satuan_besar_permintaan=e,this.dataDetail[t].isi_permintaan=i,this.dataDetail[t].qty_permintaan=this.dataDetail[t].qty_satuan_besar_permintaan*i}sum(){this.total_transaksi=0,this.jumlah_item=this.dataDetail.sum("qty_satuan_besar_permintaan")}Insert(t){return this.dataDetail.map((t,e)=>t.no_urut=e+1),t.details=this.dataDetail,t.jumlah_item=this.jumlah_item,t.total_transaksi=this.total_transaksi,this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[],this.total_transaksi=0,this.jumlah_item=0}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const _t=["GridData"];let bt=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.permintaanMutasiService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=pt}ngAfterViewInit(){}ngOnInit(){this.permintaanMutasiService.onInitList()}handlePencarianFilter(t){this.permintaanMutasiService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/permintaan-mutasi/input-permintaan-mutasi");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.mutasi_id));this.router.navigate(["dashboard/MM/permintaan-mutasi/view-permintaan-mutasi",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}handleRowDataBound(t){let e=t.data.status_mutasi;"APPROVED"==e&&t.row.classList.add("e-validation-background"),"CANCELED"==e&&t.row.classList.add("e-canceled-background")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(ft))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-permintaan-mutasi"]],viewQuery:function(t,e){if(1&t&&d.Gf(_t,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected","row-data-bound"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("row-data-bound",function(t){return e.handleRowDataBound(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,7,e.permintaanMutasiService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();const Tt=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var St=a.t(Tt,2);const vt=["templateToolbar"],kt=["gridDetail"],xt=["LookupItem"],At=["modalQty"],yt=["modalHarga"],It=["modalSubtotal"],wt=["modalSatuan"];function Dt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",32),d.TgZ(1,"h5",33),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",34),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",35),d.qZA(),d.qZA(),d.TgZ(5,"div",36),d.TgZ(6,"div",37),d.TgZ(7,"div",38),d.TgZ(8,"input",39,40),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",41),d.TgZ(11,"button",42),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Zt(t,e){if(1&t&&(d.TgZ(0,"option",46),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function Ct(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",32),d.TgZ(1,"h5",33),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",34),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",35),d.qZA(),d.qZA(),d.TgZ(5,"div",36),d.TgZ(6,"div",37),d.TgZ(7,"div",38),d.TgZ(8,"select",43,44),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,Zt,2,2,"option",45),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",41),d.TgZ(12,"button",42),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}let Et=(()=>{class t{constructor(t,e,a,i,l,n,o,r){this.modalService=t,this.formBuilder=e,this.permintaanMutasiService=a,this.changeDetection=i,this.renderer=l,this.location=n,this.setupStockroomService=o,this.utilityService=r,this.MaritalStockroomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.inputFieldState="input",this.GridLookUpItem=St,this.Detail=[],this.url=T.MM.MUTASI.PENGAJUAN_MUTASI.GET_ITEM_BY_PARAM,this.urlItem=T.MM.MUTASI.PENGAJUAN_MUTASI.GET_ITEM_BY_PARAM,this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.subscriptions=[],this.datasatuan=[],this.TglExpiredParams={params:{min:new Date}}}ngOnInit(){this.formKontrak=this.formBuilder.group({nomor_mutasi:["",l.kI.required],tanggal_mutasi:[null,l.kI.required],id_stockroom_pemberi:[0,l.kI.required],id_stockroom_penerima:[0,l.kI.required],total_transaksi:[0,l.kI.required],jumlah_item:[0,l.kI.required]}),this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.satuanObj=new _.NB({value:this.detailSelected.kode_satuan_besar_permintaan,dataSource:this.datasatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem)}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"Add[F1]",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"| [*]=Ubah Banyak | [+]=Satuan |"}],this.setupStockroomService.setDataSource()}ngAfterViewInit(){}onLoadDetailData(t){this.permintaanMutasiService.onGetById(t).subscribe(t=>{this.formKontrak.setValue({id_supplier:t.data.id_supplier,nomor_kontrak_spjb:t.data.nomor_kontrak_spjb,nomor_kontrak:t.data.nomor_kontrak,tanggal_ttd_kontrak:t.data.tanggal_ttd_kontrak,tanggal_berlaku_kontrak:t.data.tanggal_berlaku_kontrak,tanggal_berakhir_kontrak:t.data.tanggal_berakhir_kontrak,judul_kontrak:t.data.judul_kontrak,tahun_anggaran:t.data.tahun_anggaran,keterangan:t.data.keterangan,total_transaksi_kontrak:t.data.total_transaksi_kontrak,jumlah_item_kontrak:t.data.jumlah_item_kontrak,user_inputed:1})})}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom();break;case"Back":this.location.back()}}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}handleChangeStockroom(t){this.urlItem=this.url+"/"+t.itemData.id_stockroom}heandleSelectedItem(t){this.permintaanMutasiService.addDataDetail({no_urut:0,id_item:t.id_item,kode_item:t.kode_item,nama_item:t.nama_item,qty_satuan_besar_permintaan:1,kode_satuan_besar_permintaan:t.satuans[0].kode_satuan,isi_permintaan:t.satuans[0].isi,qty_permintaan:t.satuans[0].isi,satuan:t.satuans}),this.selectLastRowdetail()}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.permintaanMutasiService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuan,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleQtyChange(t){let e=parseInt(t);this.permintaanMutasiService.editBanyak(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSatuanChange(t){this.permintaanMutasiService.editSatuan(this.currentIndex,t),this.modalRef.hide(),this.gridDetail.refresh()}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.permintaanMutasiService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenHarga(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("HargaValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalHarga,Object.assign({},{class:"modal-lg"}))}onOpenSubtotal(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SubtotalValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{console.log(t,"subTotal hidden"),this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSubtotal,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){this.formKontrak.valid?this.permintaanMutasiService.Insert(this.formKontrak.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):alert("isi semua data")}ResetFrom(){this.permintaanMutasiService.Reset(),this.formKontrak.reset()}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(k.tT),d.Y36(l.qu),d.Y36(ft),d.Y36(d.sBO),d.Y36(d.Qsj),d.Y36(i.Ye),d.Y36(x.u),d.Y36(A.t))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-input-permintaan-mutasi"]],viewQuery:function(t,e){if(1&t&&(d.Gf(vt,5),d.Gf(kt,5),d.Gf(xt,5),d.Gf(At,5),d.Gf(yt,5),d.Gf(It,5),d.Gf(wt,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.templateToolbar=t.first),d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalHarga=t.first),d.iGM(t=d.CRH())&&(e.modalSubtotal=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first)}},decls:45,vars:54,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_mutasi",3,"label","inputFieldState"],["formControlName","tanggal_mutasi",3,"label","format"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_stockroom_pemberi",3,"dataSource","fields","allowFiltering","change"],["MaritalStockroomDropdown",""],["id","marital","formControlName","id_stockroom_penerima",3,"dataSource","fields","allowFiltering"],[3,"id","editSettings","dataSource","gridLines","toolbar","allowResizing","actionComplete","toolbarClick","load","rowSelected"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_satuan_besar_permintaan","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","kode_satuan_besar_permintaan","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit"],["field","isi_permintaan","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_permintaan","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","keterangan_permintaan","headerText","Keterangan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],[3,"lookup-url","columns","filter-lookup","modal-title","onGetSelectedData"],["LookupItem",""],["modalQty",""],["modalSatuan",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d.qZA(),d.TgZ(6,"div",3),d.TgZ(7,"div",2),d.TgZ(8,"div",6),d._UZ(9,"atm-label",7),d.qZA(),d.TgZ(10,"div",8),d.TgZ(11,"ejs-dropdownlist",9,10),d.NdJ("change",function(t){return e.handleChangeStockroom(t)}),d.ALo(13,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",2),d.TgZ(15,"div",6),d._UZ(16,"atm-label",7),d.qZA(),d.TgZ(17,"div",8),d._UZ(18,"ejs-dropdownlist",11,10),d.ALo(20,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"ejs-grid",12,13),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)}),d.ALo(23,"async"),d.TgZ(24,"e-columns"),d._UZ(25,"e-column",14),d._UZ(26,"e-column",15),d._UZ(27,"e-column",16),d._UZ(28,"e-column",17),d._UZ(29,"e-column",18),d._UZ(30,"e-column",19),d._UZ(31,"e-column",20),d._UZ(32,"e-column",21),d._UZ(33,"e-column",22),d.qZA(),d.qZA(),d.TgZ(34,"div",23),d._UZ(35,"div",24),d._UZ(36,"div",25),d.TgZ(37,"div",26),d._UZ(38,"mol-input-numeric",27),d.qZA(),d.qZA(),d.qZA(),d.TgZ(39,"org-look-up",28,29),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedItem(t)}),d.qZA(),d.YNc(41,Dt,13,0,"ng-template",null,30,d.W1O),d.YNc(43,Ct,14,2,"ng-template",null,31,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formKontrak),d.xp6(3),d.Q6J("label","Nomor Permintaan")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Mutasi")("format","dd MMMM yyyy"),d.xp6(4),d.Q6J("LabelCaption","Stockroom Pemberi"),d.xp6(2),d.Q6J("dataSource",d.lcZ(13,48,e.setupStockroomService.dataSource))("fields",e.MaritalStockroomDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Stockroom Penerima"),d.xp6(2),d.Q6J("dataSource",d.lcZ(20,50,e.setupStockroomService.dataSource))("fields",e.MaritalStockroomDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(23,52,e.permintaanMutasiService.dataDetail$))("gridLines","Both")("toolbar",e.GridDetailToolbar)("allowResizing",!0),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.satuanParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.permintaanMutasiService.jumlah_item)("inputFieldState","detail")("inputFieldState","detail"),d.xp6(1),d.Q6J("lookup-url",e.urlItem)("columns",e.GridLookUpItem.columns)("filter-lookup",e.GridLookUpItem.filter)("modal-title","Data Item"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,w.D,D.rI,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,N.N,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const Nt=JSON.parse('{"TrDetail":[{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"qty_satuan_besar_permintaan","headerText":"Banyak","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"editParams":"satuanParams","field":"kode_satuan_besar_permintaan","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi_permintaan","headerText":"Isi","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_permintaan","headerText":"Qty","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"keterangan_permintaan","headerText":"Keterangan","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true}]}');var Ft=a.t(Nt,2);let Gt=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.MUTASI.PENGAJUAN_MUTASI,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.sub_total_1=0,this.total_disc=0,this.sub_total_2=0,this.total_tax=0,this.total_transaksi=0,this.jumlah_item=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_HEADER_PERSTUJUAN_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetAllByParamsSource(t){this.onGetAllByParams(t).subscribe(t=>{t&&this.dataSource.next(t.data)})}setDetail(t){this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t).subscribe(t=>{this.dataDetail=t.data})}getDetail(t){return this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t)}addDataDetail(t){this.dataDetail=[...this.dataDetail,t],this.sum()}updateFromInline(t,e,a){let i=e.satuans.findIndex(t=>t.kode_satuan==e.kode_satuan_besar_mutasi),l=e.satuans[i].isi;e.isi_mutasi=l,e.qty_mutasi=e.qty_satuan_besar_mutasi*l,this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_satuan_besar_mutasi=e,this.dataDetail[t].qty_mutasi=e*this.dataDetail[t].isi_mutasi}editSatuan(t,e){let a=this.dataDetail[t].satuans.findIndex(e=>e.kode_satuan==this.dataDetail[t].kode_satuan_besar_mutasi),i=this.dataDetail[t].satuans[a].isi;this.dataDetail[t].kode_satuan_besar_mutasi=e,this.dataDetail[t].isi_mutasi=i,this.dataDetail[t].qty_mutasi=this.dataDetail[t].qty_satuan_besar_mutasi*i}sum(){this.total_transaksi=this.dataDetail.sum("nominal_mutasi"),this.jumlah_item=this.dataDetail.sum("qty_satuan_besar")}Insert(t){return this.dataDetail.map((t,e)=>t.no_urut=e+1),t.details=this.dataDetail,t.jumlah_item=this.jumlah_item,t.total_transaksi=this.total_transaksi,this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[],this.total_transaksi=0,this.jumlah_item=0}getSatuanDetail(t){let e=this.dataDetail.map(t=>t.id_item).indexOf(t);return this.dataDetail[e].satuans}validasiPersetujuan(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT_PERSETUJUAN,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Cancel(t,e){return this.httpOperationService.defaultPutRequest(this.API.CANCEL,{mutasi_id:t,reason_canceled:e}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const qt=["modalCanceled"];function Pt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",15),d.TgZ(1,"h5",16),d._uU(2,"Canceled"),d.qZA(),d.TgZ(3,"button",17),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",18),d.qZA(),d.qZA(),d.TgZ(5,"div",19),d.TgZ(6,"div",20),d.TgZ(7,"div",11),d.TgZ(8,"label",21),d.TgZ(9,"strong"),d._uU(10,"Reason Cancel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",22),d._UZ(12,"input",23),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",24),d.TgZ(14,"button",25),d.NdJ("click",function(){return d.CHM(t),d.oxw().onCalceled()}),d._uU(15,"Cancel Data"),d.qZA(),d.TgZ(16,"button",26),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}let Bt=(()=>{class t{constructor(t,e,a,i,l,n,o,r){this.formBuilder=t,this.permintaanMutasiService=e,this.encryptionService=a,this.activatedRoute=i,this.modalService=l,this.utilityService=n,this.persetujuanMutasiService=o,this.location=r,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"}],this.ConfigGrid=Ft,this.id=0}ngOnInit(){this.formInput=this.formBuilder.group({nomor_mutasi:[""],tanggal_mutasi:[null],nama_stockroom_pemberi:[0],nama_stockroom_penerima:[0],total_transaksi:[0],jumlah_item:[0]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onLoadDetailData(t){this.permintaanMutasiService.onGetById(t).subscribe(e=>{this.id=parseInt(t),this.formInput.setValue({nomor_mutasi:e.data.nomor_mutasi,tanggal_mutasi:e.data.tanggal_mutasi,nama_stockroom_pemberi:e.data.nama_stockroom_pemberi,nama_stockroom_penerima:e.data.nama_stockroom_penerima,total_transaksi:e.data.total_transaksi,jumlah_item:e.data.jumlah_item}),this.permintaanMutasiService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.persetujuanMutasiService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(ft),d.Y36(u.C),d.Y36(o.gz),d.Y36(k.tT),d.Y36(A.t),d.Y36(Gt),d.Y36(i.Ye))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-permintaan-mutasi"]],viewQuery:function(t,e){if(1&t&&d.Gf(qt,5),2&t){let t;d.iGM(t=d.CRH())&&(e.modalCanceled=t.first)}},decls:18,vars:19,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_mutasi",3,"label","inputFieldState"],["formControlName","tanggal_mutasi",3,"label","format"],["formControlName","nama_stockroom_pemberi",3,"label","inputFieldState"],["formControlName","nama_stockroom_penerima",3,"label","inputFieldState"],[3,"grid-DataSource","columns"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d.qZA(),d.TgZ(6,"div",3),d._UZ(7,"mol-input-text",6),d._UZ(8,"mol-input-text",7),d.qZA(),d.qZA(),d._UZ(9,"mol-grid",8),d.ALo(10,"async"),d.TgZ(11,"div",9),d._UZ(12,"div",10),d._UZ(13,"div",11),d.TgZ(14,"div",12),d._UZ(15,"mol-input-numeric",13),d.qZA(),d.qZA(),d.qZA(),d.YNc(16,Pt,18,0,"ng-template",null,14,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Nomor Mutasi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Mutasi")("format","dd MMMM yyyy"),d.xp6(2),d.Q6J("label","Stockroom Pemberi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Stockroom Penerima")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("grid-DataSource",d.lcZ(10,17,e.permintaanMutasiService.dataDetail$))("columns",e.ConfigGrid.TrDetail),d.xp6(6),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.permintaanMutasiService.jumlah_item)("inputFieldState","detail")("inputFieldState","detail"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,h.q,E.G],pipes:[i.Ov],styles:[""]}),t})();const Rt=JSON.parse('{"GridColumns":[{"field":"mutasi_id","headerText":"mutasi_id Id","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nomor_mutasi","headerText":"Nomor Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_mutasi","headerText":"Tanggal Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom_pemberi","headerText":"Id Stockroom Pemberi","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"nama_stockroom_pemberi","headerText":"Nama Stockroom Pemberi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom_penerima","headerText":"Id Stockroom Penerima","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"nama_stockroom_penerima","headerText":"Nama Stockroom Penerima","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"status_mutasi","headerText":"Status Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item","headerText":"Jumlah Item","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"}]}');var Jt=a.t(Rt,2);const Ut=["GridData"];let Ot=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.persetujuanMutasiService=a,this.ButtonNav=[{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=Jt,this.id=0}ngAfterViewInit(){}ngOnInit(){this.persetujuanMutasiService.onInitList()}handlePencarianFilter(t){this.persetujuanMutasiService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/persetujuan-mutasi/input-persetujuan-mutasi");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.mutasi_id));this.router.navigate(["dashboard/MM/persetujuan-mutasi/proses-persetujuan-mutasi",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(Gt))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-persetujuan-mutasi"]],viewQuery:function(t,e){if(1&t&&d.Gf(Ut,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,7,e.persetujuanMutasiService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();const Mt=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var Lt=a.t(Mt,2);const Qt=["gridDetail"],Kt=["LookupItem"],Ht=["modalQty"],jt=["modalSatuan"],Vt=["modalCanceled"];function Yt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",37),d.TgZ(1,"h5",38),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",39),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",40),d.qZA(),d.qZA(),d.TgZ(5,"div",41),d.TgZ(6,"div",42),d.TgZ(7,"div",43),d.TgZ(8,"input",44,45),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",46),d.TgZ(11,"button",47),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function zt(t,e){if(1&t&&(d.TgZ(0,"option",51),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function Xt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",37),d.TgZ(1,"h5",38),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",39),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",40),d.qZA(),d.qZA(),d.TgZ(5,"div",41),d.TgZ(6,"div",42),d.TgZ(7,"div",43),d.TgZ(8,"select",48,49),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,zt,2,2,"option",50),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",46),d.TgZ(12,"button",47),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}function Wt(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",37),d.TgZ(1,"h5",38),d._uU(2,"Canceled"),d.qZA(),d.TgZ(3,"button",39),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",40),d.qZA(),d.qZA(),d.TgZ(5,"div",41),d.TgZ(6,"div",42),d.TgZ(7,"div",31),d.TgZ(8,"label",52),d.TgZ(9,"strong"),d._uU(10,"Reason Cancel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",53),d._UZ(12,"input",54),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",46),d.TgZ(14,"button",55),d.NdJ("click",function(){return d.CHM(t),d.oxw().onCalceled()}),d._uU(15,"Cancel Data"),d.qZA(),d.TgZ(16,"button",56),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}let $t=(()=>{class t{constructor(t,e,a,i,l,n,o,r,s,d){this.formBuilder=t,this.persetujuanMutasiService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.renderer=n,this.modalService=o,this.changeDetection=r,this.utilityService=s,this.setupItemService=d,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Validasi",Captions:"Validasi",Icons1:"fa-check"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"}],this.GridDataEditSettings={allowEditing:!0},this.GridLookUpItem=Lt,this.subscriptions=[],this.counterChildGrid=0,this.datasatuan=[],this.childGridSatuan=[],this.id_stockroom=0,this.dataSourceGrid=new $.X([]),this.dataScourceGridChild=[],this.totalJumlahItem=new $.X(0),this.itemBatch=[],this.id_item=new $.X(0),this.id=0}ngOnInit(){this.formInput=this.formBuilder.group({mutasi_id:[0],nomor_mutasi:[""],tanggal_mutasi:[null],nama_stockroom_pemberi:[0],nama_stockroom_penerima:[0],pic_pemberi_mutasi:[""],pic_penerima_mutasi:[""],time_serah_terima:[null],keterangan_mutasi:[""],total_transaksi:[0],jumlah_item:[0]});let t=this.id_item,e=null;this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.childGridSatuan=this.persetujuanMutasiService.getSatuanDetail(this.id_item.value),this.satuanObj=new _.NB({value:"",dataSource:this.childGridSatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem),e&&(this.satuanObj.value=e.satuan)}},this.itemsParams={create:()=>(this.itemsElem=document.createElement("input"),this.itemsElem),read:()=>this.itemsObj.text,destroy:()=>{this.itemsObj.destroy()},write:()=>{this.setupItemService.onGetEDItem(this.id_stockroom,t.value).subscribe(e=>{this.itemsObj=new _.NB({value:"",dataSource:e.data,fields:{value:"batch_number",text:"batch_number"},enabled:!0,placeholder:"Select a Batch",floatLabelType:"Never",change:(function(e){this.setFormGrif(e),t.next(e.itemData.id_item)}).bind(this)}),this.itemsObj.appendTo(this.itemsElem)}),e&&setTimeout(()=>{this.itemsObj.value=e.batch_number},500)}};let a=this.dataScourceGridChild,i=this.counterChildGrid,l=this.dataSourceGrid,n=this.totalJumlahItem;this.ChildGrid={dataSource:this.dataScourceGridChild,queryString:"id_item",rowHeight:30,allowResizing:!0,allowTextWrap:!1,textWrapSettings:{wrapMode:"Both"},toolbar:["Add","Edit","Delete","Update","Cancel"],editSettings:{allowEditing:!0,allowAdding:!0,allowDeleting:!0},columns:[{field:"no_urut",headerText:"urut",visible:!1},{field:"id_item",headerText:"id_item",width:100,visible:!1},{field:"batch_number",headerText:"Batch Number",editType:"dropdownedit",edit:this.itemsParams,width:200},{field:"expired_date",headerText:"Expired Date",textAlign:"Right",width:80,allowEditing:!1},{field:"qty_besar",headerText:"Banyak",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2"},{field:"satuan",headerText:"Satuan",visible:!1,editType:"dropdownedit",edit:this.satuanParams,width:200},{field:"isi",headerText:"Isi",visible:!1,headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!1},{field:"qty_mutasi",headerText:"Qty",headerTextAlign:"Center",textAlign:"Right",width:100,format:"N2",allowEditing:!0},{field:"nama_satuan",headerText:"Satuan",headerTextAlign:"Center",textAlign:"Left",width:100,format:"N2",allowEditing:!1},{field:"hpp_satuan",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!0},{field:"sub_total",headerText:"",headerTextAlign:"Center",textAlign:"Right",width:1,format:"N2",allowEditing:!1,visible:!1}],rowSelected(t){e=t.data},actionBegin(e){"add"===e.requestType&&(e.data.id_item=this.parentDetails.parentRowData.id_item,e.data.counterChildGrid=i++,t.next(this.parentDetails.parentRowData.id_item),console.log(t.value))},actionComplete(t){if("save"===t.requestType){if(console.log("complete",t),"add"===t.action&&a.push(t.data),"edit"===t.action){let e=a.map(t=>t.counterChildGrid).indexOf(t.data.counterChildGrid);a[e]=t.data}let e=[];l.value.forEach((t,i)=>{let l=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(l+=parseInt(e.qty_mutasi))}),t.qty_mutasi=l,e.push(t)}),setTimeout(()=>{l.next(e),n.next(e.sum("qty_mutasi")),console.log(e)},500)}if("delete"===t.requestType){let e=a.map(t=>t.counterChildGrid).indexOf(t.data[0].counterChildGrid);a.splice(e,1);let i=[];l.value.forEach((t,e)=>{let l=0;a.forEach((e,a)=>{t.id_item==e.id_item&&(l+=parseInt(e.qty_mutasi))}),t.qty_mutasi=l,i.push(t)}),setTimeout(()=>{l.next(i),console.log(i)},500)}}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"| [*]=Ubah Banyak | [+]=Satuan |"}]}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onDataBound(){this.gridDetail.detailRowModule.expandAll()}setFormGrif(t){document.getElementsByName("expired_date")[0].value=t.itemData.expired_date,document.getElementsByName("nama_satuan")[0].value=t.itemData.nama_satuan,document.getElementsByName("hpp_satuan")[0].value=t.itemData.harga_satuan_netto}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuans,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.persetujuanMutasiService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.persetujuanMutasiService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}onLoadDetailData(t){this.persetujuanMutasiService.onGetById(t).subscribe(e=>{this.id=parseInt(t),this.formInput.setValue({mutasi_id:parseInt(t),nomor_mutasi:e.data.nomor_mutasi,tanggal_mutasi:e.data.tanggal_mutasi,nama_stockroom_pemberi:e.data.nama_stockroom_pemberi,nama_stockroom_penerima:e.data.nama_stockroom_penerima,pic_pemberi_mutasi:"",pic_penerima_mutasi:"",keterangan_mutasi:"",time_serah_terima:new Date,total_transaksi:0,jumlah_item:0}),this.id_stockroom=e.data.id_stockroom_pemberi,this.persetujuanMutasiService.getDetail(t).subscribe(t=>{this.dataSourceGrid.next(t.data)})})}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){if(this.formInput.valid){let t=this.formInput.value;this.dataSourceGrid.subscribe(e=>{let a=e;a.map((t,e)=>t.detailBatch=[]),a.forEach((t,e)=>{this.dataScourceGridChild.forEach((i,l)=>{t.id_item==i.id_item&&(i.qty_mutasi=parseFloat(i.qty_mutasi),i.hpp_satuan=parseFloat(i.hpp_satuan),i.sub_total=i.qty_mutasi*i.hpp_satuan,a[e].detailBatch.push(i))})}),t.details=a,this.persetujuanMutasiService.validasiPersetujuan(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{})})})}else alert("isi semua data")}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":this.onSave();break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.persetujuanMutasiService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(Gt),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye),d.Y36(d.Qsj),d.Y36(k.tT),d.Y36(d.sBO),d.Y36(A.t),d.Y36(tt.z))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-persetujuan-mutasi"]],viewQuery:function(t,e){if(1&t&&(d.Gf(Qt,5),d.Gf(Kt,5),d.Gf(Ht,5),d.Gf(jt,5),d.Gf(Vt,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first),d.iGM(t=d.CRH())&&(e.modalCanceled=t.first)}},decls:43,vars:61,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_mutasi",3,"label","inputFieldState"],["formControlName","tanggal_mutasi",3,"label","format"],["formControlName","pic_pemberi_mutasi",3,"label","inputFieldState"],["formControlName","pic_penerima_mutasi",3,"label","inputFieldState"],["formControlName","nama_stockroom_pemberi",3,"label","inputFieldState"],["formControlName","nama_stockroom_penerima",3,"label","inputFieldState"],["formControlName","time_serah_terima",3,"label","format"],["formControlName","keterangan_mutasi",3,"label"],[3,"id","editSettings","dataSource","gridLines","allowResizing","childGrid","actionComplete","toolbarClick","load","rowSelected","dataBound"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_satuan_besar_permintaan","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","kode_satuan_besar_permintaan","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","isi_permintaan","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_permintaan","headerText","QTY ","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","keterangan_permintaan","headerText","Keterangan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_satuan_besar_mutasi","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","kode_satuan_besar_mutasi","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit"],["field","isi_mutasi","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_mutasi","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","keterangan_mutasi","headerText","Keterangan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nominal_mutasi","headerText","Nominal","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],[3,"label","isFooter","value","inputFieldState"],["modalQty",""],["modalSatuan",""],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d._UZ(6,"mol-input-text",6),d._UZ(7,"mol-input-text",7),d.qZA(),d.TgZ(8,"div",3),d._UZ(9,"mol-input-text",8),d._UZ(10,"mol-input-text",9),d._UZ(11,"mol-datepicker-syncfusion",10),d._UZ(12,"mol-input-textarea",11),d.qZA(),d.qZA(),d.TgZ(13,"ejs-grid",12,13),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)})("dataBound",function(){return e.onDataBound()}),d.ALo(15,"async"),d.TgZ(16,"e-columns"),d._UZ(17,"e-column",14),d._UZ(18,"e-column",15),d._UZ(19,"e-column",16),d._UZ(20,"e-column",17),d._UZ(21,"e-column",18),d._UZ(22,"e-column",19),d._UZ(23,"e-column",20),d._UZ(24,"e-column",21),d._UZ(25,"e-column",22),d._UZ(26,"e-column",23),d._UZ(27,"e-column",24),d._UZ(28,"e-column",25),d._UZ(29,"e-column",26),d._UZ(30,"e-column",27),d._UZ(31,"e-column",28),d.qZA(),d.qZA(),d.TgZ(32,"div",29),d._UZ(33,"div",30),d._UZ(34,"div",31),d.TgZ(35,"div",32),d._UZ(36,"mol-input-numeric",33),d.qZA(),d.qZA(),d.qZA(),d.YNc(37,Yt,13,0,"ng-template",null,34,d.W1O),d.YNc(39,Xt,14,2,"ng-template",null,35,d.W1O),d.YNc(41,Wt,18,0,"ng-template",null,36,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Nomor Mutasi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Mutasi")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","PIC Pemberi")("inputFieldState","input"),d.xp6(1),d.Q6J("label","PIC Penerima")("inputFieldState","input"),d.xp6(2),d.Q6J("label","Stockroom Pemberi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Stockroom Penerima")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Waktu Serah Terima")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(15,59,e.dataSourceGrid))("gridLines","Both")("allowResizing",!0)("childGrid",e.ChildGrid),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0)("edit",e.satuanParams),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.totalJumlahItem.value)("inputFieldState","detail")("inputFieldState","detail"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,Z.h,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const te=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_supplier","headerText":"Kode Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kota","headerText":"Kota","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"provinsi","headerText":"Provinsi","type":"string","visible":false}],"filter":[{"field":"kode_supplier","filter":"like","title":"KODE SUPPLIER"},{"field":"nama_supplier","filter":"like","title":"NAMA SUPPLIER"}]}');var ee=a.t(te,2);const ae=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var ie=a.t(ae,2);const le=JSON.parse('{"TrKontrakSpjbDetailItemInsert":[{"allowEditing":false,"field":"kontrak_id","headerText":"Kontrak Id","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"no_urut","headerText":"No Urut","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"id_item","headerText":"Id Item","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":true,"editType":"defaultEdit","field":"tanggal_maksimal_expired_date","format":"dd MMMM yyyy","headerText":"Max Expired","type":"DateTime","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"qty_kontrak_satuan_besar","headerText":"Banyak","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"editParams":"satuanParams","field":"kode_satuan_besar","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi","headerText":"Isi","editType":"defaultEdit","type":"","format":"","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_kontrak","headerText":"Qty","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"harga_satuan","headerText":"Harga Satuan","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"sub_total_kontrak","headerText":"Sub Total Kontrak","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true}]}');var ne=a.t(le,2),oe=a(7535);Array.prototype.sum=function(t){for(var e=0,a=0,i=this.length;a<i;a++)e+=this[a][t];return e},Array.prototype.insertToIndex=function(t){return t=Math.min(t,this.length),arguments.length>1&&this.splice.apply(this,[t,0].concat([].pop.call(arguments)))&&this.insertToIndex.apply(this,arguments),this},Array.prototype.orderBy=function(t){var e,a;this.sort((a=1,"-"===(e=t)[0]&&(a=-1,e=e.substr(1)),function(t,i){return(t[e]<i[e]?-1:t[e]>i[e]?1:0)*a}))};let re=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=oe.l.TRANSKONTRAKSPJB,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.total=0,this.jumlahItem=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_ALL_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetAllByParamsSource(t){this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_ALL_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)})).subscribe(t=>{this.dataSource.next(t.data)})}setDetail(t){this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t).subscribe(t=>{this.dataDetail=t.data})}addDataDetail(t){this.dataDetail=[...this.dataDetail,t],this.sum()}updateFromInline(t,e,a){let i=e.satuan.findIndex(t=>t.kode_satuan==e.kode_satuan_besar),l=e.satuan[i].isi;e.isi=l,e.qty_kontrak=e.qty_kontrak_satuan_besar*l,e.sub_total_kontrak!=a.sub_total_kontrak?e.harga_satuan=e.sub_total_kontrak/e.qty_kontrak:e.sub_total_kontrak=e.qty_kontrak*e.harga_satuan,this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_kontrak_satuan_besar=e,this.dataDetail[t].qty_kontrak=e*this.dataDetail[t].isi,this.dataDetail[t].sub_total_kontrak=e*this.dataDetail[t].isi*this.dataDetail[t].harga_satuan}editExpired(t,e){this.dataDetail[t].tanggal_maksimal_expired_date=e}editHarga(t,e){this.dataDetail[t].harga_satuan=e,this.dataDetail[t].sub_total_kontrak=e*this.dataDetail[t].qty_kontrak}editSubtotal(t,e){this.dataDetail[t].sub_total_kontrak=e,this.dataDetail[t].harga_satuan=e/this.dataDetail[t].qty_kontrak}editSatuan(t,e){let a=this.dataDetail[t].satuan.findIndex(e=>e.kode_satuan==this.dataDetail[t].kode_satuan_besar),i=this.dataDetail[t].satuan[a].isi;this.dataDetail[t].kode_satuan_besar=e,this.dataDetail[t].isi=i,this.dataDetail[t].qty_kontrak=this.dataDetail[t].qty_kontrak_satuan_besar*i,this.dataDetail[t].sub_total_kontrak=this.dataDetail[t].qty_kontrak*this.dataDetail[t].harga_satuan}sum(){this.total=this.dataDetail.sum("sub_total_kontrak"),this.jumlahItem=this.dataDetail.sum("qty_kontrak_satuan_besar")}Insert(t){return this.dataDetail.map((t,e)=>t.no_urut=e+1),t.details=this.dataDetail,t.jumlah_item_kontrak=this.jumlahItem,t.total_transaksi_kontrak=this.total,this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[],this.total=0,this.jumlahItem=0}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var se=a(6296);const de=["templateToolbar"],ue=["gridDetail"],ce=["LookupKodeSupplier"],pe=["LookupItem"],me=["modalQty"],he=["modalHarga"],ge=["modalSubtotal"],fe=["modalSatuan"];function _e(t,e){1&t&&(d.TgZ(0,"a"),d._uU(1,"halooo jhon"),d.qZA())}function be(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",41),d.TgZ(1,"h5",42),d._uU(2,"Edit Harga"),d.qZA(),d.TgZ(3,"button",43),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",44),d.qZA(),d.qZA(),d.TgZ(5,"div",45),d.TgZ(6,"div",46),d.TgZ(7,"div",47),d.TgZ(8,"input",48,49),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleHargaChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",50),d.TgZ(11,"button",51),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Te(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",41),d.TgZ(1,"h5",42),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",43),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",44),d.qZA(),d.qZA(),d.TgZ(5,"div",45),d.TgZ(6,"div",46),d.TgZ(7,"div",47),d.TgZ(8,"input",52,53),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",50),d.TgZ(11,"button",51),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Se(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",41),d.TgZ(1,"h5",42),d._uU(2,"Edit Subtotal"),d.qZA(),d.TgZ(3,"button",43),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",44),d.qZA(),d.qZA(),d.TgZ(5,"div",45),d.TgZ(6,"div",46),d.TgZ(7,"div",47),d.TgZ(8,"input",54,55),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSubtotalChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",50),d.TgZ(11,"button",51),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function ve(t,e){if(1&t&&(d.TgZ(0,"option",59),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function ke(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",41),d.TgZ(1,"h5",42),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",43),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",44),d.qZA(),d.qZA(),d.TgZ(5,"div",45),d.TgZ(6,"div",46),d.TgZ(7,"div",47),d.TgZ(8,"select",56,57),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,ve,2,2,"option",58),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",50),d.TgZ(12,"button",51),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}let xe=(()=>{class t{constructor(t,e,a,i,l,n,o,r,s){this.location=t,this.renderer=e,this.formBuilder=a,this.modalService=i,this.activatedRoute=l,this.utilityService=n,this.changeDetection=o,this.encryptionService=r,this.inputKontrakPengadaanService=s,this.GridDetailItem=ne,this.GridLookUpSupplier=ee,this.GridLookUpItem=ie,this.Detail=[],this.urlSupplier=T.MM.SETUP_DATA.SETUP_SUPPLIER.GET_ALL_BY_PARMS,this.urlItem=T.MM.SETUP_DATA.SETUP_ITEM.GET_ALL_BY_PARMS,this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.subscriptions=[],this.datasatuan=[],this.TglExpiredParams={params:{min:new Date}}}ngOnInit(){this.formKontrak=this.formBuilder.group({id_supplier:["",l.kI.required],nomor_kontrak_spjb:["",l.kI.required],nomor_kontrak:["",l.kI.required],tanggal_ttd_kontrak:[null,l.kI.required],tanggal_berlaku_kontrak:[null,l.kI.required],tanggal_berakhir_kontrak:[null,l.kI.required],judul_kontrak:["",l.kI.required],tahun_anggaran:["",l.kI.required],keterangan:["",l.kI.required],total_transaksi_kontrak:[0,l.kI.required],jumlah_item_kontrak:[0,l.kI.required],user_inputed:[1,[]]}),this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.satuanObj=new _.NB({value:this.detailSelected.kode_satuan_besar,dataSource:this.datasatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem)}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"Add[F1]",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"| [*]=Ubah Banyak | [/]=Ganti Harga | [-]=Sub Total | [+]=Satuan |"}]}ngAfterViewInit(){if(Object.keys(this.activatedRoute.snapshot.params).length>0){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);this.onLoadDetailData(t)}setTimeout(()=>{this.ResetFrom()},1)}onLoadDetailData(t){this.inputKontrakPengadaanService.onGetById(t).subscribe(t=>{this.formKontrak.setValue({id_supplier:t.data.id_supplier,nomor_kontrak_spjb:t.data.nomor_kontrak_spjb,nomor_kontrak:t.data.nomor_kontrak,tanggal_ttd_kontrak:t.data.tanggal_ttd_kontrak,tanggal_berlaku_kontrak:t.data.tanggal_berlaku_kontrak,tanggal_berakhir_kontrak:t.data.tanggal_berakhir_kontrak,judul_kontrak:t.data.judul_kontrak,tahun_anggaran:t.data.tahun_anggaran,keterangan:t.data.keterangan,total_transaksi_kontrak:t.data.total_transaksi_kontrak,jumlah_item_kontrak:t.data.jumlah_item_kontrak,user_inputed:1})})}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom();break;case"Back":this.location.back()}}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}heandleSelectedSupplier(t){this.id_supplier.setValue(t.id_supplier)}heandleSelectedItem(t){this.inputKontrakPengadaanService.addDataDetail({no_urut:0,id_item:t.id_item,kode_item:t.kode_item,nama_item:t.nama_item,tanggal_maksimal_expired_date:"",qty_kontrak:t.satuans[0].isi,harga_satuan:t.harga_beli_terakhir,isi:t.satuans[0].isi,kode_satuan_besar:t.satuans[0].kode_satuan,qty_kontrak_satuan_besar:1,sub_total_kontrak:t.satuans[0].isi*t.harga_beli_terakhir,satuan:t.satuans}),this.selectLastRowdetail()}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.inputKontrakPengadaanService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuan,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleQtyChange(t){let e=parseInt(t);this.inputKontrakPengadaanService.editBanyak(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSatuanChange(t){this.inputKontrakPengadaanService.editSatuan(this.currentIndex,t),this.modalRef.hide(),this.gridDetail.refresh()}handleHargaChange(t){let e=parseInt(t);this.inputKontrakPengadaanService.editHarga(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSubtotalChange(t){let e=parseInt(t);this.inputKontrakPengadaanService.editSubtotal(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.inputKontrakPengadaanService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),111===t.keyCode&&this.onOpenHarga(),109===t.keyCode&&this.onOpenSubtotal(),107===t.keyCode&&this.onOpenSatuan()}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenHarga(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("HargaValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalHarga,Object.assign({},{class:"modal-lg"}))}onOpenSubtotal(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SubtotalValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{console.log(t,"subTotal hidden"),this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSubtotal,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){this.formKontrak.valid?this.inputKontrakPengadaanService.Insert(this.formKontrak.value).subscribe(t=>{console.log(t),this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):alert("isi semua data")}ResetFrom(){this.inputKontrakPengadaanService.Reset(),this.formKontrak.reset(),this.LookupKodeSupplier.resetValue()}get id_supplier(){return this.formKontrak.get("id_supplier")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(i.Ye),d.Y36(d.Qsj),d.Y36(l.qu),d.Y36(k.tT),d.Y36(o.gz),d.Y36(A.t),d.Y36(d.sBO),d.Y36(u.C),d.Y36(re))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-input-kontrak-pengadaan"]],viewQuery:function(t,e){if(1&t&&(d.Gf(de,5),d.Gf(ue,5),d.Gf(ce,5),d.Gf(pe,5),d.Gf(me,5),d.Gf(he,5),d.Gf(ge,5),d.Gf(fe,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.templateToolbar=t.first),d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeSupplier=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalHarga=t.first),d.iGM(t=d.CRH())&&(e.modalSubtotal=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first)}},decls:49,vars:68,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[3,"lookup-url","idKode","idTitle","columns","filter-lookup","label","modal-title","onGetSelectedData"],["LookupKodeSupplier",""],["formControlName","nomor_kontrak_spjb",3,"label"],["formControlName","nomor_kontrak",3,"label"],["formControlName","tanggal_ttd_kontrak",3,"label","format"],["formControlName","judul_kontrak",3,"label"],["formControlName","tanggal_berlaku_kontrak",3,"label","format"],["formControlName","tanggal_berakhir_kontrak",3,"label","format"],["formControlName","tahun_anggaran",3,"label"],["formControlName","keterangan",3,"label"],["templateToolbar",""],[3,"id","editSettings","dataSource","gridLines","toolbar","actionComplete","toolbarClick","load","rowSelected"],["gridDetail",""],["field","kontrak_id","headerText","Kontrak","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","tanggal_maksimal_expired_date","headerText","Max Expired","editType","datepickeredit","textAlign","left","headerTextAlign","center","format","dd MMMM yyyy","type","Date",3,"visible","allowEditing","edit"],["field","qty_kontrak_satuan_besar","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_satuan_besar","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit"],["field","isi","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing"],["field","qty_kontrak","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing"],["field","harga_satuan","headerText","Harga Satuan","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","sub_total_kontrak","headerText","Sub Total","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],[1,"row","mt-2"],[1,"col-sm-5"],[1,"col-sm-3"],["formControlName","jumlah_item_kontrak",3,"label","isFooter","value","inputFieldState"],[1,"col-sm-4"],["formControlName","total_transaksi_kontrak",3,"label","isFooter","value","id","inputFieldState"],[3,"lookup-url","columns","filter-lookup","modal-title","onGetSelectedData"],["LookupItem",""],["modalHarga",""],["modalQty",""],["modalSubtotal",""],["modalSatuan",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","HargaValueId",1,"form-control",3,"keydown.enter"],["hargaValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],["type","text","id","SubtotalValueId",1,"form-control",3,"keydown.enter"],["subtotalValueId",""],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"org-input-look-up-kode",4,5),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedSupplier(t)}),d.qZA(),d._UZ(6,"mol-input-text",6),d._UZ(7,"mol-input-text",7),d._UZ(8,"mol-datepicker-syncfusion",8),d._UZ(9,"mol-input-text",9),d.qZA(),d.TgZ(10,"div",3),d._UZ(11,"mol-datepicker-syncfusion",10),d._UZ(12,"mol-datepicker-syncfusion",11),d._UZ(13,"mol-input-text",12),d._UZ(14,"mol-input-textarea",13),d.qZA(),d.qZA(),d.YNc(15,_e,2,0,"ng-template",null,14,d.W1O),d.TgZ(17,"ejs-grid",15,16),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)}),d.ALo(19,"async"),d.TgZ(20,"e-columns"),d._UZ(21,"e-column",17),d._UZ(22,"e-column",18),d._UZ(23,"e-column",19),d._UZ(24,"e-column",20),d._UZ(25,"e-column",21),d._UZ(26,"e-column",22),d._UZ(27,"e-column",23),d._UZ(28,"e-column",24),d._UZ(29,"e-column",25),d._UZ(30,"e-column",26),d._UZ(31,"e-column",27),d._UZ(32,"e-column",28),d.qZA(),d.qZA(),d.TgZ(33,"div",29),d._UZ(34,"div",30),d.TgZ(35,"div",31),d._UZ(36,"mol-input-numeric",32),d.qZA(),d.TgZ(37,"div",33),d._UZ(38,"mol-input-numeric",34),d.qZA(),d.qZA(),d.qZA(),d.TgZ(39,"org-look-up",35,36),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedItem(t)}),d.qZA(),d.YNc(41,be,13,0,"ng-template",null,37,d.W1O),d.YNc(43,Te,13,0,"ng-template",null,38,d.W1O),d.YNc(45,Se,13,0,"ng-template",null,39,d.W1O),d.YNc(47,ke,14,2,"ng-template",null,40,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formKontrak),d.xp6(3),d.Q6J("lookup-url",e.urlSupplier)("idKode","kode_supplier")("idTitle","nama_supplier")("columns",e.GridLookUpSupplier.columns)("filter-lookup",e.GridLookUpSupplier.filter)("label","Supplier")("modal-title","Data Supplier"),d.xp6(2),d.Q6J("label","No SPBBJ"),d.xp6(1),d.Q6J("label","Nomor Kontrak"),d.xp6(1),d.Q6J("label","Tgl TTD")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Judul Kontrak"),d.xp6(2),d.Q6J("label","Tgl Berlaku Kontrak")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Tgl Berakhir Kontrak")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Tahun Anggaran"),d.xp6(1),d.Q6J("label","Keterangan"),d.xp6(3),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(19,66,e.inputKontrakPengadaanService.dataDetail$))("gridLines","Both")("toolbar",e.GridDetailToolbar),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.TglExpiredParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.satuanParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(4),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.inputKontrakPengadaanService.jumlahItem)("inputFieldState","detail")("inputFieldState","detail"),d.xp6(2),d.Q6J("label","Total Transaksi")("isFooter",!0)("value",e.inputKontrakPengadaanService.total)("id","total_transaksi_kontrak")("inputFieldState","detail")("inputFieldState","detail"),d.xp6(1),d.Q6J("lookup-url",e.urlItem)("columns",e.GridLookUpItem.columns)("filter-lookup",e.GridLookUpItem.filter)("modal-title","Data Item"))},directives:[p.G,l._Y,l.JL,l.sg,se.E,y._,l.JJ,l.u,I.i,Z.h,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,N.N,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[".modal[_ngcontent-%COMP%] > .modal-dialog[_ngcontent-%COMP%]{animation-name:example;animation-duration:.1s}"]}),t})();const Ae=JSON.parse('{"GridColumns":[{"field":"kontrak_id","headerText":"Kontrak Id","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nama_supplier","headerText":"Supplier","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"id_supplier","headerText":"Id Supplier","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nomor_kontrak_spjb","headerText":"Nomor Kontrak Spjb","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nomor_kontrak","headerText":"Nomor Kontrak","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"judul_kontrak","headerText":"Judul Kontrak","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_ttd_kontrak","headerText":"Tanggal Ttd Kontrak","type":"Date","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"tanggal_berlaku_kontrak","headerText":"Tanggal Berlaku Kontrak","type":"Date","format":"dd/MM/yyyy","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_berakhir_kontrak","headerText":"Tanggal Berakhir Kontrak","type":"Date","format":"dd/MM/yyyy","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item_kontrak","headerText":"Jumlah Item Kontrak","type":"number","format":"N2","textAlign":"Right","visible":true,"editType":"defaultEdit"},{"field":"total_transaksi_kontrak","headerText":"Total Transaksi Kontrak","type":"number","format":"N2","textAlign":"Right","visible":true,"editType":"defaultEdit"},{"field":"tahun_anggaran","headerText":"Tahun Anggaran","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"keterangan","headerText":"Keterangan","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"Status Transaksi","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nomor_kontrak_spjb_asli","headerText":"Nomor Kontrak Spjb Asli","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"}]}');var ye=a.t(Ae,2);const Ie=["GridData"];let we=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.inputKontrakPengadaanService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=ye}ngOnInit(){}ngAfterViewInit(){this.inputKontrakPengadaanService.onGetAllByParamsSource([]),this.inputKontrakPengadaanService.dataSource.subscribe(t=>{t.length>0&&(this.GridData.Grid.dataSource=t,this.GridData.Grid.refresh())})}handlePencarianFilter(t){this.inputKontrakPengadaanService.onGetAllByParamsSource(t),this.inputKontrakPengadaanService.dataSource.subscribe(t=>{t.length>0&&(this.GridData.Grid.dataSource=t,this.GridData.Grid.refresh())})}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/kontrak-pengadaan/input-kontrak-pengadaan");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.kontrak_id));this.router.navigate(["dashboard/MM/kontrak-pengadaan/view-kontrak-pengadaan",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(re))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-list-kontrak-pengadaan"]],viewQuery:function(t,e){if(1&t&&d.Gf(Ie,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected","initialized"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("initialized",function(t){return e.handleinitialized(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,7,e.inputKontrakPengadaanService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();const De=JSON.parse('{"TrDetailKontrak":[{"allowEditing":false,"field":"kontrak_id","headerText":"Kontrak Id","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"no_urut","headerText":"No Urut","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"id_item","headerText":"Id Item","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":true,"editType":"defaultEdit","field":"tanggal_maksimal_expired_date","format":"dd MMMM yyyy","headerText":"Max Expired","type":"DateTime","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"qty_kontrak_satuan_besar","headerText":"Banyak","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"editParams":"satuanParams","field":"kode_satuan_besar","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi","headerText":"Isi","editType":"defaultEdit","type":"","format":"","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_kontrak","headerText":"Qty","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"harga_satuan","headerText":"Harga Satuan","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"sub_total_kontrak","headerText":"Sub Total Kontrak","editType":"defaultEdit","type":"","format":"","textAlign":"right","headerTextAlign":"Center","visible":true}]}');var Ze=a.t(De,2);let Ce=(()=>{class t{constructor(t,e,a,i,l){this.formBuilder=t,this.inputKontrakPengadaanService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"}],this.ConfigGrid=Ze}ngOnInit(){this.formKontrak=this.formBuilder.group({nama_supplier:[""],nomor_kontrak_spjb:[""],nomor_kontrak:[""],tanggal_ttd_kontrak:[null],tanggal_berlaku_kontrak:[null],tanggal_berakhir_kontrak:[null],judul_kontrak:[""],tahun_anggaran:[""],keterangan:[""],total_transaksi_kontrak:[0],jumlah_item_kontrak:[0],user_inputed:[1,[]]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onLoadDetailData(t){this.inputKontrakPengadaanService.onGetById(t).subscribe(e=>{this.formKontrak.setValue({nama_supplier:e.data.nama_supplier,nomor_kontrak_spjb:e.data.nomor_kontrak_spjb,nomor_kontrak:e.data.nomor_kontrak,tanggal_ttd_kontrak:e.data.tanggal_ttd_kontrak,tanggal_berlaku_kontrak:e.data.tanggal_berlaku_kontrak,tanggal_berakhir_kontrak:e.data.tanggal_berakhir_kontrak,judul_kontrak:e.data.judul_kontrak,tahun_anggaran:e.data.tahun_anggaran,keterangan:e.data.keterangan,total_transaksi_kontrak:e.data.total_transaksi_kontrak,jumlah_item_kontrak:e.data.jumlah_item_kontrak,user_inputed:1}),this.inputKontrakPengadaanService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back()}}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(re),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-kontrak-pengadaan"]],decls:22,vars:38,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nama_supplier",3,"label","inputFieldState"],["formControlName","nomor_kontrak_spjb",3,"label","inputFieldState"],["formControlName","nomor_kontrak",3,"label","inputFieldState"],["formControlName","tanggal_ttd_kontrak",3,"label","format","inputFieldState"],["formControlName","judul_kontrak",3,"label","inputFieldState"],["formControlName","tanggal_berlaku_kontrak",3,"label","format","inputFieldState"],["formControlName","tanggal_berakhir_kontrak",3,"label","format","inputFieldState"],["formControlName","tahun_anggaran",3,"label","inputFieldState"],["formControlName","keterangan",3,"label","inputFieldState"],[3,"grid-DataSource","columns"],[1,"row","mt-2"],[1,"col-sm-5"],[1,"col-sm-3"],["formControlName","jumlah_item_kontrak",3,"label","isFooter","value","inputFieldState"],[1,"col-sm-4"],["formControlName","total_transaksi_kontrak",3,"label","isFooter","value","id","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-input-text",5),d._UZ(6,"mol-input-text",6),d._UZ(7,"mol-datepicker-syncfusion",7),d._UZ(8,"mol-input-text",8),d.qZA(),d.TgZ(9,"div",3),d._UZ(10,"mol-datepicker-syncfusion",9),d._UZ(11,"mol-datepicker-syncfusion",10),d._UZ(12,"mol-input-text",11),d._UZ(13,"mol-input-textarea",12),d.qZA(),d.qZA(),d._UZ(14,"mol-grid",13),d.ALo(15,"async"),d.TgZ(16,"div",14),d._UZ(17,"div",15),d.TgZ(18,"div",16),d._UZ(19,"mol-input-numeric",17),d.qZA(),d.TgZ(20,"div",18),d._UZ(21,"mol-input-numeric",19),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formKontrak),d.xp6(3),d.Q6J("label","Supplier")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","No SPBBJ")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Nomor Kontrak")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tgl TTD")("format","dd MMMM yyyy")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Judul Kontrak")("inputFieldState",e.inputFieldState),d.xp6(2),d.Q6J("label","Tgl Berlaku Kontrak")("format","dd MMMM yyyy")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tgl Berakhir Kontrak")("format","dd MMMM yyyy")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tahun Anggaran")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Keterangan")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("grid-DataSource",d.lcZ(15,36,e.inputKontrakPengadaanService.dataDetail$))("columns",e.ConfigGrid.TrDetailKontrak),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.inputKontrakPengadaanService.jumlahItem)("inputFieldState","detail")("inputFieldState",e.inputFieldState),d.xp6(2),d.Q6J("label","Total Transaksi")("isFooter",!0)("value",e.inputKontrakPengadaanService.total)("id","total_transaksi_kontrak")("inputFieldState","detail")("inputFieldState",e.inputFieldState))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,Z.h,h.q,E.G],pipes:[i.Ov],styles:[""]}),t})();const Ee=JSON.parse('{"GridColumns":[{"field":"pemesanan_id","headerText":"Pemesanan Id","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nomor_pemesanan","headerText":"No Pemesanan","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"kode_supplier","headerText":"Kode Supplier","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"nama_supplier","headerText":"Nama Supplier","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_pemesanan","headerText":"Tgl Pemesanan","type":"Date","format":"dd/MM/yyyy","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_expired_pemesanan","headerText":"Tgl Exp Pemesanan","type":"Date","format":"dd/MM/yyyy","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom","headerText":"Id Stockroom","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"kode_stockroom","headerText":"Kode Stockroom","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nama_stockroom","headerText":"Nama Stockroom","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"id_supplier","headerText":"Id Supplier","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"keterangan","headerText":"Keterangan","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item_pesan","headerText":"Jumlah Item Pesan","type":"number","format":"N2","textAlign":"Right","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item_terima","headerText":"Jumlah Item Terima","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"sub_total_1","headerText":"Sub Total 1","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"total_disc","headerText":"Total Disc","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"sub_total_2","headerText":"Sub Total 2","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"total_tax","headerText":"Total Tax","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"total_transaksi_pesan","headerText":"Total Transaksi Pesan","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"total_transaksi_terima","headerText":"Total Transaksi Terima","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"status_penerimaan","headerText":"Status Penerimaan","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"Status Transaksi","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"is_closed","headerText":"Is Closed","type":"boolean","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_inputed","headerText":"User Inputed","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_inputed","headerText":"Time Inputed","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_validated","headerText":"User Validated","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_validated","headerText":"Time Validated","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_canceled","headerText":"User Canceled","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_canceled","headerText":"Time Canceled","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"reason_canceled","headerText":"Reason Canceled","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_closed","headerText":"User Closed","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_closed","headerText":"Time Closed","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"reason_closed","headerText":"Reason Closed","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_revision","headerText":"User Revision","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_revision","headerText":"Time Revision","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"reason_revision","headerText":"Reason Revision","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"jumlah_revisi","headerText":"Jumlah Revisi","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"cetakan_ke","headerText":"Cetakan Ke","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nomor_pemesanan_asli","headerText":"Nomor Pemesanan Asli","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"}]}');var Ne=a.t(Ee,2);let Fe=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=oe.l.TRANSPEMESANAN,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.sub_total_1=0,this.total_disc=0,this.sub_total_2=0,this.total_tax=0,this.total_transaksi_pesan=0,this.jumlah_item_pesan=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_HEADER_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetAllByParamsSource(t){this.onGetAllByParams(t).subscribe(t=>{t&&this.dataSource.next(t.data)})}setDetail(t){this.getDetail(t).subscribe(t=>{let e=t.data;e.map((t,e)=>t.qty_sisa=t.qty_pesan-t.qty_terima),this.dataDetail=e})}getDetail(t){return this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t)}addDataDetail(t){this.dataDetail=[...this.dataDetail,t],this.sum()}updateFromInline(t,e,a){let i=e.satuan.findIndex(t=>t.kode_satuan==e.kode_satuan_besar),l=e.satuan[i].isi;e.isi=l,e.qty_pesan=e.qty_satuan_besar*l,e.sub_total_pesan=e.qty_pesan*e.harga_satuan,this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_satuan_besar=e,this.dataDetail[t].qty_pesan=e*this.dataDetail[t].isi,this.dataDetail[t].sub_total_pesan=e*this.dataDetail[t].isi*this.dataDetail[t].harga_satuan}editHarga(t,e){this.dataDetail[t].harga_satuan=e,this.dataDetail[t].sub_total_pesan=e*this.dataDetail[t].qty_pesan}editSubtotal(t,e){this.dataDetail[t].sub_total_pesan=e,this.dataDetail[t].harga_satuan=e/this.dataDetail[t].qty_pesan}editSatuan(t,e){let a=this.dataDetail[t].satuan.findIndex(e=>e.kode_satuan==this.dataDetail[t].kode_satuan_besar),i=this.dataDetail[t].satuan[a].isi;this.dataDetail[t].kode_satuan_besar=e,this.dataDetail[t].isi=i,this.dataDetail[t].qty_pesan=this.dataDetail[t].qty_satuan_besar*i,this.dataDetail[t].sub_total_pesan=this.dataDetail[t].qty_pesan*this.dataDetail[t].harga_satuan}sum(){this.sub_total_1=this.dataDetail.sum("sub_total_pesan"),this.sub_total_2=this.dataDetail.sum("sub_total_pesan"),this.total_transaksi_pesan=this.dataDetail.sum("sub_total_pesan"),this.jumlah_item_pesan=this.dataDetail.sum("qty_pesan")}Insert(t){return this.dataDetail.map((t,e)=>t.no_urut=e+1),t.details=this.dataDetail,t.sub_total_1=this.sub_total_1,t.total_disc=this.total_disc,t.sub_total_2=this.sub_total_2,t.total_tax=this.total_tax,t.jumlah_item_pesan=this.jumlah_item_pesan,t.total_transaksi_pesan=this.total_transaksi_pesan,this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[],this.total_transaksi_pesan=0,this.jumlah_item_pesan=0}Validation(t){return this.httpOperationService.defaultPutRequest(this.API.VALIDASI,{pemesanan_id:t}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Cancel(t,e){return this.httpOperationService.defaultPutRequest(this.API.CANCEL,{pemesanan_id:t,reason_canceled:e}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Close(t,e){return this.httpOperationService.defaultPutRequest(this.API.CLOSE,{pemesanan_id:t,reason_closed:e}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ge=["GridData"];let qe=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.pemesananService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=Ne}ngAfterViewInit(){}ngOnInit(){this.pemesananService.onInitList()}handlePencarianFilter(t){this.pemesananService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/pemesanan/input-pemesanan");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.pemesanan_id));this.router.navigate(["dashboard/MM/pemesanan/view-pemesanan",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}handleRowDataBound(t){let e=t.data.status_transaksi;"VALIDATED"==e&&t.row.classList.add("e-validation-background"),"CANCELED"==e&&t.row.classList.add("e-canceled-background"),"CLOSED"==e&&t.row.classList.add("e-closed-background")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(Fe))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-pemesanan"]],viewQuery:function(t,e){if(1&t&&d.Gf(Ge,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected","row-data-bound"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("row-data-bound",function(t){return e.handleRowDataBound(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,7,e.pemesananService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();const Pe=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_supplier","headerText":"Kode Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kota","headerText":"Kota","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"provinsi","headerText":"Provinsi","type":"string","visible":false}],"filter":[{"field":"kode_supplier","filter":"like","title":"KODE SUPPLIER"},{"field":"nama_supplier","filter":"like","title":"NAMA SUPPLIER"}]}');var Be=a.t(Pe,2);const Re=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var Je=a.t(Re,2);const Ue=["templateToolbar"],Oe=["gridDetail"],Me=["LookupKodeSupplier"],Le=["LookupItem"],Qe=["modalQty"],Ke=["modalHarga"],He=["modalSubtotal"],je=["modalSatuan"];function Ve(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",51),d.TgZ(1,"h5",52),d._uU(2,"Edit Harga"),d.qZA(),d.TgZ(3,"button",53),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",54),d.qZA(),d.qZA(),d.TgZ(5,"div",55),d.TgZ(6,"div",56),d.TgZ(7,"div",57),d.TgZ(8,"input",58,59),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleHargaChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",60),d.TgZ(11,"button",61),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Ye(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",51),d.TgZ(1,"h5",52),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",53),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",54),d.qZA(),d.qZA(),d.TgZ(5,"div",55),d.TgZ(6,"div",56),d.TgZ(7,"div",57),d.TgZ(8,"input",62,63),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",60),d.TgZ(11,"button",61),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function ze(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",51),d.TgZ(1,"h5",52),d._uU(2,"Edit Subtotal"),d.qZA(),d.TgZ(3,"button",53),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",54),d.qZA(),d.qZA(),d.TgZ(5,"div",55),d.TgZ(6,"div",56),d.TgZ(7,"div",57),d.TgZ(8,"input",64,65),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSubtotalChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",60),d.TgZ(11,"button",61),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Xe(t,e){if(1&t&&(d.TgZ(0,"option",69),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function We(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",51),d.TgZ(1,"h5",52),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",53),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",54),d.qZA(),d.qZA(),d.TgZ(5,"div",55),d.TgZ(6,"div",56),d.TgZ(7,"div",57),d.TgZ(8,"select",66,67),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,Xe,2,2,"option",68),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",60),d.TgZ(12,"button",61),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}let $e=(()=>{class t{constructor(t,e,a,i,l,n,o,r,s,d){this.modalService=t,this.formBuilder=e,this.pemesananService=a,this.changeDetection=i,this.renderer=l,this.location=n,this.encryptionService=o,this.activatedRoute=r,this.setupStockroomService=s,this.utilityService=d,this.MaritalStockroomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.inputFieldState="input",this.GridLookUpSupplier=Be,this.GridLookUpItem=Je,this.Detail=[],this.urlSupplier=T.MM.SETUP_DATA.SETUP_SUPPLIER.GET_ALL_BY_PARMS,this.lookupBarangPo=T.MM.PENERIMAAN.TRANSPEMESANAN.GET_LOOKUP_BARANG_PO,this.urlItem=this.lookupBarangPo,this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.subscriptions=[],this.datasatuan=[],this.TglExpiredParams={params:{min:new Date}}}ngOnInit(){this.formKontrak=this.formBuilder.group({nomor_pemesanan:[""],tanggal_pemesanan:[null,l.kI.required],tanggal_expired_pemesanan:[null,l.kI.required],id_stockroom:[0,l.kI.required],id_supplier:["",l.kI.required],keterangan:[""],sub_total_1:[0,l.kI.required],total_disc:[0,l.kI.required],sub_total_2:[0,l.kI.required],total_tax:[0,l.kI.required],total_transaksi_pesan:[0,l.kI.required],jumlah_item_pesan:[0,l.kI.required],user_inputed:[1,[]]}),this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.satuanObj=new _.NB({value:this.detailSelected.kode_satuan_besar,dataSource:this.datasatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem)}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"Add[F1]",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"| [*]=Ubah Banyak | [+]=Satuan |"}],this.setupStockroomService.setDataSource()}ngAfterViewInit(){}onLoadDetailData(t){this.pemesananService.onGetById(t).subscribe(t=>{this.formKontrak.setValue({id_supplier:t.data.id_supplier,nomor_kontrak_spjb:t.data.nomor_kontrak_spjb,nomor_kontrak:t.data.nomor_kontrak,tanggal_ttd_kontrak:t.data.tanggal_ttd_kontrak,tanggal_berlaku_kontrak:t.data.tanggal_berlaku_kontrak,tanggal_berakhir_kontrak:t.data.tanggal_berakhir_kontrak,judul_kontrak:t.data.judul_kontrak,tahun_anggaran:t.data.tahun_anggaran,keterangan:t.data.keterangan,total_transaksi_kontrak:t.data.total_transaksi_kontrak,jumlah_item_kontrak:t.data.jumlah_item_kontrak,user_inputed:1})})}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom();break;case"Back":this.location.back()}}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}heandleSelectedSupplier(t){this.id_supplier.setValue(t.id_supplier),this.urlItem=this.lookupBarangPo+"/"+t.id_supplier}heandleSelectedItem(t){this.pemesananService.addDataDetail({kontrak_id:t.kontrak_id,kontrak_detail_item_id:t.kontrak_detail_item_id,set_harga_order_id:t.set_harga_order_id,set_harga_order_detail_id:t.set_harga_order_detail_id,no_urut:0,id_item:t.id_item,kode_item:t.kode_item,nama_item:t.nama_item,qty_satuan_besar:1,kode_satuan_besar:t.satuans[0].kode_satuan,nama_satuan_besar:t.satuans[0].nama_satuan,harga_satuan_besar:t.harga_satuan,isi:t.satuans[0].isi,qty_pesan:t.satuans[0].isi,harga_satuan:t.harga_satuan,disc_prosentase_1:0,disc_nominal_1:0,disc_prosentase_2:0,disc_nominal_2:0,harga_satuan_brutto:t.harga_satuan,tax_prosentase:0,tax_nominal:0,harga_satuan_netto:t.harga_satuan,sub_total_pesan:t.satuans[0].isi*t.harga_satuan,satuan:t.satuans}),this.selectLastRowdetail()}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.pemesananService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuan,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleQtyChange(t){let e=parseInt(t);this.pemesananService.editBanyak(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSatuanChange(t){this.pemesananService.editSatuan(this.currentIndex,t),this.modalRef.hide(),this.gridDetail.refresh()}handleHargaChange(t){let e=parseInt(t);this.pemesananService.editHarga(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSubtotalChange(t){let e=parseInt(t);this.pemesananService.editSubtotal(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.pemesananService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenHarga(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("HargaValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalHarga,Object.assign({},{class:"modal-lg"}))}onOpenSubtotal(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SubtotalValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{console.log(t,"subTotal hidden"),this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSubtotal,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){this.formKontrak.valid?this.pemesananService.Insert(this.formKontrak.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):alert("isi semua data")}ResetFrom(){this.pemesananService.Reset(),this.formKontrak.reset(),this.LookupKodeSupplier.resetValue()}get id_supplier(){return this.formKontrak.get("id_supplier")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(k.tT),d.Y36(l.qu),d.Y36(Fe),d.Y36(d.sBO),d.Y36(d.Qsj),d.Y36(i.Ye),d.Y36(u.C),d.Y36(o.gz),d.Y36(x.u),d.Y36(A.t))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-input-pemesanan"]],viewQuery:function(t,e){if(1&t&&(d.Gf(Ue,5),d.Gf(Oe,5),d.Gf(Me,5),d.Gf(Le,5),d.Gf(Qe,5),d.Gf(Ke,5),d.Gf(He,5),d.Gf(je,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.templateToolbar=t.first),d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeSupplier=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalHarga=t.first),d.iGM(t=d.CRH())&&(e.modalSubtotal=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first)}},decls:60,vars:89,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_pemesanan",2,"display","none",3,"label","inputFieldState"],["formControlName","tanggal_pemesanan",3,"label","format"],["formControlName","tanggal_expired_pemesanan",3,"label","format"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_stockroom",3,"dataSource","fields","allowFiltering"],["MaritalStockroomDropdown",""],[3,"lookup-url","idKode","idTitle","columns","filter-lookup","label","modal-title","onGetSelectedData"],["LookupKodeSupplier",""],["formControlName","keterangan",3,"label"],[3,"id","editSettings","dataSource","gridLines","toolbar","allowResizing","actionComplete","toolbarClick","load","rowSelected"],["gridDetail",""],["field","kontrak_id","headerText","Kontrak","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kontrak_detail_item_id","headerText","Kontrak","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","set_harga_order_id","headerText","Kontrak","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","set_harga_order_detail_id","headerText","Kontrak","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","barcode","headerText","Barcode","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","width"],["field","qty_satuan_besar","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","kode_satuan_besar","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit","width"],["field","isi","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing","width"],["field","qty_pesan","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","harga_satuan","headerText","Harga Satuan","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_prosentase_1","headerText","D1","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_nominal_1","headerText","D1","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_prosentase_2","headerText","D2","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_nominal_2","headerText","D2","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","harga_satuan_brutto","headerText","harga satuan bruto","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","tax_prosentase","headerText","tax","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","tax_nominal","headerText","tax","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","harga_satuan_netto","headerText","harga satuan netto","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","sub_total_pesan","headerText","Sub Total","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],["formControlName","jumlah_item_pesan",3,"label","isFooter","value","inputFieldState"],[3,"lookup-url","columns","filter-lookup","modal-title","onGetSelectedData"],["LookupItem",""],["modalHarga",""],["modalQty",""],["modalSubtotal",""],["modalSatuan",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","HargaValueId",1,"form-control",3,"keydown.enter"],["hargaValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],["type","text","id","SubtotalValueId",1,"form-control",3,"keydown.enter"],["subtotalValueId",""],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d._UZ(6,"mol-datepicker-syncfusion",6),d.TgZ(7,"div",2),d.TgZ(8,"div",7),d._UZ(9,"atm-label",8),d.qZA(),d.TgZ(10,"div",9),d._UZ(11,"ejs-dropdownlist",10,11),d.ALo(13,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",3),d.TgZ(15,"org-input-look-up-kode",12,13),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedSupplier(t)}),d.qZA(),d._UZ(17,"mol-input-textarea",14),d.qZA(),d.qZA(),d.TgZ(18,"ejs-grid",15,16),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)}),d.ALo(20,"async"),d.TgZ(21,"e-columns"),d._UZ(22,"e-column",17),d._UZ(23,"e-column",18),d._UZ(24,"e-column",19),d._UZ(25,"e-column",20),d._UZ(26,"e-column",21),d._UZ(27,"e-column",22),d._UZ(28,"e-column",23),d._UZ(29,"e-column",24),d._UZ(30,"e-column",25),d._UZ(31,"e-column",26),d._UZ(32,"e-column",27),d._UZ(33,"e-column",28),d._UZ(34,"e-column",29),d._UZ(35,"e-column",30),d._UZ(36,"e-column",31),d._UZ(37,"e-column",32),d._UZ(38,"e-column",33),d._UZ(39,"e-column",34),d._UZ(40,"e-column",35),d._UZ(41,"e-column",36),d._UZ(42,"e-column",37),d._UZ(43,"e-column",38),d._UZ(44,"e-column",39),d.qZA(),d.qZA(),d.TgZ(45,"div",40),d._UZ(46,"div",41),d._UZ(47,"div",42),d.TgZ(48,"div",43),d._UZ(49,"mol-input-numeric",44),d.qZA(),d.qZA(),d.qZA(),d.TgZ(50,"org-look-up",45,46),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedItem(t)}),d.qZA(),d.YNc(52,Ve,13,0,"ng-template",null,47,d.W1O),d.YNc(54,Ye,13,0,"ng-template",null,48,d.W1O),d.YNc(56,ze,13,0,"ng-template",null,49,d.W1O),d.YNc(58,We,14,2,"ng-template",null,50,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formKontrak),d.xp6(3),d.Q6J("label","No Pemesanan")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tgl Pemesanan")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Expired Pemesanan")("format","dd MMMM yyyy"),d.xp6(3),d.Q6J("LabelCaption","Stockrom"),d.xp6(2),d.Q6J("dataSource",d.lcZ(13,85,e.setupStockroomService.dataSource))("fields",e.MaritalStockroomDropdownField)("allowFiltering",!0),d.xp6(4),d.Q6J("lookup-url",e.urlSupplier)("idKode","kode_supplier")("idTitle","nama_supplier")("columns",e.GridLookUpSupplier.columns)("filter-lookup",e.GridLookUpSupplier.filter)("label","Supplier")("modal-title","Data Supplier"),d.xp6(2),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(20,87,e.pemesananService.dataDetail$))("gridLines","Both")("toolbar",e.GridDetailToolbar)("allowResizing",!0),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1)("width",300),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.satuanParams)("width",200),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1)("width",100),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.pemesananService.jumlah_item_pesan)("inputFieldState","detail")("inputFieldState","detail"),d.xp6(1),d.Q6J("lookup-url",e.urlItem)("columns",e.GridLookUpItem.columns)("filter-lookup",e.GridLookUpItem.filter)("modal-title","Data Item"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,w.D,D.rI,se.E,Z.h,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,N.N,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const ta=JSON.parse('{"TrDetail":[{"allowEditing":false,"field":"pemesanan_id","headerText":"Pemesanan Id","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"no_urut","headerText":"No Urut","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"id_item","headerText":"Id Item","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"qty_satuan_besar","headerText":"Banyak","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"editParams":"satuanParams","field":"kode_satuan_besar","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi","headerText":"Isi","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_pesan","headerText":"Qty Pesan","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"qty_terima","headerText":"Qty Terima","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"qty_sisa","headerText":"Qty Sisa","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"harga_satuan","headerText":"Harga Satuan","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":true,"field":"disc_prosentase_1","headerText":"D1","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":true,"field":"disc_prosentase_2","headerText":"D2","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":true,"field":"harga_satuan_brutto","headerText":"Harga Bruto","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":true,"field":"tax_prosentase","headerText":"Tax","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":true,"field":"harga_satuan_netto","headerText":"Harga Neto","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":true,"field":"sub_total_pesan","headerText":"Sub Total","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false}]}');var ea=a.t(ta,2),aa=a(2501),ia=a.n(aa);const la=["modalCanceled"],na=["modalClosed"];function oa(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",18),d.TgZ(1,"h5",19),d._uU(2,"Canceled"),d.qZA(),d.TgZ(3,"button",20),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",21),d.qZA(),d.qZA(),d.TgZ(5,"div",22),d.TgZ(6,"div",23),d.TgZ(7,"div",13),d.TgZ(8,"label",24),d.TgZ(9,"strong"),d._uU(10,"Reason Cancel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",25),d._UZ(12,"input",26),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",27),d.TgZ(14,"button",28),d.NdJ("click",function(){return d.CHM(t),d.oxw().onCalceled()}),d._uU(15,"Cancel Data"),d.qZA(),d.TgZ(16,"button",29),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}function ra(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",18),d.TgZ(1,"h5",19),d._uU(2,"Closed"),d.qZA(),d.TgZ(3,"button",20),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",21),d.qZA(),d.qZA(),d.TgZ(5,"div",22),d.TgZ(6,"div",23),d.TgZ(7,"div",13),d.TgZ(8,"label",30),d.TgZ(9,"strong"),d._uU(10,"Reason Close"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",25),d._UZ(12,"input",31),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",27),d.TgZ(14,"button",28),d.NdJ("click",function(){return d.CHM(t),d.oxw().onClosed()}),d._uU(15,"Close Data"),d.qZA(),d.TgZ(16,"button",29),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}let sa=(()=>{class t{constructor(t,e,a,i,l,n,o){this.formBuilder=t,this.pemesananService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.utilityService=n,this.modalService=o,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Validasi",Captions:"Validasi",Icons1:"fa-check"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"},{Id:"Close",Captions:"Close",Icons1:"fa-power-off"}],this.ConfigGrid=ea}ngOnInit(){this.formInput=this.formBuilder.group({nomor_pemesanan:[""],tanggal_pemesanan:[null],tanggal_expired_pemesanan:[null],nama_stockroom:[0],nama_supplier:[""],keterangan:[""],sub_total_1:[0],total_disc:[0],sub_total_2:[0],total_tax:[0],total_transaksi_pesan:[0],jumlah_item_pesan:[0],user_inputed:[1,[]]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);this.id=t,this.onLoadDetailData(t)}onLoadDetailData(t){this.pemesananService.onGetById(t).subscribe(e=>{this.formInput.setValue({nomor_pemesanan:e.data.nomor_pemesanan,tanggal_pemesanan:e.data.tanggal_pemesanan,tanggal_expired_pemesanan:e.data.tanggal_expired_pemesanan,nama_stockroom:e.data.nama_stockroom,nama_supplier:e.data.nama_supplier,keterangan:e.data.keterangan,sub_total_1:e.data.sub_total_1,total_disc:e.data.total_disc,sub_total_2:e.data.sub_total_2,total_tax:e.data.total_tax,total_transaksi_pesan:e.data.total_transaksi_pesan,jumlah_item_pesan:e.data.jumlah_item_pesan,user_inputed:1}),this.pemesananService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":ia().fire({title:"Apakah anda yakin ingin validasi data?",text:"",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Iya Validasi",cancelButtonText:"Tidak",focusCancel:!0}).then(t=>{t.isConfirmed&&this.onValidation()});break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}));break;case"Close":this.modalRef=this.modalService.show(this.modalClosed,Object.assign({},{class:"modal-lg"}))}}onValidation(){this.pemesananService.Validation(this.id).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Validasi",t.message).then(()=>{this.onLoadDetailData(this.id)})})}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.pemesananService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}onClosed(){let t=document.getElementsByName("reason_closed")[0].value;this.pemesananService.Close(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Close",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(Fe),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye),d.Y36(A.t),d.Y36(k.tT))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-pemesanan"]],viewQuery:function(t,e){if(1&t&&(d.Gf(la,5),d.Gf(na,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.modalCanceled=t.first),d.iGM(t=d.CRH())&&(e.modalClosed=t.first)}},decls:22,vars:22,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_pemesanan",3,"label","inputFieldState"],["formControlName","tanggal_pemesanan",3,"label","format"],["formControlName","tanggal_expired_pemesanan",3,"label","format"],["formControlName","nama_stockroom",3,"label","inputFieldState"],["formControlName","nama_supplier",3,"label","inputFieldState"],["formControlName","keterangan",3,"label"],[3,"grid-DataSource","columns"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],["formControlName","jumlah_item_pesan",3,"label","isFooter","value","inputFieldState"],["modalCanceled",""],["modalClosed",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],["for","reason_closed"],["type","text","name","reason_closed",1,"form-control","form-control-sm"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d._UZ(6,"mol-datepicker-syncfusion",6),d._UZ(7,"mol-input-text",7),d.qZA(),d.TgZ(8,"div",3),d._UZ(9,"mol-input-text",8),d._UZ(10,"mol-input-textarea",9),d.qZA(),d.qZA(),d._UZ(11,"mol-grid",10),d.ALo(12,"async"),d.TgZ(13,"div",11),d._UZ(14,"div",12),d._UZ(15,"div",13),d.TgZ(16,"div",14),d._UZ(17,"mol-input-numeric",15),d.qZA(),d.qZA(),d.qZA(),d.YNc(18,oa,18,0,"ng-template",null,16,d.W1O),d.YNc(20,ra,18,0,"ng-template",null,17,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","No Pemesanan")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tgl Pemesanan")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Exired Pemesanan")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Stockroom")("inputFieldState",e.inputFieldState),d.xp6(2),d.Q6J("label","Supplier")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("grid-DataSource",d.lcZ(12,20,e.pemesananService.dataDetail$))("columns",e.ConfigGrid.TrDetail),d.xp6(6),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.pemesananService.jumlah_item_pesan)("inputFieldState","detail")("inputFieldState","detail"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,Z.h,h.q,E.G],pipes:[i.Ov],styles:[""]}),t})();const da=JSON.parse('{"GridColumns":[{"field":"penerimaan_id","headerText":"Penerimaan Id","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nomor_penerimaan","headerText":"Nomor Penerimaan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_penerimaan","headerText":"Tanggal Penerimaan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"kode_jenis_penerimaan","headerText":"Kode Jenis Penerimaan","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"jenis_penerimaan","headerText":"Jenis Penerimaan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"is_account_payable","headerText":"Is Account Payable","type":"boolean","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"id_stockroom","headerText":"Id Stockroom","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"kode_stockroom","headerText":"Kode Stockroom","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nama_stockroom","headerText":"Nama Stockroom","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"id_supplier","headerText":"Id Supplier","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"kode_supplier","headerText":"Kode Supplier","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nama_supplier","headerText":"Nama Supplier","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"pemesanan_id","headerText":"Pemesanan Id","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nomor_pemesanan","headerText":"Nomor Pemesanan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"nomor_surat_jalan_supplier","headerText":"Nomor Surat Jalan Supplier","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"tanggal_surat_jalan_supplier","headerText":"Tanggal Surat Jalan Supplier","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"id_shipping_method","headerText":"Id Shipping Method","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"shipping_method","headerText":"Shipping Method","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"id_payment_term","headerText":"Id Payment Term","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"payment_term","headerText":"Payment Term","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_jatuh_tempo_bayar","headerText":"Tanggal Jatuh Tempo Bayar","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"keterangan","headerText":"Keterangan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item","headerText":"Jumlah Item","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"sub_total_1","headerText":"Sub Total 1","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"total_disc","headerText":"Total Disc","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"sub_total_2","headerText":"Sub Total 2","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"total_tax","headerText":"Total Tax","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"total_transaksi","headerText":"Total Transaksi","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"biaya_kirim","headerText":"Biaya Kirim","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"biaya_asuransi","headerText":"Biaya Asuransi","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"biaya_lain","headerText":"Biaya Lain","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"potongan_nominal","headerText":"Potongan Nominal","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"potongan_prosentase","headerText":"Potongan Prosentase","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"total_uang_muka","headerText":"Total Uang Muka","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"total_tagihan","headerText":"Total Tagihan","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"user_inputed","headerText":"User Inputed","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"time_inputed","headerText":"Time Inputed","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"user_validated","headerText":"User Validated","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"time_validated","headerText":"Time Validated","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"user_canceled","headerText":"User Canceled","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"time_canceled","headerText":"Time Canceled","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"reason_canceled","headerText":"Reason Canceled","type":"string","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"status","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"}]}');var ua=a.t(da,2);let ca=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=oe.l.TRANSPENERIMAAN,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.sub_total_1=0,this.total_disc=0,this.sub_total_2=0,this.total_tax=0,this.total_transaksi=0,this.jumlah_item=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}getDetailPemesanan(t){return this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_PEMESANAN+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_HEADER_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetAllByParamsSource(t){this.onGetAllByParams(t).subscribe(t=>{t&&this.dataSource.next(t.data)})}setDetail(t){this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t).subscribe(t=>{this.dataDetail=t.data})}addDataDetail(t){this.dataDetail=t,this.sum()}add(t){console.log(this.dataDetail);let e=this.dataDetail.map(t=>t.id_item).indexOf(t.id_item);t.expired_date=null,t.batch_number="",t.qty_satuan_besar=1,t.qty_terima=1*t.isi,this.dataDetail.insertToIndex(e,t)}updateFromInline(t,e,a){let i=e.satuan.findIndex(t=>t.kode_satuan==e.kode_satuan_besar),l=e.satuan[i].isi;e.isi=l,e.qty_terima=e.qty_satuan_besar*l,e.sub_total!=a.sub_total?e.harga_satuan=e.sub_total/e.qty_terima:e.sub_total=e.qty_terima*e.harga_satuan,this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_satuan_besar=e,this.dataDetail[t].qty_terima=e*this.dataDetail[t].isi,this.dataDetail[t].sub_total=e*this.dataDetail[t].isi*this.dataDetail[t].harga_satuan}editHarga(t,e){this.dataDetail[t].harga_satuan=e,this.dataDetail[t].sub_total=e*this.dataDetail[t].qty_terima}editSubtotal(t,e){this.dataDetail[t].sub_total=e,this.dataDetail[t].harga_satuan=e/this.dataDetail[t].qty_terima}editSatuan(t,e){let a=this.dataDetail[t].satuan.findIndex(e=>e.kode_satuan==this.dataDetail[t].kode_satuan_besar),i=this.dataDetail[t].satuan[a].isi;this.dataDetail[t].kode_satuan_besar=e,this.dataDetail[t].isi=i,this.dataDetail[t].qty_terima=this.dataDetail[t].qty_satuan_besar*i,this.dataDetail[t].sub_total=this.dataDetail[t].qty_terima*this.dataDetail[t].harga_satuan}sum(){this.sub_total_1=this.dataDetail.sum("sub_total"),this.sub_total_2=this.dataDetail.sum("sub_total"),this.total_transaksi=this.dataDetail.sum("sub_total"),this.jumlah_item=this.dataDetail.sum("qty_satuan_besar")}Insert(t){return this.dataDetail.map((t,e)=>t.no_urut=e+1),t.details=this.dataDetail,t.sub_total_1=this.sub_total_1,t.total_disc=this.total_disc,t.sub_total_2=this.sub_total_2,t.total_tax=this.total_tax,t.jumlah_item=this.jumlah_item,t.total_transaksi=this.total_transaksi,t.biaya_kirim=0,t.biaya_asuransi=0,t.biaya_lain=0,t.potongan_nominal=0,t.potongan_prosentase=0,t.total_uang_muka=0,t.total_tagihan=this.total_transaksi,this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[],this.total_transaksi=0,this.jumlah_item=0}Validation(t){return this.httpOperationService.defaultPutRequest(this.API.VALIDASI,{penerimaan_id:t}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Cancel(t,e){return this.httpOperationService.defaultPutRequest(this.API.CANCEL,{penerimaan_id:t,reason_canceled:e}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const pa=["GridData"];let ma=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.penerimaanService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=["Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=ua}ngAfterViewInit(){}ngOnInit(){this.penerimaanService.onInitList()}handlePencarianFilter(t){this.penerimaanService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/penerimaan/input-penerimaan");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.penerimaan_id));this.router.navigate(["dashboard/MM/penerimaan/view-penerimaan",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}handleRowDataBound(t){let e=t.data.status_transaksi;"VALIDATED"==e&&t.row.classList.add("e-validation-background"),"CANCELED"==e&&t.row.classList.add("e-canceled-background")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(ca))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-penerimaan"]],viewQuery:function(t,e){if(1&t&&d.Gf(pa,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:10,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","grid-toolbar","row-selected","row-data-bound"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("row-data-bound",function(t){return e.handleRowDataBound(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,8,e.penerimaanService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns)("grid-toolbar",e.GridDataToolbar))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();const ha=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nomor_pemesanan","headerText":"Nomor Pemesanan","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"tanggal_pemesanan","headerText":"Tanggal Pemesanan","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"keterangan","headerText":"Keterangan","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_stockroom","headerText":"Nama Stockroom","type":"string","visible":true}],"filter":[{"field":"tp.nomor_pemesanan","filter":"like","title":"Nomor Pemesanan"},{"field":"sup.nama_supplier","filter":"like","title":"Nama Supplier"}]}');var ga=a.t(ha,2);const fa=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var _a=a.t(fa,2);let ba=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_SHIPPING_METHOD,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Ta=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_PAYMENT_TERM,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Sa=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_JENIS_PENERIMAAN,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const va=["LookupKodePemesanan"],ka=["templateToolbar"],xa=["gridDetail"],Aa=["LookupKodeSupplier"],ya=["LookupItem"],Ia=["modalQty"],wa=["modalHarga"],Da=["modalSubtotal"],Za=["modalSatuan"];function Ca(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",59),d.TgZ(1,"h5",60),d._uU(2,"Edit Harga"),d.qZA(),d.TgZ(3,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",62),d.qZA(),d.qZA(),d.TgZ(5,"div",63),d.TgZ(6,"div",64),d.TgZ(7,"div",65),d.TgZ(8,"input",66,67),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleHargaChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",68),d.TgZ(11,"button",69),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Ea(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",59),d.TgZ(1,"h5",60),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",62),d.qZA(),d.qZA(),d.TgZ(5,"div",63),d.TgZ(6,"div",64),d.TgZ(7,"div",65),d.TgZ(8,"input",70,71),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",68),d.TgZ(11,"button",69),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Na(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",59),d.TgZ(1,"h5",60),d._uU(2,"Edit Subtotal"),d.qZA(),d.TgZ(3,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",62),d.qZA(),d.qZA(),d.TgZ(5,"div",63),d.TgZ(6,"div",64),d.TgZ(7,"div",65),d.TgZ(8,"input",72,73),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSubtotalChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",68),d.TgZ(11,"button",69),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Fa(t,e){if(1&t&&(d.TgZ(0,"option",77),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function Ga(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",59),d.TgZ(1,"h5",60),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",61),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",62),d.qZA(),d.qZA(),d.TgZ(5,"div",63),d.TgZ(6,"div",64),d.TgZ(7,"div",65),d.TgZ(8,"select",74,75),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,Fa,2,2,"option",76),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",68),d.TgZ(12,"button",69),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}let qa=(()=>{class t{constructor(t,e,a,i,l,n,o,r,s,d,u,c,p,m){this.modalService=t,this.formBuilder=e,this.penerimaanService=a,this.changeDetection=i,this.renderer=l,this.location=n,this.encryptionService=o,this.activatedRoute=r,this.setupStockroomService=s,this.utilityService=d,this.setupShippingMethodService=u,this.setupPaymentTermService=c,this.setupJenisPenerimaanService=p,this.pemesananService=m,this.MaritalShippingMethodDropdownField={text:"shipping_method",value:"id_shipping_method"},this.MaritalPaymentTermDropdownField={text:"payment_term",value:"id_payment_term"},this.MaritalJenisPenerimaanDropdownField={text:"jenis_penerimaan",value:"kode_jenis_penerimaan"},this.inputFieldState="input",this.LookupGridPenerimaan=ga,this.GridLookUpItem=_a,this.Detail=[],this.urlSupplier=T.MM.SETUP_DATA.SETUP_SUPPLIER.GET_ALL_BY_PARMS,this.urlItem=T.MM.SETUP_DATA.SETUP_ITEM.GET_ALL_BY_PARMS,this.urlPemesanan=T.MM.PENERIMAAN.TRANSPENERIMAAN.GET_PEMESANA,this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-arrow-left"},{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.subscriptions=[],this.datasatuan=[],this.TglExpiredParams={params:{min:new Date}},this.CommandButton=[{buttonOption:{iconCss:"fas fa-copy fa-sm"}}]}ngOnInit(){this.formInput=this.formBuilder.group({nomor_penerimaan:["",[l.kI.required]],tanggal_penerimaan:[null,[l.kI.required]],kode_jenis_penerimaan:["",[l.kI.required]],id_stockroom:[0,[l.kI.required]],nama_stockroom:["",[l.kI.required]],id_supplier:[0,[l.kI.required]],pemesanan_id:[0,[l.kI.required]],nomor_surat_jalan_supplier:["",[l.kI.required]],tanggal_surat_jalan_supplier:[null,[l.kI.required]],id_shipping_method:[0,[l.kI.required]],id_payment_term:[0,[l.kI.required]],tanggal_jatuh_tempo_bayar:[null,[l.kI.required]],keterangan:["",[l.kI.required]],jumlah_item:[0,[l.kI.required]],sub_total_1:[0,[l.kI.required]],total_disc:[0,[]],sub_total_2:[0,[l.kI.required]],total_tax:[0,[]],total_transaksi:[0,[l.kI.required]],total_tagihan:[0,[]]}),this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.satuanObj=new _.NB({value:this.detailSelected.kode_satuan_besar,dataSource:this.datasatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem)}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"| [*]=Ubah Banyak | [+]=Satuan |"}],this.setupStockroomService.setDataSource(),this.setupShippingMethodService.setDataSource(),this.setupPaymentTermService.setDataSource(),this.setupJenisPenerimaanService.setDataSource(),this.penerimaanService.Reset()}ngAfterViewInit(){}onLoadDetailData(t){this.penerimaanService.onGetById(t).subscribe(t=>{})}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom();break;case"Back":this.location.back()}}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}heandleSelectedSupplier(t){this.id_supplier.setValue(t.id_supplier)}heandleSelectedItem(t){}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.penerimaanService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuan,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleQtyChange(t){let e=parseInt(t);this.penerimaanService.editBanyak(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSatuanChange(t){this.penerimaanService.editSatuan(this.currentIndex,t),this.modalRef.hide(),this.gridDetail.refresh()}handleHargaChange(t){let e=parseInt(t);this.penerimaanService.editHarga(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSubtotalChange(t){let e=parseInt(t);this.penerimaanService.editSubtotal(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleCommandClick(t){console.log(t),this.penerimaanService.add(t.rowData),this.gridDetail.refresh()}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.penerimaanService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),111===t.keyCode&&this.onOpenHarga(),109===t.keyCode&&this.onOpenSubtotal(),107===t.keyCode&&this.onOpenSatuan()}heandleSelectedPemesanan(t){this.pemesanan_id.setValue(t.pemesanan_id),this.id_stockroom.setValue(t.id_stockroom),this.id_supplier.setValue(t.id_supplier),this.nama_stockroom.setValue(t.nama_stockroom),this.pemesananService.getDetail(t.pemesanan_id).subscribe(t=>{let e=t.data;e.forEach(t=>{t.qty_satuan_besar=1,t.qty_terima=1*t.isi,t.sub_total=t.sub_total_pesan,t.satuan=t.satuans}),this.penerimaanService.addDataDetail(e),setTimeout(()=>{this.selectLastRowdetail()},500)})}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenHarga(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("HargaValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalHarga,Object.assign({},{class:"modal-lg"}))}onOpenSubtotal(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SubtotalValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{console.log(t,"subTotal hidden"),this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSubtotal,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){this.penerimaanService.Insert(this.formInput.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})})}ResetFrom(){this.penerimaanService.Reset(),this.formInput.reset(),this.LookupKodePemesanan.resetValue()}get nomor_penerimaan(){return this.formInput.get("nomor_penerimaan")}get tanggal_penerimaan(){return this.formInput.get("tanggal_penerimaan")}get kode_jenis_penerimaan(){return this.formInput.get("kode_jenis_penerimaan")}get id_stockroom(){return this.formInput.get("id_stockroom")}get id_supplier(){return this.formInput.get("id_supplier")}get nama_stockroom(){return this.formInput.get("nama_stockroom")}get pemesanan_id(){return this.formInput.get("pemesanan_id")}get nomor_surat_jalan_supplier(){return this.formInput.get("nomor_surat_jalan_supplier")}get tanggal_surat_jalan_supplier(){return this.formInput.get("tanggal_surat_jalan_supplier")}get id_shipping_method(){return this.formInput.get("id_shipping_method")}get id_payment_term(){return this.formInput.get("id_payment_term")}get tanggal_jatuh_tempo_bayar(){return this.formInput.get("tanggal_jatuh_tempo_bayar")}get keterangan(){return this.formInput.get("keterangan")}get jumlah_item(){return this.formInput.get("jumlah_item")}get sub_total_1(){return this.formInput.get("sub_total_1")}get total_disc(){return this.formInput.get("total_disc")}get sub_total_2(){return this.formInput.get("sub_total_2")}get total_tax(){return this.formInput.get("total_tax")}get total_transaksi(){return this.formInput.get("total_transaksi")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(k.tT),d.Y36(l.qu),d.Y36(ca),d.Y36(d.sBO),d.Y36(d.Qsj),d.Y36(i.Ye),d.Y36(u.C),d.Y36(o.gz),d.Y36(x.u),d.Y36(A.t),d.Y36(ba),d.Y36(Ta),d.Y36(Sa),d.Y36(Fe))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-input-penerimaan"]],viewQuery:function(t,e){if(1&t&&(d.Gf(va,5),d.Gf(ka,5),d.Gf(xa,5),d.Gf(Aa,5),d.Gf(ya,5),d.Gf(Ia,5),d.Gf(wa,5),d.Gf(Da,5),d.Gf(Za,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.LookupKodePemesanan=t.first),d.iGM(t=d.CRH())&&(e.templateToolbar=t.first),d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeSupplier=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalHarga=t.first),d.iGM(t=d.CRH())&&(e.modalSubtotal=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first)}},decls:78,vars:113,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[3,"lookup-url","idKode","modal-title","idTitle","columns","filter-lookup","label","onGetSelectedData"],["LookupKodePemesanan",""],["formControlName","nama_stockroom",3,"label","inputFieldState"],["formControlName","tanggal_penerimaan",3,"label","format"],["formControlName","nomor_penerimaan",3,"label","inputFieldState"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","kode_jenis_penerimaan",3,"dataSource","fields","allowFiltering"],["MaritalJenisPenerimaanDropdown",""],["formControlName","nomor_surat_jalan_supplier",3,"label","inputFieldState"],["formControlName","tanggal_surat_jalan_supplier",3,"label","format"],["id","marital","formControlName","id_shipping_method",3,"dataSource","fields","allowFiltering"],["MaritalShippingMethodDropdown",""],["id","marital","formControlName","id_payment_term",3,"dataSource","fields","allowFiltering"],["MaritalPaymentTermDropdown",""],["formControlName","tanggal_jatuh_tempo_bayar",3,"label","format"],["formControlName","keterangan",3,"label"],[3,"id","editSettings","dataSource","gridLines","toolbar","allowResizing","actionComplete","toolbarClick","load","rowSelected","commandClick"],["gridDetail",""],[3,"width","field","headerText","visible","allowEditing","allowSorting","textAlign","headerTextAlign","commands"],["field","pemesanan_id","headerText","Kontrak","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","pemesanan_detail_id","headerText","Kontrak","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","barcode","headerText","Barcode","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","batch_number","headerText","Batch Number","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","expired_date","headerText","Expired","editType","datepickeredit","textAlign","left","headerTextAlign","center","format","dd MMMM yyyy","type","Date",3,"visible","allowEditing","edit"],["field","qty_satuan_besar","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_satuan_besar","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit"],["field","isi","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","right",3,"visible","allowEditing"],["field","qty_terima","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","right",3,"visible","allowEditing"],["field","harga_satuan","headerText","Harga Satuan","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_prosentase_1","headerText","D1","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_nominal_1","headerText","D1","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_prosentase_2","headerText","D2","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","disc_nominal_2","headerText","D2","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","harga_satuan_brutto","headerText","harga satuan bruto","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","tax_prosentase","headerText","tax","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","tax_nominal","headerText","tax","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","harga_satuan_netto","headerText","harga satuan netto","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","sub_total","headerText","Sub Total","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-3"],[1,"col-sm-4"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],[3,"lookup-url","columns","filter-lookup","modal-title","onGetSelectedData"],["LookupItem",""],["modalHarga",""],["modalQty",""],["modalSubtotal",""],["modalSatuan",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","HargaValueId",1,"form-control",3,"keydown.enter"],["hargaValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],["type","text","id","SubtotalValueId",1,"form-control",3,"keydown.enter"],["subtotalValueId",""],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"org-input-look-up-kode",4,5),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedPemesanan(t)}),d.qZA(),d._UZ(6,"mol-input-text",6),d._UZ(7,"mol-datepicker-syncfusion",7),d._UZ(8,"mol-input-text",8),d.TgZ(9,"div",2),d.TgZ(10,"div",9),d._UZ(11,"atm-label",10),d.qZA(),d.TgZ(12,"div",11),d._UZ(13,"ejs-dropdownlist",12,13),d.ALo(15,"async"),d.qZA(),d.qZA(),d._UZ(16,"mol-input-text",14),d.qZA(),d.TgZ(17,"div",3),d._UZ(18,"mol-datepicker-syncfusion",15),d.TgZ(19,"div",2),d.TgZ(20,"div",9),d._UZ(21,"atm-label",10),d.qZA(),d.TgZ(22,"div",11),d._UZ(23,"ejs-dropdownlist",16,17),d.ALo(25,"async"),d.qZA(),d.qZA(),d.TgZ(26,"div",2),d.TgZ(27,"div",9),d._UZ(28,"atm-label",10),d.qZA(),d.TgZ(29,"div",11),d._UZ(30,"ejs-dropdownlist",18,19),d.ALo(32,"async"),d.qZA(),d.qZA(),d._UZ(33,"mol-datepicker-syncfusion",20),d._UZ(34,"mol-input-textarea",21),d.qZA(),d.qZA(),d.TgZ(35,"ejs-grid",22,23),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)})("commandClick",function(t){return e.handleCommandClick(t)}),d.ALo(37,"async"),d.TgZ(38,"e-columns"),d._UZ(39,"e-column",24),d._UZ(40,"e-column",25),d._UZ(41,"e-column",26),d._UZ(42,"e-column",27),d._UZ(43,"e-column",28),d._UZ(44,"e-column",29),d._UZ(45,"e-column",30),d._UZ(46,"e-column",31),d._UZ(47,"e-column",32),d._UZ(48,"e-column",33),d._UZ(49,"e-column",34),d._UZ(50,"e-column",35),d._UZ(51,"e-column",36),d._UZ(52,"e-column",37),d._UZ(53,"e-column",38),d._UZ(54,"e-column",39),d._UZ(55,"e-column",40),d._UZ(56,"e-column",41),d._UZ(57,"e-column",42),d._UZ(58,"e-column",43),d._UZ(59,"e-column",44),d._UZ(60,"e-column",45),d._UZ(61,"e-column",46),d._UZ(62,"e-column",47),d.qZA(),d.qZA(),d.TgZ(63,"div",48),d._UZ(64,"div",49),d._UZ(65,"div",50),d.TgZ(66,"div",51),d._UZ(67,"mol-input-numeric",52),d.qZA(),d.qZA(),d.qZA(),d.TgZ(68,"org-look-up",53,54),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedItem(t)}),d.qZA(),d.YNc(70,Ca,13,0,"ng-template",null,55,d.W1O),d.YNc(72,Ea,13,0,"ng-template",null,56,d.W1O),d.YNc(74,Na,13,0,"ng-template",null,57,d.W1O),d.YNc(76,Ga,14,2,"ng-template",null,58,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("lookup-url",e.urlPemesanan)("idKode","nomor_pemesanan")("modal-title","Data Pemesanan")("idTitle","nama_supplier")("columns",e.LookupGridPenerimaan.columns)("filter-lookup",e.LookupGridPenerimaan.filter)("label","Pemesanan"),d.xp6(2),d.Q6J("label","Stockroom")("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Tgl Penerimaan")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","No Penerimaan")("inputFieldState",e.inputFieldState),d.xp6(3),d.Q6J("LabelCaption","Jenis Penerimaan"),d.xp6(2),d.Q6J("dataSource",d.lcZ(15,105,e.setupJenisPenerimaanService.dataSource))("fields",e.MaritalJenisPenerimaanDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","No Surat Jalan")("inputFieldState",e.inputFieldState),d.xp6(2),d.Q6J("label","Tgl Surat Jalan")("format","dd MMMM yyyy"),d.xp6(3),d.Q6J("LabelCaption","Shipping Method"),d.xp6(2),d.Q6J("dataSource",d.lcZ(25,107,e.setupShippingMethodService.dataSource))("fields",e.MaritalShippingMethodDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Payment Term"),d.xp6(2),d.Q6J("dataSource",d.lcZ(32,109,e.setupPaymentTermService.dataSource))("fields",e.MaritalPaymentTermDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Tgl Jatuh Tempo")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(37,111,e.penerimaanService.dataDetail$))("gridLines","Both")("toolbar",e.GridDetailToolbar)("allowResizing",!0),d.xp6(4),d.Q6J("width",70)("field","command")("headerText","ADD")("visible",!0)("allowEditing",!1)("allowSorting",!1)("textAlign","Center")("headerTextAlign","Center")("commands",e.CommandButton),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.TglExpiredParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.satuanParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.penerimaanService.jumlah_item)("inputFieldState","detail"),d.xp6(1),d.Q6J("lookup-url",e.urlItem)("columns",e.GridLookUpItem.columns)("filter-lookup",e.GridLookUpItem.filter)("modal-title","Data Item"))},directives:[p.G,l._Y,l.JL,l.sg,se.E,y._,l.JJ,l.u,I.i,w.D,D.rI,Z.h,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,N.N,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const Pa=JSON.parse('{"TrDetail":[{"allowEditing":false,"field":"pemesanan_id","headerText":"Pemesanan Id","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"no_urut","headerText":"No Urut","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"id_item","headerText":"Id Item","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"barcode","headerText":"Barcode","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"batch_number","headerText":"Batch Number","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"expired_date","headerText":"Expired Date","editType":"defaultEdit","type":"Date","format":"dd MMMM yyyy","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"qty_satuan_besar","headerText":"Banyak","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"editParams":"satuanParams","field":"kode_satuan_besar","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi","headerText":"Isi","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_terima","headerText":"Qty","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"harga_satuan","headerText":"Harga Satuan","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"disc_prosentase_1","headerText":"D1","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"disc_prosentase_2","headerText":"D2","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"harga_satuan_brutto","headerText":"Harga Bruto","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"tax_prosentase","headerText":"Tax","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"harga_satuan_netto","headerText":"Harga Neto","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"sub_total","headerText":"Sub Total","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true}]}');var Ba=a.t(Pa,2);const Ra=["modalCanceled"];function Ja(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",30),d.TgZ(1,"h5",31),d._uU(2,"Canceled"),d.qZA(),d.TgZ(3,"button",32),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",33),d.qZA(),d.qZA(),d.TgZ(5,"div",34),d.TgZ(6,"div",35),d.TgZ(7,"div",16),d.TgZ(8,"label",36),d.TgZ(9,"strong"),d._uU(10,"Reason Cancel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",37),d._UZ(12,"input",38),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",39),d.TgZ(14,"button",40),d.NdJ("click",function(){return d.CHM(t),d.oxw().onCalceled()}),d._uU(15,"Cancel Data"),d.qZA(),d.TgZ(16,"button",41),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}let Ua=(()=>{class t{constructor(t,e,a,i,l,n,o){this.formBuilder=t,this.penerimaanService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.utilityService=n,this.modalService=o,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Validasi",Captions:"Validasi",Icons1:"fa-check"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"}],this.ConfigGrid=Ba}ngOnInit(){this.formInput=this.formBuilder.group({nomor_penerimaan:["",[]],tanggal_penerimaan:[null,[]],kode_jenis_penerimaan:["",[]],nama_stockroom:[0,[]],nama_supplier:[0,[]],pemesanan_id:[0,[]],nomor_surat_jalan_supplier:["",[]],tanggal_surat_jalan_supplier:[null,[]],id_shipping_method:[0,[]],id_payment_term:[0,[]],tanggal_jatuh_tempo_bayar:[null,[]],keterangan:["",[]],jumlah_item:[0,[]],sub_total_1:[0,[]],total_disc:[0,[]],sub_total_2:[0,[]],total_tax:[0,[]],total_transaksi:[0,[]],biaya_kirim:[0,[]],biaya_asuransi:[0,[]],biaya_lain:[0,[]],potongan_nominal:[0,[]],potongan_prosentase:[0,[]],total_uang_muka:[0,[]],total_tagihan:[0,[]]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);this.id=t,this.onLoadDetailData(t)}onLoadDetailData(t){this.penerimaanService.onGetById(t).subscribe(e=>{this.formInput.setValue({nomor_penerimaan:e.data.nomor_penerimaan,tanggal_penerimaan:e.data.tanggal_penerimaan,kode_jenis_penerimaan:e.data.kode_jenis_penerimaan,nama_stockroom:e.data.nama_stockroom,nama_supplier:e.data.nama_supplier,pemesanan_id:e.data.pemesanan_id,nomor_surat_jalan_supplier:e.data.nomor_surat_jalan_supplier,tanggal_surat_jalan_supplier:e.data.tanggal_surat_jalan_supplier,id_shipping_method:e.data.id_shipping_method,id_payment_term:e.data.id_payment_term,tanggal_jatuh_tempo_bayar:e.data.tanggal_jatuh_tempo_bayar,keterangan:e.data.keterangan,jumlah_item:e.data.jumlah_item,sub_total_1:e.data.sub_total_1,total_disc:e.data.total_disc,sub_total_2:e.data.sub_total_2,total_tax:e.data.total_tax,total_transaksi:e.data.total_transaksi,biaya_kirim:e.data.biaya_kirim,biaya_asuransi:e.data.biaya_asuransi,biaya_lain:e.data.biaya_lain,potongan_nominal:e.data.potongan_nominal,potongan_prosentase:e.data.potongan_prosentase,total_uang_muka:e.data.total_uang_muka,total_tagihan:e.data.total_tagihan}),this.penerimaanService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":ia().fire({title:"Apakah anda yakin ingin validasi data?",text:"",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Iya Validasi",cancelButtonText:"Tidak",focusCancel:!0}).then(t=>{t.isConfirmed&&this.onValidation()});break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onValidation(){this.penerimaanService.Validation(this.id).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Penerimaan Berhasil Di Validasi",t.message).then(()=>{this.onLoadDetailData(this.id)})})}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.penerimaanService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Penerimaan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}get tanggal_penerimaan(){return this.formInput.get("tanggal_penerimaan")}get tanggal_surat_jalan_supplier(){return this.formInput.get("tanggal_surat_jalan_supplier")}get tanggal_jatuh_tempo_bayar(){return this.formInput.get("tanggal_jatuh_tempo_bayar")}get sub_total_1(){return this.formInput.get("sub_total_1")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(ca),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye),d.Y36(A.t),d.Y36(k.tT))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-penerimaan"]],viewQuery:function(t,e){if(1&t&&d.Gf(Ra,5),2&t){let t;d.iGM(t=d.CRH())&&(e.modalCanceled=t.first)}},decls:37,vars:66,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","tanggal_penerimaan",3,"label","format"],["formControlName","nama_supplier",3,"label","inputFieldState"],["formControlName","nama_stockroom",3,"label","inputFieldState"],["formControlName","nomor_surat_jalan_supplier",3,"label","inputFieldState"],["formControlName","tanggal_surat_jalan_supplier",3,"label","format"],["formControlName","tanggal_jatuh_tempo_bayar",3,"label","format"],["formControlName","keterangan",3,"label"],[1,"card","text-center","mb-2"],[1,"card-body","p-0"],[3,"grid-DataSource","columns"],[1,"card-footer","text-end"],[1,"row"],[1,"col-sm-4"],["formControlName","sub_total_1",3,"label","isFooter","value","inputFieldState"],["formControlName","total_disc",3,"label","isFooter","value","inputFieldState"],["formControlName","sub_total_2",3,"label","isFooter","value","inputFieldState"],["formControlName","total_tax",3,"label","isFooter","value","inputFieldState"],["formControlName","total_transaksi",3,"label","isFooter","value","inputFieldState"],["formControlName","biaya_kirim",3,"label","isFooter","inputFieldState"],["formControlName","biaya_asuransi",3,"label","isFooter","inputFieldState"],["formControlName","biaya_lain",3,"label","isFooter","inputFieldState"],["formControlName","potongan_nominal",3,"label","isFooter","inputFieldState"],["formControlName","total_uang_muka",3,"label","isFooter","inputFieldState"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],["formControlName","total_tagihan",3,"label","isFooter","inputFieldState"],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-datepicker-syncfusion",4),d._UZ(5,"mol-input-text",5),d._UZ(6,"mol-input-text",6),d.qZA(),d.TgZ(7,"div",3),d._UZ(8,"mol-input-text",7),d._UZ(9,"mol-datepicker-syncfusion",8),d._UZ(10,"mol-datepicker-syncfusion",9),d._UZ(11,"mol-input-textarea",10),d.qZA(),d.qZA(),d.TgZ(12,"div",11),d.TgZ(13,"div",12),d._UZ(14,"mol-grid",13),d.ALo(15,"async"),d.qZA(),d.TgZ(16,"div",14),d._uU(17),d.ALo(18,"currency"),d.qZA(),d.qZA(),d.TgZ(19,"div",15),d.TgZ(20,"div",16),d._UZ(21,"mol-input-numeric",17),d._UZ(22,"mol-input-numeric",18),d._UZ(23,"mol-input-numeric",19),d._UZ(24,"mol-input-numeric",20),d._UZ(25,"mol-input-numeric",21),d.qZA(),d.TgZ(26,"div",16),d._UZ(27,"mol-input-numeric",22),d._UZ(28,"mol-input-numeric",23),d._UZ(29,"mol-input-numeric",24),d._UZ(30,"mol-input-numeric",25),d._UZ(31,"mol-input-numeric",26),d.qZA(),d.TgZ(32,"div",16),d._UZ(33,"mol-input-numeric",27),d._UZ(34,"mol-input-numeric",28),d.qZA(),d.qZA(),d.qZA(),d.YNc(35,Ja,18,0,"ng-template",null,29,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Tgl Penerimaan")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Supplier")("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Stockroom")("inputFieldState","detail"),d.xp6(2),d.Q6J("label","No Surat Jalan")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tgl Surat Jalan")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Tgl Jatuh Tempo")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Keterangan"),d.xp6(3),d.Q6J("grid-DataSource",d.lcZ(15,60,e.penerimaanService.dataDetail$))("columns",e.ConfigGrid.TrDetail),d.xp6(3),d.hij(" Total Transaksi : ",d.Dn7(18,62,e.sub_total_1.value,"","")," "),d.xp6(4),d.Q6J("label","Total Transaksi")("isFooter",!0)("value",e.penerimaanService.jumlah_item)("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Diskon")("isFooter",!0)("value",e.penerimaanService.total_disc)("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Total Transaksi")("isFooter",!0)("value",e.penerimaanService.sub_total_2)("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Tax")("isFooter",!0)("value",e.penerimaanService.total_tax)("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Total Transaksi")("isFooter",!0)("value",e.penerimaanService.total_transaksi)("inputFieldState","detail"),d.xp6(2),d.Q6J("label","Biaya Kirim")("isFooter",!0)("inputFieldState","input"),d.xp6(1),d.Q6J("label","Biaya Asuransi")("isFooter",!0)("inputFieldState","input"),d.xp6(1),d.Q6J("label","Biaya Lain")("isFooter",!0)("inputFieldState","input"),d.xp6(1),d.Q6J("label","Potongan")("isFooter",!0)("inputFieldState","input"),d.xp6(1),d.Q6J("label","Uang Muka")("isFooter",!0)("inputFieldState","input"),d.xp6(2),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.penerimaanService.jumlah_item)("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Total Tagihan")("isFooter",!0)("inputFieldState",e.inputFieldState))},directives:[p.G,l._Y,l.JL,l.sg,I.i,l.JJ,l.u,y._,Z.h,h.q,E.G],pipes:[i.Ov,i.H9],styles:[""]}),t})();var Oa=a(6083);const Ma=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_supplier","headerText":"Kode Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kota","headerText":"Kota","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"provinsi","headerText":"Provinsi","type":"string","visible":false}],"filter":[{"field":"kode_supplier","filter":"like","title":"KODE SUPPLIER"},{"field":"nama_supplier","filter":"like","title":"NAMA SUPPLIER"}]}');var La=a.t(Ma,2);const Qa=JSON.parse('{"columns":[{"width":50,"type":"Checkbox","field":"Checkbox","headerTextAlign":"Center","textAlign":"Center"},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var Ka=a.t(Qa,2),Ha=a(7232);let ja=(()=>{class t{constructor(t,e,a){this.notificationService=t,this.httpOperationService=e,this.utilityHelperService=a,this.API=oe.l.SETHARGA_ORDER,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable()}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t,e){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_DETAIL_BY_SUPPLIER+"/"+e,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetDetailByParamsSource(t,e){let a=[];this.onGetAllByParams(t,e).subscribe(t=>{t&&(t.data.forEach(t=>{a.push({no_urut:0,id_item:t.id_item,kode_item:t.nama_item,nama_item:t.nama_item,satuan:t.kode_satuan,harga_order_lama:0,disc_prosentase_1_lama:0,disc_prosentase_2_lama:0,harga_order_netto_lama:0,harga_order:0,disc_prosentase_1:0,disc_prosentase_2:0,harga_order_netto:0})}),this.addDataDetail(a))})}setDetail(t){this.getDetail(t).subscribe(t=>{this.dataDetail=t.data})}getDetail(t){return this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t)}addDataDetail(t){this.dataDetail=[...this.dataDetail,...t],console.log(this.dataDetail)}updateFromInline(t,e,a){let i=e.harga_order-this.utilityHelperService.getDiskon(e.harga_order,e.disc_prosentase_1);e.harga_order_netto=i-this.utilityHelperService.getDiskon(i,e.disc_prosentase_2),this.dataDetail[t]=e}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){}editHarga(t,e){}editSubtotal(t,e){}editSatuan(t,e){}sum(){}Insert(t){return this.dataDetail.map((t,e)=>t.no_urut=e+1),t.details=this.dataDetail,this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[]}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d),d.LFG(Ha.j))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Va=a(801);const Ya=["LookupKodeSupplier"],za=["LookupChecklist"],Xa=["GridDetail"];let Wa=(()=>{class t{constructor(t,e,a,i,l){this.utilityHelperService=t,this.utilityService=e,this.formBuilder=a,this.setHargaOrderService=i,this.location=l,this.urlSupplier=T.MM.SETUP_DATA.SETUP_SUPPLIER.GET_ALL_BY_PARMS,this.urlItemOri=T.MM.PENERIMAAN.SETHARGA_ORDER.GET_ITEM_BY_SUPPLIER,this.LookupGridSupplier=La,this.GridLookUpItem=Ka,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.ButtonNav=[{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}]}ngOnInit(){this.formInput=this.formBuilder.group({tanggal_berlaku:[null,[l.kI.required]],id_supplier:[0,[l.kI.required]],nomor_harga_order:[""]}),this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},"Search"]}heandleSelectedSupplier(t){this.urlItem=this.urlItemOri+"/"+t.id_supplier,this.id_supplier.setValue(t.id_supplier),this.setHargaOrderService.onGetDetailByParamsSource([],t.id_supplier)}handleSelectedRow(t){this.SelectedData=t.data}handleToolbarClick(t){switch(t.item.id){case"add":this.LookupChecklist.hanldeOpenModalLookupChecklist()}}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.setHargaOrderService.updateFromInline(t.rowIndex,t.data,t.rowData),this.GridDetail.refresh())}handleSelectedRecordItem(t){let e=[];t.forEach(t=>{e.push({no_urut:0,id_item:t.id_item,kode_item:t.nama_item,nama_item:t.nama_item,satuan:t.kode_satuan,harga_order_lama:0,disc_prosentase_1_lama:0,disc_prosentase_2_lama:0,harga_order_netto_lama:0,harga_order:0,disc_prosentase_1:0,disc_prosentase_2:0,harga_order_netto:0})}),this.setHargaOrderService.addDataDetail(e),this.GridDetail.refresh()}handleSetGridDataParams(){this.HargaOrderParams={create:()=>(this.HargaOrderElem=document.createElement("input"),this.HargaOrderElem),read:()=>this.HargaOrderObj.value,destroy:()=>{this.HargaOrderObj.destroy()},write:t=>{this.HargaOrderObj=new Oa.No({showSpinButton:!1,cssClass:"text-end",value:t.rowData[t.column.field],change:(function(t){let e=this.GridDetail.element.querySelector("form").ej2_instances[0].getInputElement("harga_order_netto"),a=this.HargaOrderObj-this.utilityHelperService.diskon(this.HargaOrderObj,this.Diskon1Obj);e.value=a-this.utilityHelperService.diskon(a,this.Diskon2Obj)}).bind(this)}),this.HargaOrderObj.appendTo(this.HargaOrderElem)}},this.Diskon1Params={create:()=>(this.Diskon1Elem=document.createElement("input"),this.Diskon1Elem),read:()=>this.Diskon1Obj.value,destroy:()=>{this.Diskon1Obj.destroy()},write:t=>{this.Diskon1Obj=new Oa.No({showSpinButton:!1,cssClass:"text-end",value:t.rowData[t.column.field],change:(function(t){let e=this.GridDetail.element.querySelector("form").ej2_instances[0].getInputElement("harga_order_netto"),a=this.HargaOrderObj-this.utilityHelperService.diskon(this.HargaOrderObj,this.Diskon1Obj);e.value=a-this.utilityHelperService.diskon(a,this.Diskon2Obj)}).bind(this)}),this.Diskon1Obj.appendTo(this.Diskon1Elem)}},this.Diskon1Params={create:()=>(this.Diskon1Elem=document.createElement("input"),this.Diskon1Elem),read:()=>this.Diskon1Obj.value,destroy:()=>{this.Diskon1Obj.destroy()},write:t=>{this.Diskon2Obj=new Oa.No({showSpinButton:!1,cssClass:"text-end",value:t.rowData[t.column.field],change:(function(t){let e=this.GridDetail.element.querySelector("form").ej2_instances[0].getInputElement("harga_order_netto"),a=this.HargaOrderObj-this.utilityHelperService.diskon(this.HargaOrderObj,this.Diskon1Obj);e.value=a-this.utilityHelperService.diskon(a,this.Diskon2Obj)}).bind(this)}),this.Diskon2Obj.appendTo(this.Diskon2Elem)}}}onSetDetail(t){}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom()}}onSave(){this.formInput.valid?this.setHargaOrderService.Insert(this.formInput.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):alert("isi semua data")}ResetFrom(){this.formInput.reset(),this.setHargaOrderService.Reset(),this.LookupKodeSupplier.resetValue()}get tanggal_berlaku(){return this.formInput.get("tanggal_berlaku")}get id_supplier(){return this.formInput.get("id_supplier")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(Ha.j),d.Y36(A.t),d.Y36(l.qu),d.Y36(ja),d.Y36(i.Ye))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-set-harga-order"]],viewQuery:function(t,e){if(1&t&&(d.Gf(Ya,5),d.Gf(za,5),d.Gf(Xa,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.LookupKodeSupplier=t.first),d.iGM(t=d.CRH())&&(e.LookupChecklist=t.first),d.iGM(t=d.CRH())&&(e.GridDetail=t.first)}},decls:30,vars:142,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row"],[1,"col-sm-6"],[3,"lookup-url","idKode","modal-title","idTitle","columns","filter-lookup","label","onGetSelectedData"],["LookupKodeSupplier",""],["formControlName","nomor_harga_order",3,"label"],["formControlName","tanggal_berlaku",3,"label","format"],[3,"LookupTitle","LookupUrl","LookupFilters","GridId","GridColumns","OnGetSelectedRecords"],["LookupChecklist",""],[1,"col-sm-12"],[1,"card"],[1,"card-body","p-0"],[3,"height","dataSource","allowPaging","editSettings","gridLines","toolbar","rowSelected","toolbarClick","actionComplete"],["GridDetail",""],[3,"allowEditing","allowSorting","field","headerText","type","format","textAlign","headerTextAlign","visible","editType"],[3,"allowEditing","allowSorting","field","headerText","textAlign","headerTextAlign","visible","editType","width"],[3,"allowEditing","allowSorting","field","headerText","textAlign","headerTextAlign","visible","editType","format","width"],[3,"allowEditing","allowSorting","field","headerText","textAlign","headerTextAlign","visible","format","width"],[3,"allowEditing","allowSorting","field","headerText","textAlign","headerTextAlign","visible","editType","format","width","edit"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d.TgZ(4,"org-input-look-up-kode",4,5),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedSupplier(t)}),d.qZA(),d._UZ(6,"mol-input-text",6),d._UZ(7,"mol-datepicker-syncfusion",7),d.TgZ(8,"org-look-up-checklist",8,9),d.NdJ("OnGetSelectedRecords",function(t){return e.handleSelectedRecordItem(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",2),d.TgZ(11,"div",10),d.TgZ(12,"div",11),d.TgZ(13,"div",12),d.TgZ(14,"ejs-grid",13,14),d.NdJ("rowSelected",function(t){return e.handleSelectedRow(t)})("toolbarClick",function(t){return e.handleToolbarClick(t)})("actionComplete",function(t){return e.handleActionCompleted(t)}),d.ALo(16,"async"),d.TgZ(17,"e-columns"),d._UZ(18,"e-column",15),d._UZ(19,"e-column",15),d._UZ(20,"e-column",16),d._UZ(21,"e-column",16),d._UZ(22,"e-column",17),d._UZ(23,"e-column",17),d._UZ(24,"e-column",17),d._UZ(25,"e-column",18),d._UZ(26,"e-column",19),d._UZ(27,"e-column",17),d._UZ(28,"e-column",17),d._UZ(29,"e-column",18),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("lookup-url",e.urlSupplier)("idKode","kode_supplier")("modal-title","Data Supplier")("idTitle","nama_supplier")("columns",e.LookupGridSupplier.columns)("filter-lookup",e.LookupGridSupplier.filter)("label","Supplier"),d.xp6(2),d.Q6J("label","Nomor Setting Harga"),d.xp6(1),d.Q6J("label","Tanggal Berlaku")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("LookupTitle","Data Item")("LookupUrl",e.urlItem)("LookupFilters",e.GridLookUpItem.filter)("GridId","LookupChecklistAsalRujukan")("GridColumns",e.GridLookUpItem.columns),d.xp6(6),d.Q6J("height","calc(100vh - 26rem)")("dataSource",d.lcZ(16,140,e.setHargaOrderService.dataDetail$))("allowPaging",!0)("editSettings",e.GridDataEditSettings)("gridLines","Both")("toolbar",e.GridDataToolbar),d.xp6(4),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","no_urut")("headerText","No Urut")("type","number")("format","N")("textAlign","Left")("headerTextAlign","center")("visible",!1)("editType","defaultEdit"),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","id_item")("headerText","Id Item")("type","number")("format","N")("textAlign","Left")("headerTextAlign","center")("visible",!1)("editType","defaultEdit"),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","kode_item")("headerText","Kode Item")("textAlign","Left")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("width",100),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","nama_item")("headerText","Nama Item")("textAlign","Left")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("width",200),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","harga_order_lama")("headerText","Harga Lama")("textAlign","Right")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("format","N2")("width",100),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","disc_prosentase_1_lama")("headerText","D1 Lama")("textAlign","Right")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("format","N2")("width",80),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","disc_prosentase_2_lama")("headerText","D2 Lama")("textAlign","Right")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("format","N2")("width",80),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","harga_order_netto_lama")("headerText","Harga Netto Lama")("textAlign","Right")("headerTextAlign","center")("visible",!0)("format","N2")("width",100),d.xp6(1),d.Q6J("allowEditing",!0)("allowSorting",!1)("field","harga_order")("headerText","Harga Baru")("textAlign","Right")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("format","N2")("width",100)("edit",e.HargaOrderParams),d.xp6(1),d.Q6J("allowEditing",!0)("allowSorting",!1)("field","disc_prosentase_1")("headerText","D1 Baru")("textAlign","Right")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("format","N2")("width",80),d.xp6(1),d.Q6J("allowEditing",!0)("allowSorting",!1)("field","disc_prosentase_2")("headerText","D2 Baru")("textAlign","Right")("headerTextAlign","center")("visible",!0)("editType","defaultEdit")("format","N2")("width",80),d.xp6(1),d.Q6J("allowEditing",!1)("allowSorting",!1)("field","harga_order_netto")("headerText","Harga Netto Baru")("textAlign","Right")("headerTextAlign","center")("visible",!0)("format","N2")("width",100))},directives:[p.G,l._Y,l.JL,l.sg,se.E,y._,l.JJ,l.u,I.i,Va.R,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR],pipes:[i.Ov],styles:[""]}),t})();const $a=JSON.parse('{"GridColumns":[{"field":"retur_pembelian_id","headerText":"Id","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nomor_retur_pembelian","headerText":"Nomor Retur Pembelian","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_retur_pembelian","headerText":"Tanggal Retur Pembelian","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_jatuh_tempo_pelunasan_retur","headerText":"Tanggal Jatuh Tempo Pelunasan Retur","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom","headerText":"Id Stockroom","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nama_stockroom","headerText":"Nama Stockroom","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"id_supplier","headerText":"Id Supplier","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nama_supplier","headerText":"Nama Supplier","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"keterangan","headerText":"Keterangan","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item_retur","headerText":"Jumlah Item","type":"number","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"total_transaksi_retur","headerText":"Total Transaksi Retur","type":"number","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"Status Transaksi","type":"string","format":"","textAlign":"left","visible":true,"editType":"defaultEdit"},{"field":"user_inputed","headerText":"User Inputed","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_inputed","headerText":"Time Inputed","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_validated","headerText":"User Validated","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_validated","headerText":"Time Validated","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_canceled","headerText":"User Canceled","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_canceled","headerText":"Time Canceled","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"reason_canceled","headerText":"Reason Canceled","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_closed","headerText":"User Closed","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_closed","headerText":"Time Closed","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"reason_closed","headerText":"Reason Closed","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"user_revision","headerText":"User Revision","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"time_revision","headerText":"Time Revision","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"reason_revision","headerText":"Reason Revision","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"jumlah_revisi","headerText":"Jumlah Revisi","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"cetakan_ke","headerText":"Cetakan Ke","type":"number","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"},{"field":"nomor_pemesanan_asli","headerText":"Nomor Pemesanan Asli","type":"string","format":"","textAlign":"left","visible":false,"editType":"defaultEdit"}]}');var ti=a.t($a,2);let ei=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.RETUR.RETUR_PEMBELIAN,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.total_transaksi=0,this.jumlah_item=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_HEADER_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetAllByParamsSource(t){this.onGetAllByParams(t).subscribe(t=>{t&&this.dataSource.next(t.data)})}setDetail(t){this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t).subscribe(t=>{this.dataDetail=t.data})}addDataDetail(t){this.dataDetail=[...this.dataDetail,t],this.sum()}updateFromInline(t,e,a){let i=e.satuan.findIndex(t=>t.kode_satuan==e.kode_satuan_besar),l=e.satuan[i].isi;e.isi=l,e.qty_retur=e.qty_satuan_besar*l,e.sub_total=e.harga_satuan_retur*e.qty_retur,this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_satuan_besar=e,this.dataDetail[t].qty_retur=e*this.dataDetail[t].isi,this.dataDetail[t].sub_total=e*this.dataDetail[t].isi*this.dataDetail[t].harga_satuan_retur}editHarga(t,e){this.dataDetail[t].harga_satuan_retur=e,this.dataDetail[t].sub_total=e*this.dataDetail[t].qty_retur}editSubtotal(t,e){this.dataDetail[t].sub_total=e,this.dataDetail[t].harga_satuan_retur=e/this.dataDetail[t].qty_retur}editSatuan(t,e){let a=this.dataDetail[t].satuan.findIndex(e=>e.kode_satuan==this.dataDetail[t].kode_satuan_besar),i=this.dataDetail[t].satuan[a].isi;this.dataDetail[t].kode_satuan_besar=e,this.dataDetail[t].isi=i,this.dataDetail[t].qty_retur=this.dataDetail[t].qty_satuan_besar*i,this.dataDetail[t].sub_total=this.dataDetail[t].qty_retur*this.dataDetail[t].harga_satuan_retur}sum(){this.total_transaksi=this.dataDetail.sum("sub_total"),this.jumlah_item=this.dataDetail.sum("qty_satuan_besar")}Insert(t){return this.dataDetail.map((t,e)=>t.no_urut=e+1),t.details=this.dataDetail,t.jumlah_item_retur=this.jumlah_item,t.total_transaksi_retur=this.total_transaksi,this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[],this.total_transaksi=0,this.jumlah_item=0}Validation(t){return this.httpOperationService.defaultPutRequest(this.API.VALIDASI,{retur_pembelian_id:t}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Cancel(t,e){return this.httpOperationService.defaultPutRequest(this.API.CANCEL,{retur_pembelian_id:t,reason_canceled:e}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ai=["GridData"];let ii=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.returPembelianService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=ti}ngAfterViewInit(){}ngOnInit(){this.returPembelianService.onInitList()}handlePencarianFilter(t){this.returPembelianService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/retur-pembelian/input-retur-pembelian");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.retur_pembelian_id));this.router.navigate(["dashboard/MM/retur-pembelian/view-retur-pembelian",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}handleRowDataBound(t){let e=t.data.status_transaksi;"VALIDATED"==e&&t.row.classList.add("e-validation-background"),"CANCELED"==e&&t.row.classList.add("e-canceled-background"),"CLOSED"==e&&t.row.classList.add("e-closed-background")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(ei))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-retur-pembelian"]],viewQuery:function(t,e){if(1&t&&d.Gf(ai,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:7,vars:7,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected","row-data-bound"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("row-data-bound",function(t){return e.handleRowDataBound(t)}),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",e.returPembelianService.dataSource.getValue())("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],styles:[""]}),t})();const li=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode_batch_number","headerText":"Barcode Batch Number","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"batch_number","headerText":"Batch Number","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"expired_date","headerText":"Expired Date","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"qty_on_hand","headerText":"Sisa Stok","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"harga_beli_terakhir","headerText":"Harga Beli","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"barcode","filter":"like","title":"BARCODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"barcode_batch_number","filter":"like","title":"BARCODE BATCH NUMBER"}]}');var ni=a.t(li,2);const oi=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_supplier","headerText":"Kode Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kota","headerText":"Kota","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"provinsi","headerText":"Provinsi","type":"string","visible":false}],"filter":[{"field":"kode_supplier","filter":"like","title":"KODE SUPPLIER"},{"field":"nama_supplier","filter":"like","title":"NAMA SUPPLIER"}]}');var ri=a.t(oi,2);let si=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_MEKANISME_RETUR,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const di=["templateToolbar"],ui=["gridDetail"],ci=["LookupKodeSupplier"],pi=["LookupItem"],mi=["modalQty"],hi=["modalHarga"],gi=["modalSubtotal"],fi=["modalSatuan"];function _i(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",45),d.TgZ(1,"h5",46),d._uU(2,"Edit Harga"),d.qZA(),d.TgZ(3,"button",47),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",48),d.qZA(),d.qZA(),d.TgZ(5,"div",49),d.TgZ(6,"div",50),d.TgZ(7,"div",51),d.TgZ(8,"input",52,53),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleHargaChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",54),d.TgZ(11,"button",55),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function bi(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",45),d.TgZ(1,"h5",46),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",47),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",48),d.qZA(),d.qZA(),d.TgZ(5,"div",49),d.TgZ(6,"div",50),d.TgZ(7,"div",51),d.TgZ(8,"input",56,57),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",54),d.TgZ(11,"button",55),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Ti(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",45),d.TgZ(1,"h5",46),d._uU(2,"Edit Subtotal"),d.qZA(),d.TgZ(3,"button",47),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",48),d.qZA(),d.qZA(),d.TgZ(5,"div",49),d.TgZ(6,"div",50),d.TgZ(7,"div",51),d.TgZ(8,"input",58,59),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSubtotalChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",54),d.TgZ(11,"button",55),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Si(t,e){if(1&t&&(d.TgZ(0,"option",63),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function vi(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",45),d.TgZ(1,"h5",46),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",47),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",48),d.qZA(),d.qZA(),d.TgZ(5,"div",49),d.TgZ(6,"div",50),d.TgZ(7,"div",51),d.TgZ(8,"select",60,61),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,Si,2,2,"option",62),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",54),d.TgZ(12,"button",55),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}let ki=(()=>{class t{constructor(t,e,a,i,l,n,o,r,s){this.modalService=t,this.formBuilder=e,this.returPembelianService=a,this.changeDetection=i,this.renderer=l,this.location=n,this.setupStockroomService=o,this.setupMekanismeReturService=r,this.utilityService=s,this.MaritalStokroomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.MaritalMekanismeReturDropdownField={text:"mekanisme_retur",value:"id_mekanisme_retur"},this.inputFieldState="input",this.GridLookUpItem=ni,this.LookupGridSupplier=ri,this.Detail=[],this.urlSupplier=T.MM.SETUP_DATA.SETUP_SUPPLIER.GET_ALL_BY_PARMS,this.urlItem=T.MM.RETUR.RETUR_PEMBELIAN.GET_LOOKUP_BARANG_ED_BY_ID_STOCKROOM,this.urlItemStockRoom=this.urlItem,this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-arrow-left"},{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.subscriptions=[],this.datasatuan=[],this.TglExpiredParams={params:{min:new Date}}}ngOnInit(){this.formInput=this.formBuilder.group({nomor_retur_pembelian:["",[l.kI.required]],tanggal_retur_pembelian:[null,[l.kI.required]],tanggal_jatuh_tempo_pelunasan_retur:[null,[l.kI.required]],id_stockroom:[0,[l.kI.required]],id_mekanisme_retur:[0,[l.kI.required]],id_supplier:[0,[l.kI.required]],keterangan:["",[l.kI.required]],jumlah_item_retur:[0,[l.kI.required]],total_transaksi_retur:[0,[l.kI.required]]}),this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.satuanObj=new _.NB({value:this.detailSelected.kode_satuan_besar,dataSource:this.datasatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem)}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"Add[F1]",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"| [*]=Ubah Banyak | [+]=Satuan |"}],this.setupMekanismeReturService.setDataSource(),this.setupStockroomService.setDataSource(),this.returPembelianService.Reset()}ngAfterViewInit(){}onLoadDetailData(t){this.returPembelianService.onGetById(t).subscribe(t=>{})}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom();break;case"Back":this.location.back()}}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}heandleSelectedSupplier(t){this.id_supplier.setValue(t.id_supplier)}heandleSelectedItem(t){this.returPembelianService.addDataDetail({penerimaan_id:0,penerimaan_detail_id:0,no_urut:0,id_item:t.id_item,kode_item:t.kode_item,nama_item:t.nama_item,batch_number:t.batch_number,expired_date:t.expired_date,qty_satuan_besar:1,kode_satuan_besar:t.satuans[0].kode_satuan,isi:t.satuans[0].isi,qty_retur:t.satuans[0].isi,harga_satuan_retur:t.harga_beli_terakhir,sub_total:t.satuans[0].isi*t.harga_beli_terakhir,satuan:t.satuans}),this.selectLastRowdetail()}handleChangeStockRoom(t){this.urlItemStockRoom=this.urlItem+"/"+t.itemData.id_stockroom}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.returPembelianService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuan,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleQtyChange(t){let e=parseInt(t);this.returPembelianService.editBanyak(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSatuanChange(t){this.returPembelianService.editSatuan(this.currentIndex,t),this.modalRef.hide(),this.gridDetail.refresh()}handleHargaChange(t){let e=parseInt(t);this.returPembelianService.editHarga(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSubtotalChange(t){let e=parseInt(t);this.returPembelianService.editSubtotal(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.returPembelianService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),111===t.keyCode&&this.onOpenHarga(),109===t.keyCode&&this.onOpenSubtotal(),107===t.keyCode&&this.onOpenSatuan()}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenHarga(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("HargaValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalHarga,Object.assign({},{class:"modal-lg"}))}onOpenSubtotal(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SubtotalValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{console.log(t,"subTotal hidden"),this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSubtotal,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){this.returPembelianService.Insert(this.formInput.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})})}ResetFrom(){this.returPembelianService.Reset(),this.formInput.reset(),this.LookupKodeSupplier.resetValue()}get nomor_retur_pembelian(){return this.formInput.get("nomor_retur_pembelian")}get tanggal_retur_pembelian(){return this.formInput.get("tanggal_retur_pembelian")}get tanggal_jatuh_tempo_pelunasan_retur(){return this.formInput.get("tanggal_jatuh_tempo_pelunasan_retur")}get id_stockroom(){return this.formInput.get("id_stockroom")}get id_supplier(){return this.formInput.get("id_supplier")}get id_mekanisme_retur(){return this.formInput.get("id_mekanisme_retur")}get keterangan(){return this.formInput.get("keterangan")}get jumlah_item_retur(){return this.formInput.get("jumlah_item_retur")}get total_transaksi_retur(){return this.formInput.get("total_transaksi_retur")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(k.tT),d.Y36(l.qu),d.Y36(ei),d.Y36(d.sBO),d.Y36(d.Qsj),d.Y36(i.Ye),d.Y36(x.u),d.Y36(si),d.Y36(A.t))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-input-retur"]],viewQuery:function(t,e){if(1&t&&(d.Gf(di,5),d.Gf(ui,5),d.Gf(ci,5),d.Gf(pi,5),d.Gf(mi,5),d.Gf(hi,5),d.Gf(gi,5),d.Gf(fi,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.templateToolbar=t.first),d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeSupplier=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalHarga=t.first),d.iGM(t=d.CRH())&&(e.modalSubtotal=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first)}},decls:59,vars:77,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_retur_pembelian",3,"label","inputFieldState"],["formControlName","tanggal_retur_pembelian",3,"label","format"],["formControlName","tanggal_jatuh_tempo_pelunasan_retur",3,"label","format"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_stockroom",3,"dataSource","fields","allowFiltering","change"],["MaritalStokroomDropdown",""],["id","marital","formControlName","id_mekanisme_retur",3,"dataSource","fields","allowFiltering"],["MaritalMekanismeReturDropdown",""],[3,"lookup-url","idKode","modal-title","idTitle","columns","filter-lookup","label","onGetSelectedData"],["LookupKodeSupplier",""],["formControlName","keterangan",3,"label"],[3,"id","editSettings","dataSource","gridLines","toolbar","actionComplete","toolbarClick","load","rowSelected"],["gridDetail",""],["field","penerimaan_id","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","penerimaan_detail_id","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","batch_number","headerText","Batch Number","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","expired_date","headerText","Expired","editType","datepickeredit","textAlign","left","headerTextAlign","center","format","dd MMMM yyyy","type","Date",3,"visible","allowEditing","edit"],["field","qty_satuan_besar","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_satuan_besar","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit"],["field","isi","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","right",3,"visible","allowEditing"],["field","qty_retur","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","right",3,"visible","allowEditing"],["field","harga_satuan_retur","headerText","Harga Satuan Retur","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","sub_total","headerText","Sub Total","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-3"],["formControlName","jumlah_item_retur",3,"label","isFooter","value","inputFieldState"],[1,"col-sm-4"],["formControlName","total_transaksi_retur",3,"label","isFooter","value","inputFieldState"],[3,"lookup-url","columns","filter-lookup","modal-title","onGetSelectedData"],["LookupItem",""],["modalHarga",""],["modalQty",""],["modalSubtotal",""],["modalSatuan",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","HargaValueId",1,"form-control",3,"keydown.enter"],["hargaValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],["type","text","id","SubtotalValueId",1,"form-control",3,"keydown.enter"],["subtotalValueId",""],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d._UZ(6,"mol-datepicker-syncfusion",6),d.TgZ(7,"div",2),d.TgZ(8,"div",7),d._UZ(9,"atm-label",8),d.qZA(),d.TgZ(10,"div",9),d.TgZ(11,"ejs-dropdownlist",10,11),d.NdJ("change",function(t){return e.handleChangeStockRoom(t)}),d.ALo(13,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(14,"div",2),d.TgZ(15,"div",7),d._UZ(16,"atm-label",8),d.qZA(),d.TgZ(17,"div",9),d._UZ(18,"ejs-dropdownlist",12,13),d.ALo(20,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(21,"div",3),d.TgZ(22,"org-input-look-up-kode",14,15),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedSupplier(t)}),d.qZA(),d._UZ(24,"mol-input-textarea",16),d.qZA(),d.qZA(),d.TgZ(25,"ejs-grid",17,18),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)}),d.ALo(27,"async"),d.TgZ(28,"e-columns"),d._UZ(29,"e-column",19),d._UZ(30,"e-column",20),d._UZ(31,"e-column",21),d._UZ(32,"e-column",22),d._UZ(33,"e-column",23),d._UZ(34,"e-column",24),d._UZ(35,"e-column",25),d._UZ(36,"e-column",26),d._UZ(37,"e-column",27),d._UZ(38,"e-column",28),d._UZ(39,"e-column",29),d._UZ(40,"e-column",30),d._UZ(41,"e-column",31),d._UZ(42,"e-column",32),d.qZA(),d.qZA(),d.TgZ(43,"div",33),d._UZ(44,"div",34),d.TgZ(45,"div",35),d._UZ(46,"mol-input-numeric",36),d.qZA(),d.TgZ(47,"div",37),d._UZ(48,"mol-input-numeric",38),d.qZA(),d.qZA(),d.qZA(),d.TgZ(49,"org-look-up",39,40),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedItem(t)}),d.qZA(),d.YNc(51,_i,13,0,"ng-template",null,41,d.W1O),d.YNc(53,bi,13,0,"ng-template",null,42,d.W1O),d.YNc(55,Ti,13,0,"ng-template",null,43,d.W1O),d.YNc(57,vi,14,2,"ng-template",null,44,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Nomor Retur")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Retur Pembelian")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Tanggal Jatuh Tempo")("format","dd MMMM yyyy"),d.xp6(3),d.Q6J("LabelCaption","Stockroom"),d.xp6(2),d.Q6J("dataSource",d.lcZ(13,71,e.setupStockroomService.dataSource))("fields",e.MaritalStokroomDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Mekanisme Retur"),d.xp6(2),d.Q6J("dataSource",d.lcZ(20,73,e.setupMekanismeReturService.dataSource))("fields",e.MaritalMekanismeReturDropdownField)("allowFiltering",!0),d.xp6(4),d.Q6J("lookup-url",e.urlSupplier)("idKode","id_supplier")("modal-title","Data Supplier")("idTitle","nama_supplier")("columns",e.LookupGridSupplier.columns)("filter-lookup",e.LookupGridSupplier.filter)("label","Supplier"),d.xp6(2),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(27,75,e.returPembelianService.dataDetail$))("gridLines","Both")("toolbar",e.GridDetailToolbar),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1)("edit",e.TglExpiredParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.satuanParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(4),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.returPembelianService.jumlah_item)("inputFieldState","detail"),d.xp6(2),d.Q6J("label","Total Transaksi")("isFooter",!0)("value",e.returPembelianService.total_transaksi)("inputFieldState","detail"),d.xp6(1),d.Q6J("lookup-url",e.urlItemStockRoom)("columns",e.GridLookUpItem.columns)("filter-lookup",e.GridLookUpItem.filter)("modal-title","Data Item"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,w.D,D.rI,se.E,Z.h,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,N.N,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const xi=JSON.parse('{"TrDetail":[{"allowEditing":false,"field":"pemesanan_id","headerText":"Pemesanan Id","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"no_urut","headerText":"No Urut","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"id_item","headerText":"Id Item","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"batch_number","headerText":"Batch Number","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"expired_date","headerText":"Expired Date","editType":"defaultEdit","type":"Date","format":"dd MMMM yyyy","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"qty_satuan_besar","headerText":"Banyak","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"editParams":"satuanParams","field":"kode_satuan_besar","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi","headerText":"Isi","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_retur","headerText":"Qty","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"harga_satuan_retur","headerText":"Harga Satuan","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":true,"field":"sub_total","headerText":"Sub Total","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true}]}');var Ai=a.t(xi,2);const yi=["modalCanceled"];function Ii(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",19),d.TgZ(1,"h5",20),d._uU(2,"Canceled"),d.qZA(),d.TgZ(3,"button",21),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",22),d.qZA(),d.qZA(),d.TgZ(5,"div",23),d.TgZ(6,"div",24),d.TgZ(7,"div",16),d.TgZ(8,"label",25),d.TgZ(9,"strong"),d._uU(10,"Reason Cancel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",26),d._UZ(12,"input",27),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",28),d.TgZ(14,"button",29),d.NdJ("click",function(){return d.CHM(t),d.oxw().onCalceled()}),d._uU(15,"Cancel Data"),d.qZA(),d.TgZ(16,"button",30),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}let wi=(()=>{class t{constructor(t,e,a,i,l,n,o){this.formBuilder=t,this.returPembelianService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.modalService=n,this.utilityService=o,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Validasi",Captions:"Validasi",Icons1:"fa-check"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"}],this.ConfigGrid=Ai}ngOnInit(){this.formInput=this.formBuilder.group({nomor_retur_pembelian:["",[]],tanggal_retur_pembelian:[null,[]],tanggal_jatuh_tempo_pelunasan_retur:[null,[]],nama_stockroom:[0,[]],mekanisme_retur:[0,[]],nama_supplier:[0,[]],keterangan:["",[]],jumlah_item_retur:[0,[]],total_transaksi_retur:[0,[]]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);this.id=t,this.onLoadDetailData(t)}onLoadDetailData(t){this.returPembelianService.onGetById(t).subscribe(e=>{this.formInput.setValue({nomor_retur_pembelian:e.data.nomor_retur_pembelian,tanggal_retur_pembelian:e.data.tanggal_retur_pembelian,tanggal_jatuh_tempo_pelunasan_retur:e.data.tanggal_jatuh_tempo_pelunasan_retur,nama_stockroom:e.data.nama_stockroom,nama_supplier:e.data.nama_supplier,mekanisme_retur:e.data.mekanisme_retur,keterangan:e.data.keterangan,total_transaksi_retur:e.data.total_transaksi_retur,jumlah_item_retur:e.data.jumlah_item_retur}),this.returPembelianService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":ia().fire({title:"Apakah anda yakin ingin validasi data?",text:"",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Iya Validasi",cancelButtonText:"Tidak",focusCancel:!0}).then(t=>{t.isConfirmed&&this.onValidation()});break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onValidation(){this.returPembelianService.Validation(this.id).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Validasi",t.message).then(()=>{this.onLoadDetailData(this.id)})})}onCalceled(){let t=document.getElementsByName("reason_canceled")[0].value;this.returPembelianService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Cancel",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(ei),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye),d.Y36(k.tT),d.Y36(A.t))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-retur-pembelian"]],viewQuery:function(t,e){if(1&t&&d.Gf(yi,5),2&t){let t;d.iGM(t=d.CRH())&&(e.modalCanceled=t.first)}},decls:22,vars:26,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_retur_pembelian",3,"label","inputFieldState"],["formControlName","tanggal_retur_pembelian",3,"label","format"],["formControlName","tanggal_jatuh_tempo_pelunasan_retur",3,"label","format"],["formControlName","nama_stockroom",3,"label","inputFieldState"],["formControlName","mekanisme_retur",3,"label","inputFieldState"],["formControlName","nama_supplier",3,"label","inputFieldState"],["formControlName","keterangan",3,"label"],[3,"grid-DataSource","columns"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-3"],["formControlName","jumlah_item_retur",3,"label","isFooter","value","inputFieldState"],[1,"col-sm-4"],["formControlName","total_transaksi_retur",3,"isFooter","label","inputFieldState"],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d._UZ(6,"mol-datepicker-syncfusion",6),d._UZ(7,"mol-input-text",7),d._UZ(8,"mol-input-text",8),d.qZA(),d.TgZ(9,"div",3),d._UZ(10,"mol-input-text",9),d._UZ(11,"mol-input-textarea",10),d.qZA(),d.qZA(),d._UZ(12,"mol-grid",11),d.ALo(13,"async"),d.TgZ(14,"div",12),d._UZ(15,"div",13),d.TgZ(16,"div",14),d._UZ(17,"mol-input-numeric",15),d.qZA(),d.TgZ(18,"div",16),d._UZ(19,"mol-input-numeric",17),d.qZA(),d.qZA(),d.qZA(),d.YNc(20,Ii,18,0,"ng-template",null,18,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Nomor Retur")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Retur Pembelian")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Tanggal Jatuh Tempo")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Stockroom")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Mekanisme Retur")("inputFieldState",e.inputFieldState),d.xp6(2),d.Q6J("label","Supplier")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("grid-DataSource",d.lcZ(13,24,e.returPembelianService.dataDetail$))("columns",e.ConfigGrid.TrDetail),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.returPembelianService.jumlah_item)("inputFieldState","detail"),d.xp6(2),d.Q6J("isFooter",!0)("label","Total Transaksi")("inputFieldState",e.inputFieldState))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,Z.h,h.q,E.G],pipes:[i.Ov],styles:[""]}),t})();const Di=JSON.parse('{"GridColumns":[{"field":"retur_pemakaian_internal_id","headerText":"Id","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nomor_retur_pemakaian_internal","headerText":"Nomor retur Pemakaian","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"tanggal_retur_pemakaian_internal","headerText":"Tanggal Retur Pemakaian","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"id_stockroom","headerText":"Id Stockroom Pemberi","type":"number","format":"","textAlign":"Left","visible":false,"editType":"defaultEdit"},{"field":"nama_stockroom","headerText":"Nama Stockroom","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"keterangan_retur_pemakaian_internal","headerText":"Keterangan","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"pic_pemberi","headerText":"PIC Pemberi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"pic_penerima","headerText":"PIC Penerima","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"time_serah_terima","headerText":"Waktu Serah Terima","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"status_transaksi","headerText":"Status Mutasi","type":"string","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"jumlah_item","headerText":"Jumlah Item","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"},{"field":"total_transaksi","headerText":"Nominal","type":"number","format":"","textAlign":"Left","visible":true,"editType":"defaultEdit"}]}');var Zi=a.t(Di,2);let Ci=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.PEMAKAIAN_INTERNAL.TRANSRETURPEMAKAIANINTERNAL,this.dataSource=new $.X([]),this._dataDetail=new $.X([]),this.dataDetail$=this._dataDetail.asObservable(),this.sub_total_1=0,this.total_disc=0,this.sub_total_2=0,this.total_tax=0,this.total_transaksi=0,this.jumlah_item=0}get dataDetail(){return this._dataDetail.getValue()}set dataDetail(t){this._dataDetail.next(t)}onInitList(){this.dataSource.next([])}onGetById(t){return this.httpOperationService.defaultGetRequest(this.API.GET_BY_ID+"/"+t)}onGetAllByParams(t){return this.httpOperationService.defaultPostRequestByDynamicFilter(this.API.GET_HEADER_BY_PARAMS,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onGetAllByParamsSource(t){this.onGetAllByParams(t).subscribe(t=>{t&&this.dataSource.next(t.data)})}setDetail(t){this.httpOperationService.defaultGetRequest(this.API.GET_DETAIL_BY_ID+"/"+t).subscribe(t=>{this.dataDetail=t.data})}addDataDetail(t){this.dataDetail=[...this.dataDetail,t],this.sum()}updateFromInline(t,e,a){let i=e.satuan.findIndex(t=>t.kode_satuan==e.kode_satuan_besar_retur_pemakaian_internal),l=e.satuan[i].isi;e.isi_retur_pemakaian_internal=l,e.qty_retur_pemakaian_internal=e.qty_satuan_besar_retur_pemakaian_internal*l,this.dataDetail[t]=e,this.sum()}removeDataDetail(t){this.dataDetail.splice(t,1),this.sum()}editBanyak(t,e){this.dataDetail[t].qty_satuan_besar_retur_pemakaian_internal=e,this.dataDetail[t].qty_retur_pemakaian_internal=e*this.dataDetail[t].isi_retur_pemakaian_internal}editSatuan(t,e){let a=this.dataDetail[t].satuan.findIndex(e=>e.kode_satuan==this.dataDetail[t].kode_satuan_besar_retur_pemakaian_internal),i=this.dataDetail[t].satuan[a].isi;this.dataDetail[t].kode_satuan_besar_retur_pemakaian_internal=e,this.dataDetail[t].isi_retur_pemakaian_internal=i,this.dataDetail[t].qty_retur_pemakaian_internal=this.dataDetail[t].qty_satuan_besar_retur_pemakaian_internal*i}sum(){this.total_transaksi=this.dataDetail.sum("qty_satuan_besar_retur_pemakaian_internal"),this.jumlah_item=this.dataDetail.sum("qty_satuan_besar_retur_pemakaian_internal")}Insert(t){return this.dataDetail.map((t,e)=>(t.no_urut=e+1,t.nominal_retur_pemakaian_internal=t.qty_retur_pemakaian_internal*t.hpp_satuan,t)),t.details=this.dataDetail,t.jumlah_item=this.dataDetail.length,t.total_transaksi=this.dataDetail.sum("nominal_retur_pemakaian_internal"),this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Reset(){this.dataDetail=[],this.total_transaksi=0,this.jumlah_item=0}Validation(t){return this.httpOperationService.defaultPutRequest(this.API.VALIDASI,{retur_pemakaian_internal_id:t}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}Cancel(t,e){return this.httpOperationService.defaultPutRequest(this.API.CANCEL,{retur_pemakaian_internal_id:t,reason_canceled:e}).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ei=["GridData"];let Ni=(()=>{class t{constructor(t,e,a){this.router=t,this.encryptionService=e,this.returIssueService=a,this.ButtonNav=[{Id:"Add",Captions:"Add",Icons1:"fa-plus fa-sm"},{Id:"Edit",Captions:"Lihat Detail",Icons1:"fa-edit fa-sm"}],this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.GridConfig=Zi}ngAfterViewInit(){}ngOnInit(){this.returIssueService.onInitList()}handlePencarianFilter(t){this.returIssueService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleinitialized(t){this.GridData=t}handleClickButtonNav(t){switch(t){case"Add":this.router.navigateByUrl("dashboard/MM/retur-issue/input-retur-issue");break;case"Edit":const t=this.encryptionService.encrypt(JSON.stringify(this.SelectedData.retur_pemakaian_internal_id));this.router.navigate(["dashboard/MM/retur-issue/view-retur-issue",t,"GRAHCIS"])}}handleSelectedRow(t){this.SelectedData=t.data,console.log(this.SelectedData)}handleRowDataBound(t){let e=t.data.status_transaksi;"VALIDATED"==e&&t.row.classList.add("e-validation-background"),"CANCELED"==e&&t.row.classList.add("e-canceled-background")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(o.F0),d.Y36(u.C),d.Y36(Ci))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-daftar-retur-issue"]],viewQuery:function(t,e){if(1&t&&d.Gf(Ei,5),2&t){let t;d.iGM(t=d.CRH())&&(e.GridData=t.first)}},decls:8,vars:9,consts:[[3,"ButtonNav","onClickButtonNav"],[1,"row","pt-2"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns","row-selected","row-data-bound"],["GridData",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.TgZ(3,"mol-offcanvas-filter",3),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(4,"div",4),d.TgZ(5,"mol-grid",5,6),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("row-data-bound",function(t){return e.handleRowDataBound(t)}),d.ALo(7,"async"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(3),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(2),d.Q6J("grid-height","calc(100vh - 19rem)")("grid-DataSource",d.lcZ(7,7,e.returIssueService.dataSource))("grid-paging",!0)("grid-lines","Both")("columns",e.GridConfig.GridColumns))},directives:[p.G,m.W,h.q],pipes:[i.Ov],styles:[""]}),t})();const Fi=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_item","headerText":"Kode","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_item","headerText":"Nama Barang","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"string","visible":true}],"filter":[{"field":"kode_item","filter":"like","title":"KODE"},{"field":"nama_item","filter":"like","title":"NAMA"},{"field":"nama_item","filter":"barcode","title":"BARCODE"}]}');var Gi=a.t(Fi,2);const qi=["templateToolbar"],Pi=["gridDetail"],Bi=["LookupItem"],Ri=["modalQty"],Ji=["modalHarga"],Ui=["modalSubtotal"],Oi=["modalSatuan"];function Mi(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"h5",39),d._uU(2,"Edit Qty"),d.qZA(),d.TgZ(3,"button",40),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",41),d.qZA(),d.qZA(),d.TgZ(5,"div",42),d.TgZ(6,"div",43),d.TgZ(7,"div",44),d.TgZ(8,"input",45,46),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleQtyChange(e.value)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(10,"div",47),d.TgZ(11,"button",48),d._uU(12,"Oke"),d.qZA(),d.qZA()}}function Li(t,e){if(1&t&&(d.TgZ(0,"option",52),d._uU(1),d.qZA()),2&t){const t=e.$implicit;d.Q6J("ngValue",t.kode_satuan),d.xp6(1),d.hij("",t.kode_satuan," ")}}function Qi(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",38),d.TgZ(1,"h5",39),d._uU(2,"Edit Satuan"),d.qZA(),d.TgZ(3,"button",40),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",41),d.qZA(),d.qZA(),d.TgZ(5,"div",42),d.TgZ(6,"div",43),d.TgZ(7,"div",44),d.TgZ(8,"select",49,50),d.NdJ("keydown.enter",function(){d.CHM(t);const e=d.MAs(9);return d.oxw().handleSatuanChange(e.value)}),d.YNc(10,Li,2,2,"option",51),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",47),d.TgZ(12,"button",48),d._uU(13,"Oke"),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(8),d.Q6J("value",t.detailSelected.kode_satuan_besar),d.xp6(2),d.Q6J("ngForOf",t.datasatuan)}}let Ki=(()=>{class t{constructor(t,e,a,i,l,n,o,r){this.modalService=t,this.formBuilder=e,this.returIssueService=a,this.changeDetection=i,this.renderer=l,this.location=n,this.setupStockroomService=o,this.utilityService=r,this.MaritalStockroomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.inputFieldState="input",this.GridLookUpItem=Gi,this.Detail=[],this.urlByStockroom=T.MM.SETUP_DATA.SETUP_ITEM.GET_ALL_BY_STOCKROOM,this.urlItem=this.urlByStockroom,this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Reset",Captions:"Reset",Icons1:"fa-redo-alt"},{Id:"Save",Captions:"Save",Icons1:"fa-save"}],this.GridDataEditSettings={allowEditing:!0},this.subscriptions=[],this.datasatuan=[],this.TglExpiredParams={params:{min:new Date}}}ngOnInit(){this.formKontrak=this.formBuilder.group({nomor_retur_pemakaian_internal:["",l.kI.required],tanggal_retur_pemakaian_internal:[null,l.kI.required],id_stockroom:[0,l.kI.required],keterangan_retur_pemakaian_internal:["",l.kI.required],time_serah_terima:[null,l.kI.required],pic_pemberi:["",l.kI.required],pic_penerima:["",l.kI.required],jumlah_item:[0,l.kI.required],total_transaksi:[0,l.kI.required]}),this.satuanParams={create:()=>(this.satuanElem=document.createElement("input"),this.satuanElem),read:()=>this.satuanObj.text,destroy:()=>{this.satuanObj.destroy()},write:()=>{this.satuanObj=new _.NB({value:this.detailSelected.kode_satuan_besar_retur_pemakaian_internal,dataSource:this.datasatuan,fields:{value:"kode_satuan",text:"kode_satuan"},enabled:!0,placeholder:"Select a Satuan",floatLabelType:"Never"}),this.satuanObj.appendTo(this.satuanElem)}},this.globalListenFunc=this.renderer.listen("document","keydown",t=>{112==t.keyCode&&(this.LookupItem.onOpenModal(),t.preventDefault())}),this.GridDetailToolbar=[{text:"Add[F1]",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"| [*]=Ubah Banyak | [+]=Satuan |"}],this.setupStockroomService.setDataSource(),this.returIssueService.Reset()}ngAfterViewInit(){}onLoadDetailData(t){this.returIssueService.onGetById(t).subscribe(t=>{this.formKontrak.setValue({id_supplier:t.data.id_supplier,nomor_kontrak_spjb:t.data.nomor_kontrak_spjb,nomor_kontrak:t.data.nomor_kontrak,tanggal_ttd_kontrak:t.data.tanggal_ttd_kontrak,tanggal_berlaku_kontrak:t.data.tanggal_berlaku_kontrak,tanggal_berakhir_kontrak:t.data.tanggal_berakhir_kontrak,judul_kontrak:t.data.judul_kontrak,tahun_anggaran:t.data.tahun_anggaran,keterangan:t.data.keterangan,total_transaksi_kontrak:t.data.total_transaksi_kontrak,jumlah_item_kontrak:t.data.jumlah_item_kontrak,user_inputed:1})})}onClickButtonNav(t){switch(t){case"Save":this.onSave();break;case"Reset":this.ResetFrom();break;case"Back":this.location.back()}}onToolbarClick(t){switch(t.item.id){case"add":this.LookupItem.onOpenModal()}}heandleSelectedItem(t){this.returIssueService.addDataDetail({no_urut:0,id_item:t.id_item,kode_item:t.kode_item,nama_item:t.nama_item,qty_satuan_besar_retur_pemakaian_internal:1,kode_satuan_besar_retur_pemakaian_internal:t.satuans[0].kode_satuan,isi_retur_pemakaian_internal:t.satuans[0].isi,qty_retur_pemakaian_internal:t.satuans[0].isi,hpp_satuan:t.hpp_average,nominal_retur_pemakaian_internal:t.hpp_average*t.satuans[0].isi,satuan:t.satuans}),this.selectLastRowdetail()}handleActionCompleted(t){"save"==t.requestType&&(console.log(t),this.returIssueService.updateFromInline(t.rowIndex,t.data,t.rowData),this.gridDetail.refresh())}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}handleSelectdRow(t){this.currentIndex=t.rowIndex,this.datasatuan=t.data.satuan,this.detailSelected=t.data,this.satuanVal=t.data.kode_satuan_besar}handleQtyChange(t){let e=parseInt(t);this.returIssueService.editBanyak(this.currentIndex,e),this.modalRef.hide(),this.gridDetail.refresh()}handleSatuanChange(t){this.returIssueService.editSatuan(this.currentIndex,t),this.modalRef.hide(),this.gridDetail.refresh()}handleStockroomChange(t){this.urlItem=this.urlByStockroom+"/"+t.value}KeyDownHandler(t){106===t.keyCode&&this.onOpenQty(),46===t.keyCode&&(this.returIssueService.removeDataDetail(this.currentIndex),this.gridDetail.refresh(),setTimeout(()=>{0!=this.currentIndex&&(this.gridDetail.selectedRowIndex=0)},100)),107===t.keyCode&&this.onOpenSatuan()}onOpenQty(){const t=(0,b.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("QtyValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalQty,Object.assign({},{class:"modal-lg"}))}onOpenHarga(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("HargaValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalHarga,Object.assign({},{class:"modal-lg"}))}onOpenSubtotal(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SubtotalValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{console.log(t,"subTotal hidden"),this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSubtotal,Object.assign({},{class:"modal-lg"}))}onOpenSatuan(){const t=(0,b.aj)(this.modalService.onShown,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("SatuanValueId").focus()},100)})),this.subscriptions.push(this.modalService.onHidden.subscribe(t=>{this.gridDetail.selectedRowIndex=this.currentIndex,this.gridDetail.selectRows([this.currentIndex]),this.unsubscribe()})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.modalSatuan,Object.assign({},{class:"modal-lg"}))}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}selectLastRowdetail(){setTimeout(()=>{this.gridDetail.selectedRowIndex=this.gridDetail.dataSource.length-1},150)}onSave(){this.formKontrak.valid?this.returIssueService.Insert(this.formKontrak.value).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):alert("isi semua data")}ResetFrom(){this.returIssueService.Reset(),this.formKontrak.reset()}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(k.tT),d.Y36(l.qu),d.Y36(Ci),d.Y36(d.sBO),d.Y36(d.Qsj),d.Y36(i.Ye),d.Y36(x.u),d.Y36(A.t))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-input-retur-issue"]],viewQuery:function(t,e){if(1&t&&(d.Gf(qi,5),d.Gf(Pi,5),d.Gf(Bi,5),d.Gf(Ri,5),d.Gf(Ji,5),d.Gf(Ui,5),d.Gf(Oi,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.templateToolbar=t.first),d.iGM(t=d.CRH())&&(e.gridDetail=t.first),d.iGM(t=d.CRH())&&(e.LookupItem=t.first),d.iGM(t=d.CRH())&&(e.modalQty=t.first),d.iGM(t=d.CRH())&&(e.modalHarga=t.first),d.iGM(t=d.CRH())&&(e.modalSubtotal=t.first),d.iGM(t=d.CRH())&&(e.modalSatuan=t.first)}},decls:45,vars:61,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_retur_pemakaian_internal",3,"label","inputFieldState"],["formControlName","tanggal_retur_pemakaian_internal",3,"label","format"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_stockroom",3,"dataSource","fields","allowFiltering","change"],["MaritalStockroomDropdown",""],["formControlName","time_serah_terima",3,"label","format"],["formControlName","pic_pemberi",3,"label","inputFieldState"],["formControlName","pic_penerima",3,"label","inputFieldState"],["formControlName","keterangan_retur_pemakaian_internal",3,"label"],[3,"id","editSettings","dataSource","gridLines","toolbar","allowResizing","actionComplete","toolbarClick","load","rowSelected"],["gridDetail",""],["field","no_urut","headerText","urut","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","id_item","headerText","id_item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","kode_item","headerText","Kode Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","nama_item","headerText","Nama Item","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","batch_number","headerText","Batch Number","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],["field","expired_date","headerText","Expired","editType","datepickeredit","textAlign","left","headerTextAlign","center","format","dd MMMM yyyy","type","Date",3,"visible","allowEditing","edit"],["field","qty_satuan_besar_retur_pemakaian_internal","headerText","Banyak","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","kode_satuan_besar_retur_pemakaian_internal","headerText","Satuan","editType","dropdownedit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing","edit"],["field","isi_retur_pemakaian_internal","headerText","Isi","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","qty_retur_pemakaian_internal","headerText","QTY","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","nominal_retur_pemakaian_internal","headerText","Nominal","editType","defaultEdit","textAlign","right","headerTextAlign","center","format","N2",3,"visible","allowEditing"],["field","keterangan_retur_pemakaian_internal","headerText","Keterangan","editType","defaultEdit","textAlign","left","headerTextAlign","center",3,"visible","allowEditing"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-3"],[1,"col-sm-4"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],[3,"lookup-url","columns","filter-lookup","modal-title","onGetSelectedData"],["LookupItem",""],["modalQty",""],["modalSatuan",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm-12"],["type","text","id","QtyValueId",1,"form-control",3,"keydown.enter"],["qtyValueId",""],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary"],["id","SatuanValueId","multiple","",1,"form-control",3,"value","keydown.enter"],["satuanValueId",""],[3,"ngValue",4,"ngFor","ngForOf"],[3,"ngValue"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d.TgZ(6,"div",2),d.TgZ(7,"div",6),d._UZ(8,"atm-label",7),d.qZA(),d.TgZ(9,"div",8),d.TgZ(10,"ejs-dropdownlist",9,10),d.NdJ("change",function(t){return e.handleStockroomChange(t)}),d.ALo(12,"async"),d.qZA(),d.qZA(),d.qZA(),d._UZ(13,"mol-datepicker-syncfusion",11),d.qZA(),d.TgZ(14,"div",3),d._UZ(15,"mol-input-text",12),d._UZ(16,"mol-input-text",13),d._UZ(17,"mol-input-textarea",14),d.qZA(),d.qZA(),d.TgZ(18,"ejs-grid",15,16),d.NdJ("actionComplete",function(t){return e.handleActionCompleted(t)})("toolbarClick",function(t){return e.onToolbarClick(t)})("load",function(t){return e.handleLoadGrid(t)})("rowSelected",function(t){return e.handleSelectdRow(t)}),d.ALo(20,"async"),d.TgZ(21,"e-columns"),d._UZ(22,"e-column",17),d._UZ(23,"e-column",18),d._UZ(24,"e-column",19),d._UZ(25,"e-column",20),d._UZ(26,"e-column",21),d._UZ(27,"e-column",22),d._UZ(28,"e-column",23),d._UZ(29,"e-column",24),d._UZ(30,"e-column",25),d._UZ(31,"e-column",26),d._UZ(32,"e-column",27),d._UZ(33,"e-column",28),d.qZA(),d.qZA(),d.TgZ(34,"div",29),d._UZ(35,"div",30),d._UZ(36,"div",31),d.TgZ(37,"div",32),d._UZ(38,"mol-input-numeric",33),d.qZA(),d.qZA(),d.qZA(),d.TgZ(39,"org-look-up",34,35),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedItem(t)}),d.qZA(),d.YNc(41,Mi,13,0,"ng-template",null,36,d.W1O),d.YNc(43,Qi,14,2,"ng-template",null,37,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formKontrak),d.xp6(3),d.Q6J("label","Nomor Pemakian")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Pemakaian")("format","dd MMMM yyyy"),d.xp6(3),d.Q6J("LabelCaption","Stockroom"),d.xp6(2),d.Q6J("dataSource",d.lcZ(12,57,e.setupStockroomService.dataSource))("fields",e.MaritalStockroomDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Tanggal Serah Terima")("format","dd MMMM yyyy HH:mm:ss"),d.xp6(2),d.Q6J("label","PIC Pemberi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","PIC Penerima")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Keterangan"),d.xp6(1),d.Q6J("id","GridDeail")("editSettings",e.GridDataEditSettings)("dataSource",d.lcZ(20,59,e.returIssueService.dataDetail$))("gridLines","Both")("toolbar",e.GridDetailToolbar)("allowResizing",!0),d.xp6(4),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.TglExpiredParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0)("edit",e.satuanParams),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!1)("allowEditing",!1),d.xp6(1),d.Q6J("visible",!0)("allowEditing",!0),d.xp6(5),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.returIssueService.jumlah_item)("inputFieldState","detail"),d.xp6(1),d.Q6J("lookup-url",e.urlItem)("columns",e.GridLookUpItem.columns)("filter-lookup",e.GridLookUpItem.filter)("modal-title","Data Item"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,w.D,D.rI,Z.h,C.MwP,C.SRY,C.NQQ,C.iKq,C.fMR,E.G,N.N,i.sg,l.YN,l.Kr],pipes:[i.Ov],styles:[""]}),t})();const Hi=JSON.parse('{"TrDetail":[{"allowEditing":false,"field":"kode_item","headerText":"Kode Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nama_item","headerText":"Nama Obat","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"qty_satuan_besar_retur_pemakaian_internal","headerText":"Banyak","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"editParams":"satuanParams","field":"nama_satuan_besar_retur_pemakaian_internal","headerText":"Satuan","editType":"dropdownedit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"isi_retur_pemakaian_internal","headerText":"Isi","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","visible":true},{"allowEditing":false,"field":"qty_retur_pemakaian_internal","headerText":"Qty","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":true},{"allowEditing":false,"field":"nominal_retur_pemakaian_internal","headerText":"Nominal","editType":"defaultEdit","type":"","format":"N2","textAlign":"right","headerTextAlign":"Center","visible":false},{"allowEditing":false,"field":"keterangan_retur_pemakaian_internal","headerText":"Keterangan","editType":"defaultEdit","type":"","format":"","textAlign":"left","headerTextAlign":"Center","visible":true}]}');var ji=a.t(Hi,2);const Vi=["modalCanceled"];function Yi(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"div",18),d.TgZ(1,"h5",19),d._uU(2,"Canceled"),d.qZA(),d.TgZ(3,"button",20),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._UZ(4,"i",21),d.qZA(),d.qZA(),d.TgZ(5,"div",22),d.TgZ(6,"div",23),d.TgZ(7,"div",14),d.TgZ(8,"label",24),d.TgZ(9,"strong"),d._uU(10,"Reason Cancel"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(11,"div",25),d._UZ(12,"input",26),d.qZA(),d.qZA(),d.qZA(),d.TgZ(13,"div",27),d.TgZ(14,"button",28),d.NdJ("click",function(){return d.CHM(t),d.oxw().onCalceled()}),d._uU(15,"Cancel Data"),d.qZA(),d.TgZ(16,"button",29),d.NdJ("click",function(){return d.CHM(t),d.oxw().modalRef.hide()}),d._uU(17,"Batal"),d.qZA(),d.qZA()}}let zi=(()=>{class t{constructor(t,e,a,i,l,n,o){this.formBuilder=t,this.returIssueService=e,this.encryptionService=a,this.activatedRoute=i,this.location=l,this.modalService=n,this.utilityService=o,this.inputFieldState="detail",this.ButtonNav=[{Id:"Back",Captions:"Back",Icons1:"fa-chevron-left"},{Id:"Validasi",Captions:"Validasi",Icons1:"fa-check"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-times"}],this.ConfigGrid=ji,this.id=0}ngOnInit(){this.formInput=this.formBuilder.group({nomor_retur_pemakaian_internal:[""],tanggal_retur_pemakaian_internal:[null],nama_stockroom:[0],keterangan_retur_pemakaian_internal:[0],pic_pemberi:[0],pic_penerima:[0],jumlah_item:[0],total_transaksi:[0]})}ngAfterViewInit(){let t=this.encryptionService.decrypt(this.activatedRoute.snapshot.params.id);console.log(t),this.onLoadDetailData(t)}onLoadDetailData(t){this.returIssueService.onGetById(t).subscribe(e=>{this.id=parseInt(t),this.formInput.setValue({nomor_retur_pemakaian_internal:e.data.nomor_retur_pemakaian_internal,tanggal_retur_pemakaian_internal:e.data.tanggal_retur_pemakaian_internal,nama_stockroom:e.data.nama_stockroom,keterangan_retur_pemakaian_internal:e.data.keterangan_retur_pemakaian_internal,pic_pemberi:e.data.pic_pemberi,pic_penerima:e.data.pic_penerima,jumlah_item:e.data.jumlah_item,total_transaksi:e.data.total_transaksi}),this.returIssueService.setDetail(t)})}onClickButtonNav(t){switch(t){case"Back":this.location.back();break;case"Validasi":ia().fire({title:"Apakah anda yakin ingin validasi data?",text:"",icon:"info",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Iya Validasi",cancelButtonText:"Tidak",focusCancel:!0}).then(t=>{t.isConfirmed&&this.onValidation()});break;case"Cancel":this.modalRef=this.modalService.show(this.modalCanceled,Object.assign({},{class:"modal-lg"}))}}onValidation(){this.returIssueService.Validation(this.id).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Validasi",t.message).then(()=>{this.onLoadDetailData(this.id)})})}onCalceled(){let t=document.getElementsByName("reason_closed")[0].value;this.returIssueService.Cancel(this.id,t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Data Pemesanan Berhasil Di Close",t.message).then(()=>{this.onLoadDetailData(this.id),this.modalRef.hide()})})}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(Ci),d.Y36(u.C),d.Y36(o.gz),d.Y36(i.Ye),d.Y36(k.tT),d.Y36(A.t))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-view-retur-issue"]],viewQuery:function(t,e){if(1&t&&d.Gf(Vi,5),2&t){let t;d.iGM(t=d.CRH())&&(e.modalCanceled=t.first)}},decls:21,vars:23,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","nomor_retur_pemakaian_internal",3,"label","inputFieldState"],["formControlName","tanggal_retur_pemakaian_internal",3,"label","format"],["formControlName","nama_stockroom",3,"label","inputFieldState"],["formControlName","time_serah_terima",3,"label","format"],["formControlName","pic_pemberi",3,"label","inputFieldState"],["formControlName","pic_penerima",3,"label","inputFieldState"],["formControlName","keterangan_retur_pemakaian_internal",3,"label"],[3,"grid-DataSource","columns"],[1,"row"],[1,"col-sm-5"],[1,"col-sm-4"],[1,"col-sm-3"],["formControlName","jumlah_item",3,"label","isFooter","value","inputFieldState"],["modalCanceled",""],[1,"modal-header","px-2","py-1","background-biru-muda","text-white"],[1,"modal-title","pull-left"],["type","button","aria-label","Close",1,"btn","pull-right","text-white",3,"click"],[1,"fas","fa-window-close"],[1,"modal-body","p-10"],[1,"row","mx-0","my-1"],["for","reason_canceled"],[1,"col-sm-8"],["type","text","name","reason_canceled",1,"form-control","form-control-sm"],[1,"modal-footer","background-abu-muda"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"form",1),d.TgZ(2,"div",2),d.TgZ(3,"div",3),d._UZ(4,"mol-input-text",4),d._UZ(5,"mol-datepicker-syncfusion",5),d._UZ(6,"mol-input-text",6),d._UZ(7,"mol-datepicker-syncfusion",7),d.qZA(),d.TgZ(8,"div",3),d._UZ(9,"mol-input-text",8),d._UZ(10,"mol-input-text",9),d._UZ(11,"mol-input-textarea",10),d.qZA(),d.qZA(),d._UZ(12,"mol-grid",11),d.ALo(13,"async"),d.TgZ(14,"div",12),d._UZ(15,"div",13),d._UZ(16,"div",14),d.TgZ(17,"div",15),d._UZ(18,"mol-input-numeric",16),d.qZA(),d.qZA(),d.qZA(),d.YNc(19,Yi,18,0,"ng-template",null,17,d.W1O),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("formGroup",e.formInput),d.xp6(3),d.Q6J("label","Nomor Pemakaian")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Pemakaian")("format","dd MMMM yyyy"),d.xp6(1),d.Q6J("label","Stokroom")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Serah Terima")("format","dd MMMM yyyy HH:mm:ss"),d.xp6(2),d.Q6J("label","PIC Pemberi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","PIC Penerima")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Keretangan"),d.xp6(1),d.Q6J("grid-DataSource",d.lcZ(13,21,e.returIssueService.dataDetail$))("columns",e.ConfigGrid.TrDetail),d.xp6(6),d.Q6J("label","Jumlah Item")("isFooter",!0)("value",e.returIssueService.jumlah_item)("inputFieldState","detail"))},directives:[p.G,l._Y,l.JL,l.sg,y._,l.JJ,l.u,I.i,Z.h,h.q,E.G],pipes:[i.Ov],styles:[""]}),t})();const Xi=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_coa","headerText":"Id COA","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_coa_parent","headerText":"Id COA Parent","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_grup_coa","headerText":"Id Group Coa","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_coa","headerText":"Group COA","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"deskripsi","headerText":"Description","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"saldo","headerText":"Saldo","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Wi=a.t(Xi,2);const $i=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"id_coa","headerText":"Id","type":"number","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_coa","headerText":"Kode Coa","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"deskripsi","headerText":"Deskripsi","type":"string","visible":true}],"filter":[{"field":"kode_coa","filter":"like","title":"KODE"},{"field":"deskripsi","filter":"like","title":"NAMA"}]}');var tl=a.t($i,2);const el=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"id_grup_coa","headerText":"Id","type":"number","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"grup_coa","headerText":"Group Coa","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"deskripsi","headerText":"Deskripsi","type":"string","visible":true}],"filter":[{"field":"id_grup_coa","filter":"like","title":"GROUP COA"},{"field":"grup_coa","filter":"like","title":"DESKRIPSI"}]}');var al=a.t(el,2);let il=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_COA}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ll=a(651),nl=a(8511),ol=a(1753),rl=a(8952),sl=a(4550);const dl=["OrgTabsRef"],ul=["LookupKodeCoaParent"],cl=["LookupGroupCoa"],pl=function(){return[]};let ml=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupCoaService=a,this.LookupCoaParent=tl,this.LookupGridGroupCoa=al,this.urlCoaParent=T.MM.SETUP_DATA.SETUP_COA.GET_ALL_BY_PARMS,this.urlGroupCoa=T.MM.SETUP_DATA.SETUP_GROUP_COA.GET_ALL_BY_PARMS,this.GridConfig=Wi,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_coa:[null,[]],id_coa_parent:[null,[]],id_grup_coa:[0,[l.kI.required]],kode_coa:["",[l.kI.required]],deskripsi:["",[l.kI.required]],saldo:["",[l.kI.required]],is_active:[!1,[]],user_created:["",[l.kI.required]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.kode_Coa)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}heandleSelectedCoaParent(t){this.id_coa_parent.setValue(t.id_coa)}heandleSelectedGroupCoa(t){this.id_grup_coa.setValue(t.id_grup_coa)}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.LookupKodeCoaParent.resetValue(),this.LookupGroupCoa.resetValue(),this.id_coa_parent.setValue(""),this.id_grup_coa.setValue(""),this.kode_coa.setValue(""),this.deskripsi.setValue(""),this.saldo.setValue(""),this.is_active.setValue("")}GetAllData(){this.setupCoaService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataCoa(){console.log("Add")}SetFrom(t){delete t.time_created,delete t.user_deactived,delete t.time_deactived,this.FormInputData.reset(),this.FormInputData.setValue(t),this.LookupGroupCoa.titleValue="12345",this.LookupKodeCoaParent.kodeValue="111",this.LookupKodeCoaParent.titleValue="2222"}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupCoaService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupCoaService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_coa:e};console.log("data",a),console.log("is_active",t),t?this.setupCoaService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupCoaService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get id_coa(){return this.FormInputData.get("id_coa")}get id_coa_parent(){return this.FormInputData.get("id_coa_parent")}get id_grup_coa(){return this.FormInputData.get("id_grup_coa")}get kode_coa(){return this.FormInputData.get("kode_coa")}get deskripsi(){return this.FormInputData.get("deskripsi")}get saldo(){return this.FormInputData.get("saldo")}get is_active(){return this.FormInputData.get("is_active")}get user_created(){return this.FormInputData.get("user_created")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(il))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-coa"]],viewQuery:function(t,e){if(1&t&&(d.Gf(dl,7),d.Gf(ul,5),d.Gf(cl,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeCoaParent=t.first),d.iGM(t=d.CRH())&&(e.LookupGroupCoa=t.first)}},decls:23,vars:32,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[3,"lookup-url","idKode","modal-title","idTitle","columns","filter-lookup","label","onGetSelectedData"],["LookupKodeCoaParent",""],[3,"lookup-url","idTitle","modal-title","columns","filter-lookup","label","onGetSelectedData"],["LookupGroupCoa",""],["formControlName","kode_coa",3,"label","inputFieldState"],["formControlName","deskripsi",3,"label","inputFieldState"],["formControlName","saldo",3,"label","inputFieldState"]],template:function(t,e){if(1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Coa"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Coa"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d.TgZ(16,"org-input-look-up-kode",9,10),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedCoaParent(t)}),d.qZA(),d.TgZ(18,"org-input-look-up",11,12),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedGroupCoa(t)}),d.qZA(),d._UZ(20,"mol-input-text",13),d._UZ(21,"mol-input-text",14),d._UZ(22,"mol-input-text",15),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.MAs(19);d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(31,pl)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("lookup-url",e.urlCoaParent)("idKode","id_coa")("modal-title","Data CoaParent")("idTitle","deskripsi")("columns",e.LookupCoaParent.columns)("filter-lookup",e.LookupCoaParent.filter)("label","Coa Parent"),d.xp6(2),d.Q6J("lookup-url",e.urlGroupCoa)("idTitle","id_group_coa")("modal-title","Data GroupCoa")("columns",t.columns)("filter-lookup",t.filter)("label","Group Coa"),d.xp6(2),d.Q6J("label","Kode COA")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Deskripsi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Saldo")("inputFieldState",e.inputFieldState)}},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,se.E,sl.U,y._,l.JJ,l.u],styles:[""]}),t})();const hl=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_grup_coa","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"grup_coa","headerText":"Group COA","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"deskripsi","headerText":"Description","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');let gl=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_GROUP_COA}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const fl=["OrgTabsRef"],_l=function(){return[]};let bl=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupGroupCoaService=a,this.GridConfig=hl,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_grup_coa:[0,[]],grup_coa:["",[l.kI.required]],deskripsi:["",[l.kI.required]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_grup_coa)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.grup_coa.setValue(""),this.deskripsi.setValue("")}GetAllData(){this.setupGroupCoaService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataGroupCoa(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupGroupCoaService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupGroupCoaService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_grup_coa:e};console.log("data",a),console.log("is_active",t),t?this.setupGroupCoaService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupGroupCoaService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get grup_coa(){return this.FormInputData.get("grup_coa")}get deskripsi(){return this.FormInputData.get("deskripsi")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(gl))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-group-coa"]],viewQuery:function(t,e){if(1&t&&d.Gf(fl,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:22,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","grup_coa",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","deskripsi",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Group COA"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Group COA"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(21,_l)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label"," Group COA")("IsFormControlInvalid",e.grup_coa.invalid)("ValidatorsCaption"," Group COA Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),d.xp6(1),d.Q6J("label","Description")("IsFormControlInvalid",e.deskripsi.invalid)("ValidatorsCaption","Description Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u],styles:[""]}),t})();const Tl=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_grup_coa","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_grup_item","headerText":"Kode Grup Item","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"tipe_item","headerText":"Tipe Grup Item","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"grup_item","headerText":"Grup Item","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Sl=a.t(Tl,2);const vl=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"grup_coa","headerText":"Grup COA","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"deskripsi","headerText":"COA","type":"string","visible":true}],"filter":[{"field":"grup_coa","filter":"like","title":"GRUP COA"},{"field":"deskripsi","filter":"like","title":"COA"}]}');var kl=a.t(vl,2);let xl=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_GROUP_ITEM,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Al=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_TIPE_ITEM,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const yl=["OrgTabsRef"],Il=["LookupKodeCoaPersediaan"],wl=["LookupKodeCoaPendapatan"],Dl=["LookupKodeCoaBiaya"],Zl=function(){return[]};let Cl=(()=>{class t{constructor(t,e,a,i){this.formBuilder=t,this.utilityService=e,this.setupGrupItemService=a,this.setupTipeItemService=i,this.urlCoa=T.MM.SETUP_DATA.SETUP_COA.GET_ALL_BY_PARMS,this.LookupGridCoa=kl,this.GridConfig=Sl,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.SetupTipeItemDropdownField={text:"tipe_item",value:"id_tipe_item"},this.FormInputData=this.formBuilder.group({id_grup_item:["",[]],kode_grup_item:["",[l.kI.required]],grup_item:["",[l.kI.required]],last_no:["",[]],id_coa_persediaan:["",[]],id_coa_pendapatan:["",[]],id_coa_biaya:["",[]],is_active:[!1,[]],id_tipe_item:["",[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData(),this.setupTipeItemService.setDataSource()}handleSelectedTabId(t){this.TabId=t}heandleSelectedCoaPersediaan(t){this.id_coa_persediaan.setValue(t.id_coa)}heandleSelectedCoaPendapatan(t){this.id_coa_pendapatan.setValue(t.id_coa)}heandleSelectedCoaBiaya(t){this.id_coa_biaya.setValue(t.id_coa)}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_grup_item)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.kode_grup_item.setValue(""),this.grup_item.setValue(""),this.last_no.setValue(""),this.LookupKodeCoaPendapatan.resetValue(),this.LookupKodeCoaPersediaan.resetValue(),this.LookupKodeCoaBiaya.resetValue()}GetAllData(){this.setupGrupItemService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataGrupItem(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue({id_grup_item:t.id_grup_item,kode_grup_item:t.kode_grup_item,grup_item:t.grup_item,last_no:t.last_no,id_coa_persediaan:t.id_coa_persediaan,id_coa_pendapatan:t.id_coa_pendapatan,id_coa_biaya:t.id_coa_biaya,is_active:t.is_active,id_tipe_item:t.id_tipe_item}),this.LookupKodeCoaPersediaan.kodeValue=t.kode_coa_persediaan,this.LookupKodeCoaPersediaan.titleValue=t.deskripsi_coa_persediaan,this.LookupKodeCoaPendapatan.kodeValue=t.kode_coa_pendapatan,this.LookupKodeCoaPendapatan.titleValue=t.deskripsi_coa_pendapatan,this.LookupKodeCoaBiaya.kodeValue=t.kode_coa_biaya,this.LookupKodeCoaBiaya.titleValue=t.deskripsi_coa_biaya}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupGrupItemService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupGrupItemService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_grup_item:e};console.log("data",a),console.log("is_active",t),t?this.setupGrupItemService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupGrupItemService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get kode_grup_item(){return this.FormInputData.get("kode_grup_item")}get grup_item(){return this.FormInputData.get("grup_item")}get last_no(){return this.FormInputData.get("last_no")}get id_coa_persediaan(){return this.FormInputData.get("id_coa_persediaan")}get id_coa_pendapatan(){return this.FormInputData.get("id_coa_pendapatan")}get id_coa_biaya(){return this.FormInputData.get("id_coa_biaya")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(xl),d.Y36(Al))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-grup-item"]],viewQuery:function(t,e){if(1&t&&(d.Gf(yl,7),d.Gf(Il,5),d.Gf(wl,5),d.Gf(Dl,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeCoaPersediaan=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeCoaPendapatan=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeCoaBiaya=t.first)}},decls:32,vars:46,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_tipe_item",3,"dataSource","fields","allowFiltering"],["MaritalTipeItemDropdown",""],["formControlName","kode_grup_item",3,"label","inputFieldState"],["formControlName","grup_item",3,"label","inputFieldState"],["formControlName","last_no",3,"label","inputFieldState"],[3,"lookup-url","idKode","modal-title","idTitle","columns","filter-lookup","label","onGetSelectedData"],["LookupKodeCoaPersediaan",""],["LookupKodeCoaPendapatan",""],["LookupKodeCoaBiaya",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Setup Item Group"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Setup Item Group"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d.TgZ(16,"div",7),d.TgZ(17,"div",9),d._UZ(18,"atm-label",10),d.qZA(),d.TgZ(19,"div",11),d._UZ(20,"ejs-dropdownlist",12,13),d.ALo(22,"async"),d.qZA(),d.qZA(),d._UZ(23,"mol-input-text",14),d._UZ(24,"mol-input-text",15),d._UZ(25,"mol-input-text",16),d.TgZ(26,"org-input-look-up-kode",17,18),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedCoaPersediaan(t)}),d.qZA(),d.TgZ(28,"org-input-look-up-kode",17,19),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedCoaPendapatan(t)}),d.qZA(),d.TgZ(30,"org-input-look-up-kode",17,20),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedCoaBiaya(t)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(45,Zl)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(5),d.Q6J("LabelCaption","Tipe Item"),d.xp6(2),d.Q6J("dataSource",d.lcZ(22,43,e.setupTipeItemService.dataSource))("fields",e.SetupTipeItemDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Kode Grup Item")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Grup Item")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Last No")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("lookup-url",e.urlCoa)("idKode","id_coa")("modal-title","Data CoaPersediaan")("idTitle","deskripsi")("columns",e.LookupGridCoa.columns)("filter-lookup",e.LookupGridCoa.filter)("label","COA Persediaan"),d.xp6(2),d.Q6J("lookup-url",e.urlCoa)("idKode","id_coa")("modal-title","Data CoaPendapatan")("idTitle","deskripsi")("columns",e.LookupGridCoa.columns)("filter-lookup",e.LookupGridCoa.filter)("label","COA Pendapatan"),d.xp6(2),d.Q6J("lookup-url",e.urlCoa)("idKode","id_coa")("modal-title","Data CoaBiaya")("idTitle","deskripsi")("columns",e.LookupGridCoa.columns)("filter-lookup",e.LookupGridCoa.filter)("label","COA Biaya"))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,w.D,D.rI,l.JJ,l.u,y._,se.E],pipes:[i.Ov],styles:[""]}),t})();const El=JSON.parse('{"GridColumns":[{"editType":"defaultEdit","field":"id_item","headerText":"Id Item","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"id_grup_item","headerText":"Id Grup Item","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"kode_grup_item","headerText":"Kode Grup Item","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"grup_item","headerText":"Grup Item","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"id_pabrik","headerText":"Id Pabrik","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"kode_pabrik","headerText":"Kode Pabrik","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"nama_pabrik","headerText":"Nama Pabrik","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"alamat_pabrik","headerText":"Alamat Pabrik","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"id_supplier","headerText":"Id Supplier","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"kode_supplier","headerText":"Kode Supplier","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat Supplier","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"kode_item","headerText":"Kode Item","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"barcode","headerText":"Barcode","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"nama_item","headerText":"Nama Item","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"kode_satuan","headerText":"Kode Satuan","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"nama_satuan","headerText":"Nama Satuan","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"id_temperatur_item","headerText":"Id Temperatur Item","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"temperatur_item","headerText":"Temperatur Item","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"batas_maksimal_pesan","headerText":"Batas Maksimal Pesan","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"batas_maksimal_pakai","headerText":"Batas Maksimal Pakai","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"batas_maksimal_mutasi","headerText":"Batas Maksimal Mutasi","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"batas_maksimal_jual","headerText":"Batas Maksimal Jual","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"batas_stok_kritis","headerText":"Batas Stok Kritis","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"prosentase_stok_kritis","headerText":"Prosentase Stok Kritis","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"harga_beli_terakhir","headerText":"Harga Beli Terakhir","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"hpp_average","headerText":"Hpp Average","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"prosentase_default_profit","headerText":"Prosentase Default Profit","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"is_ppn","headerText":"Is Ppn","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"is_active","headerText":"Is Active","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"user_created","headerText":"User Created","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"time_created","headerText":"Time Created","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"user_deactived","headerText":"User Deactived","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"time_deactived","headerText":"Time Deactived","type":"","format":"","textAlign":"left","visible":false},{"editType":"defaultEdit","field":"satuans","headerText":"Satuans","type":"","format":"","textAlign":"left","visible":false}]}');var Nl=a.t(El,2);const Fl=JSON.parse('{"GridColumns":[{"editType":"defaultEdit","field":"tanggal","headerText":"Tanggal","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"nomor_ref_transaksi","headerText":"Nomor Transaksi","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"keterangan","headerText":"Tipe Transaksi","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"stok_awal","headerText":"Stok Awal","type":"","format":"","textAlign":"right","visible":true},{"editType":"defaultEdit","field":"stok_masuk","headerText":"Stok Masuk","type":"","format":"","textAlign":"right","visible":true},{"editType":"defaultEdit","field":"stok_keluar","headerText":"Stok Keluar","type":"","format":"","textAlign":"right","visible":true},{"editType":"defaultEdit","field":"stok_akhir","headerText":"Stock Akhir","type":"","format":"","textAlign":"right","visible":true},{"editType":"defaultEdit","field":"nominal_awal","headerText":"Naminal Awal","type":"","format":"","textAlign":"right","visible":true},{"editType":"defaultEdit","field":"niminal_masuk","headerText":"Nominal Masuk","type":"","format":"","textAlign":"right","visible":true},{"editType":"defaultEdit","field":"nominal_keluar","headerText":"Nominal Keluar","type":"","format":"","textAlign":"right","visible":true},{"editType":"defaultEdit","field":"nominal_akhir","headerText":"Nominal Akhir","type":"","format":"","textAlign":"right","visible":true}]}');var Gl=a.t(Fl,2);const ql=JSON.parse('{"GridColumns":[{"editType":"defaultEdit","field":"batch_number","headerText":"batch number","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"expired_date","headerText":"expired date","type":"","format":"","textAlign":"left","visible":true},{"editType":"defaultEdit","field":"qty_on_hand","headerText":"qty","type":"","format":"","textAlign":"right","visible":true}]}');var Pl=a.t(ql,2);const Bl=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_grup_item","headerText":"Kode Grup Item","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"grup_item","headerText":"Grup Item","type":"string","visible":true}],"filter":[{"field":"kode_grup_item","filter":"like","title":"KODE GRUP ITEM"},{"field":"grup_item","filter":"like","title":"GRUP ITEM"}]}');var Rl=a.t(Bl,2);const Jl=JSON.parse('{"columns":[{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kode_supplier","headerText":"Kode Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","type":"string","visible":true},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat Supplier","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"kota","headerText":"Kota","type":"string","visible":false},{"allowEditing":true,"allowSorting":true,"editType":"defaultEdit","field":"provinsi","headerText":"Provinsi","type":"string","visible":false}],"filter":[{"field":"kode_supplier","filter":"like","title":"KODE SUPPLIER"},{"field":"nama_supplier","filter":"like","title":"NAMA SUPPLIER"}]}');var Ul=a.t(Jl,2),Ol=a(7338);let Ml=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(Ol.GET_ALL)}onGetAllPabrik(){return this.httpOperationService.defaultGetRequest(Ol.GET_ALL)}onGetPabrikById(t){return this.httpOperationService.defaultGetRequest(Ol.GET_BY_ID+t)}onPostSaveSetupPabrik(t){return this.httpOperationService.defaultPostRequest(Ol.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Ll=a(3186),Ql=a(1329),Kl=a(4452),Hl=a(5712),jl=a(1611);let Vl=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=jl.PHARMACY.SETUP_DATA.SETUP_PERESEPAN_MAKSIMAL,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Yl=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_SATUAN,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var zl=a(6740),Xl=a(5878),Wl=a(7696);const $l=["LookupKodeGrupItem"],tn=["OrgTabsRef"],en=["GridDataKartuStok"],an=["GridDataED"],ln=["LookupKodeSupplier"];function nn(t,e){if(1&t){const t=d.EpF();d.TgZ(0,"span",58),d.NdJ("click",function(){d.CHM(t);const e=d.oxw().index;return d.oxw().handleHapusSatuan(e)}),d._uU(1,"Hapus Satuan"),d.qZA()}}function on(t,e){if(1&t&&(d.TgZ(0,"div",50),d.YNc(1,nn,2,0,"span",51),d.TgZ(2,"div",9),d.TgZ(3,"div",13),d._UZ(4,"atm-label",14),d.qZA(),d.TgZ(5,"div",52),d._UZ(6,"ejs-dropdownlist",53,54),d.ALo(8,"async"),d.qZA(),d.TgZ(9,"div",55),d._UZ(10,"ejs-numerictextbox",56),d.qZA(),d.qZA(),d._UZ(11,"mol-input-checkbox-single",57),d._UZ(12,"hr"),d.qZA()),2&t){const t=e.index,a=d.oxw();d.Q6J("formGroupName",t),d.xp6(1),d.Q6J("ngIf",0!=t),d.xp6(3),d.Q6J("LabelCaption","Satuan / Isi"),d.xp6(2),d.Q6J("dataSource",d.lcZ(8,9,a.setupSatuanService.dataSource))("fields",a.MaritalSatuanDropdownField)("allowFiltering",!0),d.xp6(4),d.Q6J("format","N2")("showSpinButton",!1),d.xp6(1),d.Q6J("label","Is Satuan Beli")}}function rn(t,e){if(1&t&&(d.TgZ(0,"span"),d.TgZ(1,"div",9),d.TgZ(2,"div",13),d._UZ(3,"atm-label",14),d.qZA(),d.TgZ(4,"div",15),d._UZ(5,"ejs-dropdownlist",59,60),d.ALo(7,"async"),d.qZA(),d.qZA(),d.TgZ(8,"div",9),d.TgZ(9,"div",13),d._UZ(10,"atm-label",14),d.qZA(),d.TgZ(11,"div",15),d._UZ(12,"ejs-dropdownlist",61,62),d.ALo(14,"async"),d.qZA(),d.qZA(),d.TgZ(15,"div",9),d.TgZ(16,"div",13),d._UZ(17,"atm-label",14),d.qZA(),d.TgZ(18,"div",15),d._UZ(19,"ejs-dropdownlist",63,64),d.ALo(21,"async"),d.qZA(),d.qZA(),d.TgZ(22,"div",9),d.TgZ(23,"div",13),d._UZ(24,"atm-label",14),d.qZA(),d.TgZ(25,"div",15),d._UZ(26,"ejs-dropdownlist",65,66),d.ALo(28,"async"),d.qZA(),d.qZA(),d.TgZ(29,"div",9),d.TgZ(30,"div",13),d._UZ(31,"atm-label",14),d.qZA(),d.TgZ(32,"div",15),d._UZ(33,"ejs-dropdownlist",67,68),d.ALo(35,"async"),d.qZA(),d.qZA(),d._UZ(36,"mol-input-numeric",69),d._UZ(37,"mol-input-checkbox-single",70),d.TgZ(38,"div",28),d.TgZ(39,"div",29),d._UZ(40,"mol-input-numeric",71),d._UZ(41,"mol-input-numeric",72),d._UZ(42,"mol-input-numeric",73),d._UZ(43,"mol-input-numeric",74),d._UZ(44,"mol-datepicker-syncfusion",75),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(3),d.Q6J("LabelCaption","Setup Grup Obat"),d.xp6(2),d.Q6J("dataSource",d.lcZ(7,33,t.setupGrupObatService.dataSource))("fields",t.MaritalGrupObatDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Cara Pakai Obat"),d.xp6(2),d.Q6J("dataSource",d.lcZ(14,35,t.setupCaraPakaiObatService.dataSource))("fields",t.MaritalCaraPakaiObatDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Rute Pemberian Obat"),d.xp6(2),d.Q6J("dataSource",d.lcZ(21,37,t.setupRutePemberianObatService.dataSource))("fields",t.MaritalRutePemberianObatDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Restriksi Obat"),d.xp6(2),d.Q6J("dataSource",d.lcZ(28,39,t.setupRestriksiObatService.dataSource))("fields",t.SetupRestriksiObatDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Perespan Maksimal"),d.xp6(2),d.Q6J("dataSource",d.lcZ(35,41,t.setupPeresepanMaksimalService.dataSource))("fields",t.MaritalPeresepanMaksimalDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Kandungan")("inputFieldState",t.inputFieldState),d.xp6(1),d.Q6J("label","is Fornas"),d.xp6(3),d.Q6J("label","Harga Netto Apotek")("inputFieldState",t.inputFieldState),d.xp6(1),d.Q6J("label","Prosentase Profit")("inputFieldState",t.inputFieldState),d.xp6(1),d.Q6J("label","Prosentase PPN")("inputFieldState",t.inputFieldState),d.xp6(1),d.Q6J("label","Harga Jual Apotek")("inputFieldState",t.inputFieldState),d.xp6(1),d.Q6J("label","Tanggal Berlaku")("format","dd MMMM yyyy")}}function sn(t,e){if(1&t&&(d.TgZ(0,"span"),d._UZ(1,"mol-grid",76,77),d.TgZ(3,"div",40),d.TgZ(4,"div",78),d._UZ(5,"mol-input-numeric",79),d.qZA(),d.TgZ(6,"div",78),d._UZ(7,"mol-input-numeric",79),d.qZA(),d.TgZ(8,"div",78),d._UZ(9,"mol-input-numeric",79),d.qZA(),d.TgZ(10,"div",78),d._UZ(11,"mol-input-numeric",79),d.qZA(),d.qZA(),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("grid-height",300)("grid-DataSource",t.GridDataSourceKartuStok)("grid-paging",!1)("grid-lines","Both")("columns",t.GridConfigKartuStok.GridColumns),d.xp6(4),d.Q6J("label","Qty Masuk")("isFooter",!0)("value",t.total_masuk)("inputFieldState","detail"),d.xp6(2),d.Q6J("label","Qty Keluar")("isFooter",!0)("value",t.total_keluar)("inputFieldState","detail")("inputFieldState","detail"),d.xp6(2),d.Q6J("label","Nominal Masuk")("isFooter",!0)("value",t.total_nominal_masuk)("inputFieldState","detail"),d.xp6(2),d.Q6J("label","Nominal Keluar")("isFooter",!0)("value",t.total_nominal_keluar)("inputFieldState","detail")("inputFieldState","detail")}}function dn(t,e){if(1&t&&(d.TgZ(0,"span"),d._UZ(1,"mol-grid",76,80),d.qZA()),2&t){const t=d.oxw();d.xp6(1),d.Q6J("grid-height",300)("grid-DataSource",t.GridDataSourceED)("grid-paging",!1)("grid-lines","Both")("columns",t.GridConfigED.GridColumns)}}let un=(()=>{class t{constructor(t,e,a,i,n,o,r,s,d,u,c){this.formBuilder=t,this.utilityService=e,this.setupItemService=a,this.setupStockroomService=i,this.setupPabrikService=n,this.setupGrupObatService=o,this.setupCaraPakaiObatService=r,this.setupRutePemberianObatService=s,this.setupRestriksiObatService=d,this.setupPeresepanMaksimalService=u,this.setupSatuanService=c,this.urlGrupItem=T.MM.SETUP_DATA.SETUP_GROUP_ITEM.GET_ALL_BY_PARMS,this.LookupGridGrupItem=Rl,this.SetupStockrooomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.MaritalSetupPabrikDropdownField={text:"nama_pabrik",value:"id_pabrik"},this.MaritalGrupObatDropdownField={text:"nama_grup_obat",value:"id_grup_obat"},this.MaritalCaraPakaiObatDropdownField={text:"cara_pakai_obat",value:"id_cara_pakai_obat"},this.MaritalRutePemberianObatDropdownField={text:"nama_rute_pemberian_obat",value:"id_rute_pemberian_obat"},this.SetupRestriksiObatDropdownField={text:"nama_restriksi",value:"id_restriksi_obat"},this.MaritalPeresepanMaksimalDropdownField={text:"peresepan_maksimal",value:"id_peresepan_maksimal"},this.MaritalSatuanDropdownField={text:"nama_satuan",value:"kode_satuan"},this.GridConfig=Nl,this.GridConfigKartuStok=Gl,this.GridConfigED=Pl,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.total_masuk=0,this.total_keluar=0,this.total_nominal_masuk=0,this.total_nominal_keluar=0,this.tampil_ed=!1,this.id_stockroom_kartu_stok=0,this.FilterColumnDatasource=[{text:"No. Kontrak",value:"tks.nomor_kontrak"},{text:"Judul Kontrak",value:"tks.judul_kontrak"}],this.month=(new Date).getMonth(),this.fullYear=(new Date).getFullYear(),this.urlSupplier=T.MM.SETUP_DATA.SETUP_SUPPLIER.GET_ALL_BY_PARMS,this.LookupGridSupplier=Ul,this.FormInputData=this.formBuilder.group({id_item:[0,[l.kI.required]],id_grup_item:[0,[l.kI.required]],id_pabrik:[0,[l.kI.required]],id_supplier:[0,[l.kI.required]],kode_item:["",[l.kI.required]],barcode:["",[l.kI.required]],nama_item:["",[l.kI.required]],kode_satuan:["",[l.kI.required]],id_temperatur_item:[0,[l.kI.required]],batas_maksimal_pesan:[0,[]],batas_maksimal_pakai:[0,[]],batas_maksimal_mutasi:[0,[]],batas_maksimal_jual:[0,[]],batas_stok_kritis:[0,[]],prosentase_stok_kritis:[0,[]],harga_beli_terakhir:[0,[]],hpp_average:[0,[]],prosentase_default_profit:[0,[]],is_ppn:[!0,[l.kI.required]],is_obat:[!0,[]],id_grup_obat:[0,[]],id_cara_pakai_obat:[0,[]],id_rute_pemberian_obat:[0,[]],id_restriksi_obat:[0,[]],id_peresepan_maksimal:[0,[]],kandungan_obat:[0,[]],is_fornas:[!0,[]],harga_netto_apotek:[0,[]],prosentase_profit:[0,[]],prosentase_ppn:[0,[]],harga_jual_apotek:[0,[]],tanggal_berlaku:[null,[]],satuans:this.formBuilder.array([])}),this.FormSatuans=this.FormInputData.get("satuans"),this.FormSatuans.push(this.NewSatuans()),this.FormKartuStock=this.formBuilder.group({id_item:["",[]],kode_item:["",[]],nama_item:["",[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},{text:"Kartu Stok",tooltipText:"Kartu Stock",prefixIcon:"fas fa-boxes fa-sm",id:"kartu_stock"},"Search"],this.GetAllData(),this.setupStockroomService.setDataSource(),this.setupPabrikService.setDataSource(),this.setupGrupObatService.setDataSource(),this.setupCaraPakaiObatService.setDataSource(),this.setupRutePemberianObatService.setDataSource(),this.setupRestriksiObatService.setDataSource(),this.setupPeresepanMaksimalService.setDataSource(),this.setupSatuanService.setDataSource()}NewSatuans(){return this.formBuilder.group({kode_satuan:["",[]],isi:[0,[]],is_satuan_beli:[!1,[]]})}handleClickTambahSatuan(){this.FormSatuans.push(this.NewSatuans())}handleHapusSatuan(t){this.FormSatuans.removeAt(t)}heandleSelectedSupplier(t){this.id_supplier.setValue(t.id_supplier)}handlePencarianFilter(t){this.setupItemService.onGetAllByParamsSource(t),this.GridData.Grid.refresh()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_item)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm();break;case"kartu_stock":this.setKartuStock()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}heandleSelectedGrupItem(t){this.id_grup_item.setValue(t.id_grup_item)}handleClickTampilkan(){this.tampil_ed=!1;let t=[{columnName:"mksi.id_stockroom",filter:"equal",searchText:this.id_stockroom_kartu_stok,searchText2:""},{columnName:"mksi.tanggal",filter:"between",searchText:this.startDate.toISOString(),searchText2:this.endDate.toISOString()}];this.setupItemService.onGetKartuStockByIdItem(this.SelectedData.id_item,t).subscribe(t=>{this.GridDataSourceKartuStok=t.data,this.total_masuk=t.data.sum("stok_masuk"),this.total_keluar=t.data.sum("stok_keluar"),this.total_nominal_masuk=t.data.sum("nominal_masuk"),this.total_nominal_keluar=t.data.sum("nominal_keluar"),this.GridDataKartuStok.Grid.refresh()})}handleClickTampilkanED(){this.tampil_ed=!0,this.setupItemService.onGetEDItem(this.id_stockroom_kartu_stok,this.SelectedData.id_item).subscribe(t=>{this.GridDataSourceED=t.data,this.GridDataED.Grid.refresh()})}handleChangeTanggal(t){console.log(t),this.startDate=t.startDate,this.endDate=t.endDate}handleChangeStokroom(t){console.log(t),this.id_stockroom_kartu_stok=t.value}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}],this.SetFrom(this.SelectedData)}setKartuStock(){this.tampil_ed=!1;let t=this.SelectedData;this.FormKartuStock.setValue({id_item:t.id_item,kode_item:t.kode_item,nama_item:t.nama_item}),this.OrgTabsRef.onNavigateTabUsingTabId(2,"KartuStok"),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}],this.GridDataSourceKartuStok=[],this.GridDataKartuStok.Grid.refresh()}ResetFrom(){this.FormInputData.reset(),this.LookupKodeGrupItem.resetValue(),this.LookupKodeSupplier.resetValue()}GetAllData(){this.setupItemService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataItem(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.LookupKodeSupplier.kodeValue=t.kode_supplier,this.LookupKodeSupplier.titleValue=t.nama_supplier,this.LookupKodeGrupItem.kodeValue=t.kode_grup_item,this.LookupKodeGrupItem.titleValue=t.grup_item,this.FormInputData.setValue({id_item:t.id_item,id_grup_item:t.id_grup_item,id_pabrik:t.id_pabrik,id_supplier:t.id_supplier,kode_item:t.kode_item,barcode:t.barcode,nama_item:t.nama_item,kode_satuan:t.kode_satuan,id_temperatur_item:t.id_temperatur_item,batas_maksimal_pesan:t.batas_maksimal_pesan,batas_maksimal_pakai:t.batas_maksimal_pakai,batas_maksimal_mutasi:t.batas_maksimal_mutasi,batas_maksimal_jual:t.batas_maksimal_jual,batas_stok_kritis:t.batas_stok_kritis,prosentase_stok_kritis:t.prosentase_stok_kritis,harga_beli_terakhir:t.harga_beli_terakhir,hpp_average:t.hpp_average,prosentase_default_profit:t.prosentase_default_profit,is_ppn:t.is_ppn,is_obat:t.is_ppn,id_grup_obat:0,id_cara_pakai_obat:0,id_rute_pemberian_obat:0,id_restriksi_obat:0,id_peresepan_maksimal:0,kandungan_obat:0,is_fornas:0,harga_netto_apotek:0,prosentase_profit:0,prosentase_ppn:0,harga_jual_apotek:0,tanggal_berlaku:null,satuans:[]})}SaveAndNew(){const t=this.FormInputData.value;console.log(t),t.is_obat&&(t.obat={id_grup_obat:t.id_grup_obat,id_cara_pakai_obat:t.id_cara_pakai_obat,id_rute_pemberian_obat:t.id_rute_pemberian_obat,id_restriksi_obat:t.id_restriksi_obat,id_peresepan_maksimal:t.id_peresepan_maksimal,kandungan_obat:t.kandungan_obat,is_fornas:t.is_fornas,details:[{harga_netto_apotek:t.harga_netto_apotek,prosentase_profit:t.prosentase_profit,prosentase_ppn:t.prosentase_ppn,harga_jual_apotek:t.harga_jual_apotek,tgl_berlaku:t.tanggal_berlaku}]}),"normal"==this.inputFieldState?this.setupItemService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupItemService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_item:e,user_deactived:0};console.log("data",a),console.log("is_active",t),t?this.setupItemService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupItemService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ButtonNav=[],this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}bro(t){console.log(t)}get id_item(){return this.FormInputData.get("id_item")}get id_grup_item(){return this.FormInputData.get("id_grup_item")}get id_pabrik(){return this.FormInputData.get("id_pabrik")}get id_supplier(){return this.FormInputData.get("id_supplier")}get kode_item(){return this.FormInputData.get("kode_item")}get barcode(){return this.FormInputData.get("barcode")}get nama_item(){return this.FormInputData.get("nama_item")}get kode_satuan(){return this.FormInputData.get("kode_satuan")}get id_temperatur_item(){return this.FormInputData.get("id_temperatur_item")}get batas_maksimal_pesan(){return this.FormInputData.get("batas_maksimal_pesan")}get batas_maksimal_pakai(){return this.FormInputData.get("batas_maksimal_pakai")}get batas_maksimal_mutasi(){return this.FormInputData.get("batas_maksimal_mutasi")}get batas_maksimal_jual(){return this.FormInputData.get("batas_maksimal_jual")}get batas_stok_kritis(){return this.FormInputData.get("batas_stok_kritis")}get prosentase_stok_kritis(){return this.FormInputData.get("prosentase_stok_kritis")}get harga_beli_terakhir(){return this.FormInputData.get("harga_beli_terakhir")}get hpp_average(){return this.FormInputData.get("hpp_average")}get prosentase_default_profit(){return this.FormInputData.get("prosentase_default_profit")}get is_ppn(){return this.FormInputData.get("is_ppn")}get is_obat(){return this.FormInputData.get("is_obat")}get user_created(){return this.FormInputData.get("user_created")}get satuans(){return this.FormInputData.get("satuans")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(tt.z),d.Y36(x.u),d.Y36(Ml),d.Y36(Ll.$),d.Y36(Ql.n),d.Y36(Kl.j),d.Y36(Hl.C),d.Y36(Vl),d.Y36(Yl))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-item"]],viewQuery:function(t,e){if(1&t&&(d.Gf($l,5),d.Gf(tn,7),d.Gf(en,5),d.Gf(an,5),d.Gf(ln,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.LookupKodeGrupItem=t.first),d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first),d.iGM(t=d.CRH())&&(e.GridDataKartuStok=t.first),d.iGM(t=d.CRH())&&(e.GridDataED=t.first),d.iGM(t=d.CRH())&&(e.LookupKodeSupplier=t.first)}},decls:82,vars:83,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-2"],[3,"FilterColumnDatasource","handle-pencarian"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],[3,"lookup-url","idKode","modal-title","idTitle","columns","filter-lookup","label","onGetSelectedData"],["LookupKodeGrupItem",""],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_pabrik",3,"dataSource","fields","allowFiltering"],["MaritalSetupPabrikDropdown",""],["LookupKodeSupplier",""],["formControlName","kode_item",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","barcode",3,"label","inputFieldState"],["formControlName","nama_item",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","batas_maksimal_pesan",3,"label","inputFieldState"],["formControlName","batas_maksimal_pakai",3,"label","inputFieldState"],["formControlName","batas_maksimal_mutasi",3,"label","inputFieldState"],["formControlName","batas_maksimal_jual",3,"label","inputFieldState"],["formControlName","batas_stok_kritis",3,"label","inputFieldState"],["formControlName","prosentase_stok_kritis",3,"label","inputFieldState"],[1,"card"],[1,"card-body"],["formArrayName","satuans",1,"row","pt-2"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-3",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","btn-sm","px-2",3,"click"],[1,"fas","fa-plus-circle","fa-sm"],["formControlName","harga_beli_terakhir",3,"label","inputFieldState"],["formControlName","hpp_average",3,"label","inputFieldState"],["formControlName","prosentase_default_profit",3,"label","inputFieldState"],["formControlName","is_ppn","id","is_ppn",3,"label"],["formControlName","is_obat","id","is_obat",3,"label"],[4,"ngIf"],[1,"row"],[1,"col-sm-6"],["formControlName","kode_item",3,"label","inputFieldState"],["formControlName","nama_item",3,"label","inputFieldState"],["id","marital",3,"dataSource","fields","allowFiltering","change"],["MaritalStockrooomDropdown",""],["placeholder","Select a range",3,"change"],[1,"col-sm-12","mb-3"],["type","button",1,"btn","btn-sm","btn-primary","me-5",3,"click"],["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","mb-3",3,"formGroupName"],["class","badge bg-danger pb-0","style","cursor: pointer;",3,"click",4,"ngIf"],[1,"col-lg-5","col-md-5","col-sm-5","col-xs-5"],["id","marital","formControlName","kode_satuan",3,"dataSource","fields","allowFiltering"],["MaritalSatuanDropdown",""],[1,"col-lg-3","col-md-3","col-sm-3","col-xs-3"],["formControlName","isi",2,"text-align","right","padding-right","5px",3,"format","showSpinButton"],["formControlName","is_satuan_beli","id","is_satuan_beli",3,"label"],[1,"badge","bg-danger","pb-0",2,"cursor","pointer",3,"click"],["id","marital","formControlName","id_grup_obat",3,"dataSource","fields","allowFiltering"],["MaritalGrupObatDropdown",""],["id","marital","formControlName","id_cara_pakai_obat",3,"dataSource","fields","allowFiltering"],["MaritalCaraPakaiObatDropdown",""],["id","marital","formControlName","id_rute_pemberian_obat",3,"dataSource","fields","allowFiltering"],["MaritalRutePemberianObatDropdown",""],["id","marital","formControlName","id_restriksi_obat",3,"dataSource","fields","allowFiltering"],["MaritalRestriksiObatDropdown",""],["id","marital","formControlName","id_peresepan_maksimal",3,"dataSource","fields","allowFiltering"],["MaritalPeresepanMaksimalDropdown",""],["formControlName","kandungan_obat",3,"label","inputFieldState"],["formControlName","is_fornas","id","is_fornas",3,"label"],["formControlName","harga_netto_apotek",3,"label","inputFieldState"],["formControlName","prosentase_profit",3,"label","inputFieldState"],["formControlName","prosentase_ppn",3,"label","inputFieldState"],["formControlName","harga_jual_apotek",3,"label","inputFieldState"],["formControlName","tanggal_berlaku",3,"label","format"],[3,"grid-height","grid-DataSource","grid-paging","grid-lines","columns"],["GridDataKartuStok",""],[1,"col-sm-3"],[3,"label","isFooter","value","inputFieldState"],["GridDataED",""]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Item"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"div",4),d.TgZ(8,"mol-offcanvas-filter",5),d.NdJ("handle-pencarian",function(t){return e.handlePencarianFilter(t)}),d.qZA(),d.qZA(),d.TgZ(9,"mol-grid",6,7),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.ALo(11,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(12,"org-tabs-item"),d.TgZ(13,"org-tabs-label",3),d._uU(14,"Input Item"),d.qZA(),d.TgZ(15,"org-tabs-body"),d.TgZ(16,"form",8),d.TgZ(17,"div",9),d.TgZ(18,"div",10),d.TgZ(19,"org-input-look-up-kode",11,12),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedGrupItem(t)}),d.qZA(),d.TgZ(21,"div",9),d.TgZ(22,"div",13),d._UZ(23,"atm-label",14),d.qZA(),d.TgZ(24,"div",15),d._UZ(25,"ejs-dropdownlist",16,17),d.ALo(27,"async"),d.qZA(),d.qZA(),d.TgZ(28,"org-input-look-up-kode",11,18),d.NdJ("onGetSelectedData",function(t){return e.heandleSelectedSupplier(t)}),d.qZA(),d._UZ(30,"mol-input-text",19),d._UZ(31,"mol-input-text",20),d._UZ(32,"mol-input-text",21),d._UZ(33,"mol-input-numeric",22),d._UZ(34,"mol-input-numeric",23),d._UZ(35,"mol-input-numeric",24),d._UZ(36,"mol-input-numeric",25),d._UZ(37,"mol-input-numeric",26),d._UZ(38,"mol-input-numeric",27),d.TgZ(39,"div",28),d.TgZ(40,"div",29),d.TgZ(41,"div",30),d.YNc(42,on,13,11,"div",31),d.TgZ(43,"button",32),d.NdJ("click",function(){return e.handleClickTambahSatuan()}),d._UZ(44,"i",33),d._uU(45," Tambah Satuan "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(46,"div",10),d._UZ(47,"mol-input-numeric",34),d._UZ(48,"mol-input-numeric",35),d._UZ(49,"mol-input-numeric",36),d._UZ(50,"mol-input-checkbox-single",37),d._UZ(51,"mol-input-checkbox-single",38),d.YNc(52,rn,45,43,"span",39),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(53,"org-tabs-item"),d.TgZ(54,"org-tabs-label",3),d._uU(55,"Kartu Stock"),d.qZA(),d.TgZ(56,"org-tabs-body"),d.TgZ(57,"form",8),d.TgZ(58,"div",40),d.TgZ(59,"div",41),d._UZ(60,"mol-input-text",42),d._UZ(61,"mol-input-text",43),d.qZA(),d.TgZ(62,"div",41),d.TgZ(63,"div",9),d.TgZ(64,"div",13),d._UZ(65,"atm-label",14),d.qZA(),d.TgZ(66,"div",15),d.TgZ(67,"ejs-dropdownlist",44,45),d.NdJ("change",function(t){return e.handleChangeStokroom(t)}),d.ALo(69,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(70,"div",9),d.TgZ(71,"div",13),d._UZ(72,"atm-label",14),d.qZA(),d.TgZ(73,"div",15),d.TgZ(74,"ejs-daterangepicker",46),d.NdJ("change",function(t){return e.handleChangeTanggal(t)}),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(75,"div",47),d.TgZ(76,"button",48),d.NdJ("click",function(){return e.handleClickTampilkan()}),d._uU(77,"Tampilkan Kartu Stok"),d.qZA(),d.TgZ(78,"button",49),d.NdJ("click",function(){return e.handleClickTampilkanED()}),d._uU(79,"Tampilkan Expired Date"),d.qZA(),d.qZA(),d.YNc(80,sn,12,23,"span",39),d.YNc(81,dn,3,5,"span",39),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav",e.ButtonNav),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(4),d.Q6J("FilterColumnDatasource",e.FilterColumnDatasource),d.xp6(1),d.Q6J("grid-height",300)("grid-DataSource",d.lcZ(11,77,e.setupItemService.dataSource))("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(4),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("lookup-url",e.urlGrupItem)("idKode","kode_grup_item")("modal-title","Data GrupItem")("idTitle","grup_item")("columns",e.LookupGridGrupItem.columns)("filter-lookup",e.LookupGridGrupItem.filter)("label","Grup Item"),d.xp6(4),d.Q6J("LabelCaption","Pabrik"),d.xp6(2),d.Q6J("dataSource",d.lcZ(27,79,e.setupPabrikService.dataSource))("fields",e.MaritalSetupPabrikDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("lookup-url",e.urlSupplier)("idKode","id_supplier")("modal-title","Data Supplier")("idTitle","nama_supplier")("columns",e.LookupGridSupplier.columns)("filter-lookup",e.LookupGridSupplier.filter)("label","Supplier"),d.xp6(2),d.Q6J("label","Kode Item")("IsFormControlInvalid",e.kode_item.invalid)("ValidatorsCaption","Kode Item Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),d.xp6(1),d.Q6J("label","Barcode")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Nama Item")("IsFormControlInvalid",e.nama_item.invalid)("ValidatorsCaption","Nama Item Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Batas Maksimal Pesan")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Batas Maksimal Pakai")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Batas Maksimal Mutasi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Batas Maksimal Jual")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Batas Stok Kritis")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Prosentase Stok Kritis")("inputFieldState",e.inputFieldState),d.xp6(4),d.Q6J("ngForOf",e.FormInputData.get("satuans").controls),d.xp6(5),d.Q6J("label","Harga Beli Terakhir")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","HPP Average")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Prosentase Default Profit")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Is PPN "),d.xp6(1),d.Q6J("label","Is Obat"),d.xp6(1),d.Q6J("ngIf",e.is_obat.value),d.xp6(2),d.Q6J("Id","KartuStok"),d.xp6(3),d.Q6J("formGroup",e.FormKartuStock),d.xp6(3),d.Q6J("label","Kode Item")("inputFieldState","detail"),d.xp6(1),d.Q6J("label","Nama Item")("inputFieldState","detail"),d.xp6(4),d.Q6J("LabelCaption","Stockroom"),d.xp6(2),d.Q6J("dataSource",d.lcZ(69,81,e.setupStockroomService.dataSource))("fields",e.SetupStockrooomDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Tanggal"),d.xp6(8),d.Q6J("ngIf",!e.tampil_ed),d.xp6(1),d.Q6J("ngIf",e.tampil_ed))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,m.W,h.q,l._Y,l.JL,l.sg,se.E,w.D,D.rI,l.JJ,l.u,y._,E.G,l.CE,i.sg,zl.O,i.O5,Xl.C_,l.x0,Wl.Uw,I.i],pipes:[i.Ov],styles:[""]}),t})();const cn=JSON.parse('{"GridPabrikColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"barcode","headerText":"BARCODE","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_pabrik","headerText":"KODE PABRIK","visible":true,"width":120},{"allowEditing":false,"allowSorting":true,"field":"nama_pabrik","editType":"defaultEdit","headerText":"NAMA PABRIK","visible":true,"width":150},{"allowEditing":false,"allowSorting":true,"field":"alamat_pabrik","editType":"defaultEdit","headerText":"ALAMAT PABRIK","visible":true,"width":150},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kota","headerText":"KOTA","visible":true,"width":100},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"provinsi","headerText":"PROVINSI","visible":true,"width":120},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"negara","headerText":"NEGARA","visible":true,"width":120},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"telepon","headerText":"TELEPON","visible":true,"width":120},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"fax","headerText":"FAX","visible":true,"width":120},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_pos","headerText":"KODE POS","visible":true,"width":90},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"email","headerText":"EMAIL","visible":true,"width":150},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"contact_person","headerText":"CONTACT PERSON","visible":true,"width":150},{"allowEditing":false,"allowSorting":true,"editType":"booleanedit","field":"is_active","headerText":"STATUS","visible":false,"width":70,"type":"boolean","displayAsCheckbox":true}],"GridPabrikDataSource":[{"barcode":"001918711090","kode":"AB0001","barang":"Vitamin C","qty_besar":"5","satuan_besar":"DUS","isi":"10","kemasan":"STRIP","qty_kecil":"50","satuan_kecil":"TABLET"},{"barcode":"001918711090","kode":"AB0001","barang":"Vitamin D","qty_besar":"10","satuan_besar":"DUS","isi":"10","kemasan":"STRIP","qty_kecil":"100","satuan_kecil":"TABLET"}]}');var pn=a.t(cn,2);let mn=(()=>{class t{constructor(){this.RadioButtonChecked=!1,this.inputFieldState="normal",this.externalId="",this._value=!0,this._ID="",this.onChange=()=>{},this.onTouched=()=>{},this.touched=!1,this.disabled=!1,this.checked=!1}set id(t){this._ID=t,this.externalId=null}ngOnInit(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}setDisabledState(t){this.disabled=t}writeValue(t){this.value=t}doChange(t){this.value=t.target.value}doTouched(t){this.touched=!0}get id(){return this._ID}get value(){return this._value}set value(t){this._value=t,this.onChange(t),this.onTouched()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["atm-radio-button"]],hostVars:1,hostBindings:function(t,e){2&t&&d.uIk("id",e.externalId)},inputs:{RadioButtonId:"RadioButtonId",RadioButtonLabel:"RadioButtonLabel",RadioButtonChecked:"RadioButtonChecked",inputFieldState:"inputFieldState",id:"id",_value:["value","_value"]},features:[d._Bn([{provide:l.JU,useExisting:(0,d.Gpc)(()=>t),multi:!0}])],decls:3,vars:6,consts:[["type","radio","name","inlineRadioOptions",1,"form-check-input",3,"id","value","checked","disabled","change","click"],[1,"font-cabin",2,"font-size","14px",3,"for"]],template:function(t,e){1&t&&(d.TgZ(0,"input",0),d.NdJ("change",function(t){return e.doChange(t)})("click",function(t){return e.doTouched(t)}),d.qZA(),d.TgZ(1,"label",1),d._uU(2),d.qZA()),2&t&&(d.Q6J("id",e.RadioButtonId)("value",e.value)("checked",e.RadioButtonChecked)("disabled","detail"===e.inputFieldState),d.xp6(1),d.Q6J("for",e.RadioButtonId),d.xp6(1),d.Oqu(e.RadioButtonLabel))},styles:[""]}),t})();function hn(t,e){if(1&t){const t=d.EpF();d.ynx(0),d.TgZ(1,"div",5),d.TgZ(2,"atm-radio-button",6),d.NdJ("change",function(e){return d.CHM(t),d.oxw().doChange(e)}),d.qZA(),d.qZA(),d.BQk()}if(2&t){const t=e.$implicit;d.xp6(2),d.Q6J("id",t.id)("RadioButtonId",t.id)("value",t.value)("RadioButtonLabel",t.label)("RadioButtonChecked",t.checked)("inputFieldState",t.inputFieldState)}}let gn=(()=>{class t{constructor(){this.externalId="",this._value="",this._ID="",this.onChange=()=>{},this.onTouched=()=>{},this.touched=!1,this.disabled=!1}set id(t){this._ID=t,this.externalId=null}ngOnInit(){}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}setDisabledState(t){this.disabled=t}writeValue(t){this.value=t}doChange(t){this.value=t.target.value}doTouched(t){this.touched=!0}get id(){return this._ID}get value(){return this._value}set value(t){this._value=t,this.onChange(t),this.onTouched()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=d.Xpm({type:t,selectors:[["mol-radio-button"]],hostVars:1,hostBindings:function(t,e){2&t&&d.uIk("id",e.externalId)},inputs:{RadioButtonObject:"RadioButtonObject",label:"label",id:"id",_value:["value","_value"]},features:[d._Bn([{provide:l.JU,useExisting:(0,d.Gpc)(()=>t),multi:!0}])],decls:5,vars:2,consts:[[1,"row","mb-2"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8","pt-2"],[4,"ngFor","ngForOf"],[1,"form-check","form-check-inline"],[3,"id","RadioButtonId","value","RadioButtonLabel","RadioButtonChecked","inputFieldState","change"]],template:function(t,e){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d._UZ(2,"atm-label",2),d.qZA(),d.TgZ(3,"div",3),d.YNc(4,hn,3,6,"ng-container",4),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Q6J("LabelCaption",e.label),d.xp6(2),d.Q6J("ngForOf",e.RadioButtonObject))},directives:[w.D,i.sg,mn],styles:[""]}),t})();const fn=["OrgTabsRef"],_n=["modalDialogAddDataPabrik"],bn=function(){return[]};let Tn=(()=>{class t{constructor(t,e,a,i){this.formBuilder=t,this.modalService=e,this.utilityService=a,this.setupPabrikService=i,this.TabId="DataPabrik",this.GridDataPabrikPagingSettings={pageSizes:!0,pageSize:10},this.GridDataPabrik=null,this.GridDataPabrikEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.GridDataPabrikCommands=[{buttonOption:{content:"<i class='fas fa-search'></i>",cssClass:"btn btn-warning"}}],this.GridPabrikConfig=pn,this.RadioButtonStatus=[{id:"active",value:!0,label:"Active",checked:!1,inputFieldState:"normal"},{id:"nonActive",value:!1,label:"Non Active",checked:!1,inputFieldState:"normal"}],this.inputFieldState="normal",this.FormInputDataPabrik=this.formBuilder.group({id_pabrik:[0,[]],kode_pabrik:[null,[l.kI.required]],nama_pabrik:[null,[l.kI.required]],alamat_pabrik:["",[]],kota:["",[]],provinsi:["",[]],negara:["",[]],telepon:["",[]],fax:["",[]],kode_pos:["",[]],email:["",[]],contact_person:["",[]],is_active:[null,[l.kI.required]]})}ngOnInit(){this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save & New",StackIcon:!0,Icons1:"fa-save",Icons2:"fa-plus-circle"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Cancel",Icons1:"fa-window-close"}],this.GridDataPabrikToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GridPabrikColumns=[{allowEditing:!1,allowSorting:!0,editType:"numericEdit",field:"id_pabrik",format:"N",headerText:"ID",type:"number",visible:!1,width:50},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"kode_pabrik",headerText:"KODE PABRIK",visible:!0,width:120},{allowEditing:!1,allowSorting:!0,field:"nama_pabrik",editType:"defaultEdit",headerText:"NAMA PABRIK",visible:!0,width:150},{allowEditing:!1,allowSorting:!0,field:"alamat_pabrik",editType:"defaultEdit",headerText:"ALAMAT PABRIK",visible:!0,width:150},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"kota",headerText:"KOTA",visible:!0,width:100},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"provinsi",headerText:"PROVINSI",visible:!0,width:120},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"negara",headerText:"NEGARA",visible:!0,width:120},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"telepon",headerText:"TELEPON",visible:!0,width:120},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"fax",headerText:"FAX",visible:!0,width:120},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"kode_pos",headerText:"KODE POS",visible:!0,width:90},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"email",headerText:"EMAIL",visible:!0,width:150},{allowEditing:!1,allowSorting:!0,editType:"defaultEdit",field:"contact_person",headerText:"CONTACT PERSON",visible:!0,width:150},{allowEditing:!1,allowSorting:!0,editType:"booleanedit",field:"is_active",headerText:"STATUS",visible:!1,width:70,type:"boolean",displayAsCheckbox:!0},{headerText:"STATUS",editType:"defaultEdit",width:70,commands:this.GridDataPabrikCommands}]}onSetFormSetupPabrikAttributes(){this.id_pabrik.setValue(0),this.kode_pabrik.setValue(null),this.nama_pabrik.setValue(null),this.alamat_pabrik.setValue(""),this.kota.setValue(""),this.provinsi.setValue(""),this.negara.setValue(""),this.telepon.setValue(""),this.fax.setValue(""),this.kode_pos.setValue(""),this.email.setValue(""),this.contact_person.setValue(""),this.is_active.setValue(null)}onGetAllSetupPabrik(){this.setupPabrikService.onGetAllPabrik().subscribe(t=>{this.GridPabrikDatasource=t.data})}onGetSelectedTabId(t){this.TabId=t}onInitalizedGrid(t){this.GridDataPabrik=t}onSelectedRow(t){this.SelectedDataPabrik=t.data}onToolbarClick(t){switch(t.item.id){case"add":this.OrgTabsRef.onNavigateTabUsingTabId(1,"InputPabrik"),this.inputFieldState="normal",this.FormInputDataPabrik.reset();break;case"edit":this.OrgTabsRef.onNavigateTabUsingTabId(1,"InputPabrik"),this.inputFieldState="edit",this.onEditDataPabrik(this.SelectedDataPabrik);break;case"detail":this.OrgTabsRef.onNavigateTabUsingTabId(1,"InputPabrik"),this.inputFieldState="detail",this.onSeeDetailDataPabrik(this.SelectedDataPabrik)}}onClickCommandGridPabrik(t){console.log(t)}onAddDataPabrik(){console.log("Add")}onEditDataPabrik(t){this.FormInputDataPabrik.reset(),this.FormInputDataPabrik.setValue(t),this.RadioButtonStatus=[{id:"active",value:!0,label:"Active",checked:!1,inputFieldState:"normal"},{id:"nonActive",value:!1,label:"Non Active",checked:!1,inputFieldState:"normal"}],this.FormInputDataPabrik.setValue(t),this.RadioButtonStatus=t.is_active?[{id:"active",value:!0,label:"Active",checked:!0,inputFieldState:"edit"},{id:"nonActive",value:!1,label:"Non Active",checked:!1,inputFieldState:"edit"}]:[{id:"active",value:!0,label:"Active",checked:!1,inputFieldState:"edit"},{id:"nonActive",value:!1,label:"Non Active",checked:!0,inputFieldState:"edit"}]}onSeeDetailDataPabrik(t){this.FormInputDataPabrik.reset(),this.RadioButtonStatus=[{id:"active",value:!0,label:"Active",checked:!1,inputFieldState:"normal"},{id:"nonActive",value:!1,label:"Non Active",checked:!1,inputFieldState:"normal"}],this.FormInputDataPabrik.setValue(t),this.RadioButtonStatus=t.is_active?[{id:"active",value:!0,label:"Active",checked:!0,inputFieldState:"detail"},{id:"nonActive",value:!1,label:"Non Active",checked:!1,inputFieldState:"detail"}]:[{id:"active",value:!0,label:"Active",checked:!1,inputFieldState:"detail"},{id:"nonActive",value:!1,label:"Non Active",checked:!0,inputFieldState:"detail"}]}onClickButtonNav(t){switch(t){case"SaveAndNew":this.onSaveAndNew();break;case"Clear":this.onClear();break;case"Cancel":this.onCancel()}}onSaveAndNew(){const t=this.FormInputDataPabrik.value;t.is_active=JSON.parse(t.is_active),this.setupPabrikService.onPostSaveSetupPabrik(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Success",t.message).then(()=>{this.FormInputDataPabrik.reset(),this.onSetFormSetupPabrikAttributes()})})}onClear(){this.FormInputDataPabrik.reset(),this.onSetFormSetupPabrikAttributes()}onCancel(){this.FormInputDataPabrik.reset(),this.onSetFormSetupPabrikAttributes(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"DataPabrik")}onGetPabrikById(){this.setupPabrikService.onGetPabrikById(2).subscribe(t=>{console.log(t)},t=>{console.warn(t)},()=>{})}onLoadGridPabrik(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.onKeyDownHandler.bind(this))}onKeyDownHandler(t){13===t.keyCode&&alert("Enter Has Been Pressed"),46===t.keyCode&&alert("Delete Key Has Been Pressed"),40===t.keyCode&&console.log(this.GridDataPabrik.Grid.columns.length)}get id_pabrik(){return this.FormInputDataPabrik.get("id_pabrik")}get kode_pabrik(){return this.FormInputDataPabrik.get("kode_pabrik")}get nama_pabrik(){return this.FormInputDataPabrik.get("nama_pabrik")}get alamat_pabrik(){return this.FormInputDataPabrik.get("alamat_pabrik")}get kota(){return this.FormInputDataPabrik.get("kota")}get provinsi(){return this.FormInputDataPabrik.get("provinsi")}get negara(){return this.FormInputDataPabrik.get("negara")}get telepon(){return this.FormInputDataPabrik.get("telepon")}get fax(){return this.FormInputDataPabrik.get("fax")}get kode_pos(){return this.FormInputDataPabrik.get("kode_pos")}get email(){return this.FormInputDataPabrik.get("email")}get contact_person(){return this.FormInputDataPabrik.get("contact_person")}get is_active(){return this.FormInputDataPabrik.get("is_active")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(k.tT),d.Y36(A.t),d.Y36(Ml))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-pabrik"]],viewQuery:function(t,e){if(1&t&&(d.Gf(fn,7),d.Gf(_n,5)),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first),d.iGM(t=d.CRH())&&(e.modalDialogAddDataPabrik=t.first)}},decls:38,vars:43,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-id","grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-initial-page","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click"],["GridDataPabrik",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_pabrik",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","nama_pabrik",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"card"],[1,"card-header"],[1,"font-cabin","mb-0"],[1,"card-body"],[1,"row"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6"],["formControlName","contact_person",3,"label","inputFieldState"],["formControlName","alamat_pabrik",3,"label","inputFieldState"],["formControlName","kota",3,"label","inputFieldState"],["formControlName","provinsi",3,"label","inputFieldState"],["formControlName","negara",3,"label","inputFieldState"],["formControlName","kode_pos",3,"label","inputFieldState"],["formControlName","telepon",3,"label","inputFieldState"],["formControlName","fax",3,"label","inputFieldState"],["formControlName","email",3,"label","inputFieldState"],["formControlName","is_active",3,"id","label","RadioButtonObject"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.onClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.onGetSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Pabrik"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.onSelectedRow(t)})("toolbar-click",function(t){return e.onToolbarClick(t)})("load-grid",function(t){return e.onLoadGridPabrik(t)})("initialized",function(t){return e.onInitalizedGrid(t)})("command-click",function(t){return e.onClickCommandGridPabrik(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Pabrik"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.qZA(),d.qZA(),d.TgZ(18,"div",7),d.TgZ(19,"div",11),d.TgZ(20,"div",12),d.TgZ(21,"div",13),d.TgZ(22,"h6",14),d._uU(23,"Detail Pabrik"),d.qZA(),d.qZA(),d.TgZ(24,"div",15),d.TgZ(25,"div",16),d.TgZ(26,"div",17),d._UZ(27,"mol-input-text",18),d._UZ(28,"mol-input-text",19),d._UZ(29,"mol-input-text",20),d._UZ(30,"mol-input-text",21),d._UZ(31,"mol-input-text",22),d.qZA(),d.TgZ(32,"div",17),d._UZ(33,"mol-input-text",23),d._UZ(34,"mol-input-text",24),d._UZ(35,"mol-input-text",25),d._UZ(36,"mol-input-text",26),d._UZ(37,"mol-radio-button",27),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","InputPabrik"==e.TabId&&e.FormInputDataPabrik.valid?e.ButtonNav:d.DdM(42,bn)),d.xp6(4),d.Q6J("Id","DataPabrik"),d.xp6(3),d.Q6J("grid-id","GridDataPabrik")("grid-height",300)("grid-DataSource",e.GridPabrikConfig.GridPabrikDataSource)("grid-paging",!0)("grid-editSettings",e.GridDataPabrikEditSettings)("grid-lines","Both")("grid-initial-page",e.GridDataPabrikPagingSettings)("grid-toolbar",e.GridDataPabrikToolbar)("columns",e.GridPabrikColumns),d.xp6(3),d.Q6J("Id","InputPabrik"),d.xp6(3),d.Q6J("formGroup",e.FormInputDataPabrik),d.xp6(3),d.Q6J("label","Kode Pabrik")("IsFormControlInvalid",e.kode_pabrik.invalid)("ValidatorsCaption","Kode Pabrik Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Nama Pabrik")("IsFormControlInvalid",e.nama_pabrik.invalid)("ValidatorsCaption","Nama Pabrik Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(10),d.Q6J("label","Kontak")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Alamat Pabrik")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Kab / Kota")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Provinsi")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Negara")("inputFieldState",e.inputFieldState),d.xp6(2),d.Q6J("label","Kode Pos")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","No. Telepon")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","No. Fax")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Email")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("id","is_active")("label","Status")("RadioButtonObject",e.RadioButtonStatus))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u,gn],styles:[""]}),t})();const Sn=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_kategori","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kategori","headerText":"Katgegori","visible":true}]}');var vn=a.t(Sn,2);let kn=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_PERENCANAAN_KATEGORI}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const xn=["OrgTabsRef"],An=function(){return[]};let yn=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupPerencanaanKategoriService=a,this.GridConfig=vn,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_kategori:["",[l.kI.required]],kategori:["",[l.kI.required]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.id_kategori.setValue(""),this.kategori.setValue("")}GetAllData(){this.setupPerencanaanKategoriService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataPerencanaanKategori(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupPerencanaanKategoriService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupPerencanaanKategoriService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get id_kategori(){return this.FormInputData.get("id_kategori")}get kategori(){return this.FormInputData.get("kategori")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(kn))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-perencanaan-kategori"]],viewQuery:function(t,e){if(1&t&&d.Gf(xn,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:17,vars:15,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kategori",3,"label","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Perencanaan Kategori"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Perencanaan Kategori"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(14,An)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Kategori")("inputFieldState",e.inputFieldState))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u],styles:[""]}),t})();const In=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_satuan","headerText":"Kode Satuan","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"nama_satuan","headerText":"Nama Satuan","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var wn=a.t(In,2);const Dn=["OrgTabsRef"],Zn=function(){return[]};let Cn=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupSatuanService=a,this.GridConfig=wn,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({kode_satuan:["",[l.kI.required]],nama_satuan:["",[l.kI.required]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.kode_satuan)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.kode_satuan.setValue(""),this.nama_satuan.setValue("")}GetAllData(){this.setupSatuanService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataSatuan(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupSatuanService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupSatuanService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={kode_satuan:e};console.log("data",a),console.log("is_active",t),t?this.setupSatuanService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupSatuanService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get kode_satuan(){return this.FormInputData.get("kode_satuan")}get nama_satuan(){return this.FormInputData.get("nama_satuan")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(Yl))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-satuan"]],viewQuery:function(t,e){if(1&t&&d.Gf(Dn,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:22,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_satuan",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","nama_satuan",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Satuan"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Satuan"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(21,Zn)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Kode Satuan")("IsFormControlInvalid",e.kode_satuan.invalid)("ValidatorsCaption","Kode Satuan Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),d.xp6(1),d.Q6J("label","Nama Satuan")("IsFormControlInvalid",e.nama_satuan.invalid)("ValidatorsCaption","Nama Satuan Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u],styles:[".tabs-header[_ngcontent-%COMP%]{display:none!important}"]}),t})();const En=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_stockroom","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_stockroom","headerText":"Kode Stockroom","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"nama_stockroom","headerText":"Nama Stockroom","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Nn=a.t(En,2);let Fn=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_TIPE_STOCKROOM,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Gn=["OrgTabsRef"],qn=function(){return[]};let Pn=(()=>{class t{constructor(t,e,a,i){this.formBuilder=t,this.utilityService=e,this.setupStockroomService=a,this.setupTipeStockroomService=i,this.MaritalTipeStockroomDropdownField={text:"tipe_stockroom",value:"id_tipe_stockroom"},this.MaritalStockroomDropdownField={text:"nama_stockroom",value:"id_stockroom"},this.GridConfig=Nn,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_stockroom:["",[]],kode_stockroom:["",[l.kI.required]],nama_stockroom:["",[l.kI.required]],id_tipe_stockroom:["",[l.kI.required]],store_type:["",[]],gl_no:["",[]],gl_dept_name:["",[]],id_stockroom_parent:["",[]],is_show_persediaan:[!0,[]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData(),this.setupTipeStockroomService.setDataSource(),this.setupStockroomService.setDataSource()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_stockroom)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.kode_stockroom.setValue(""),this.nama_stockroom.setValue("")}GetAllData(){this.setupStockroomService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataStockroom(){console.log("Add")}SetFrom(t){delete t.user_created,delete t.time_created,delete t.user_deactived,delete t.time_deactived,this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupStockroomService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupStockroomService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_stockroom:e};console.log("data",a),console.log("is_active",t),t?this.setupStockroomService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupStockroomService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get kode_stockroom(){return this.FormInputData.get("kode_stockroom")}get nama_stockroom(){return this.FormInputData.get("nama_stockroom")}get id_tipe_stockroom(){return this.FormInputData.get("id_tipe_stockroom")}get store_type(){return this.FormInputData.get("store_type")}get gl_no(){return this.FormInputData.get("gl_no")}get gl_dept_name(){return this.FormInputData.get("gl_dept_name")}get id_stockroom_parent(){return this.FormInputData.get("id_stockroom_parent")}get is_show_persediaan(){return this.FormInputData.get("is_show_persediaan")}get is_active(){return this.FormInputData.get("is_active")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(x.u),d.Y36(Fn))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-stockroom"]],viewQuery:function(t,e){if(1&t&&d.Gf(Gn,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:36,vars:41,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_stockroom",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","nama_stockroom",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_tipe_stockroom",3,"dataSource","fields","allowFiltering"],["MaritalTipeStockroomDropdown",""],["formControlName","store_type",3,"label","inputFieldState"],["formControlName","gl_no",3,"label","inputFieldState"],["formControlName","gl_dept_name",3,"label","inputFieldState"],["id","marital","formControlName","id_stockroom_parent",3,"dataSource","fields","allowFiltering"],["MaritalStockroomDropdown",""],["formControlName","is_show_persediaan","id","is_show_persediaan",3,"label"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Stockroom"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Stockroom"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.TgZ(18,"div",7),d.TgZ(19,"div",11),d._UZ(20,"atm-label",12),d.qZA(),d.TgZ(21,"div",13),d._UZ(22,"ejs-dropdownlist",14,15),d.ALo(24,"async"),d.qZA(),d.qZA(),d._UZ(25,"mol-input-text",16),d._UZ(26,"mol-input-text",17),d._UZ(27,"mol-input-text",18),d.TgZ(28,"div",7),d.TgZ(29,"div",11),d._UZ(30,"atm-label",12),d.qZA(),d.TgZ(31,"div",13),d._UZ(32,"ejs-dropdownlist",19,20),d.ALo(34,"async"),d.qZA(),d.qZA(),d._UZ(35,"mol-input-checkbox-single",21),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(40,qn)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Kode Stockroom")("IsFormControlInvalid",e.kode_stockroom.invalid)("ValidatorsCaption","Kode Stockroom Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),d.xp6(1),d.Q6J("label","Nama Stockroom")("IsFormControlInvalid",e.nama_stockroom.invalid)("ValidatorsCaption","Nama Stockroom Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(3),d.Q6J("LabelCaption","Tipe Stockroom"),d.xp6(2),d.Q6J("dataSource",d.lcZ(24,36,e.setupTipeStockroomService.dataSource))("fields",e.MaritalTipeStockroomDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Store Type")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","GL No")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","GL Dept name")("inputFieldState",e.inputFieldState),d.xp6(3),d.Q6J("LabelCaption","Stockroom Parent"),d.xp6(2),d.Q6J("dataSource",d.lcZ(34,38,e.setupStockroomService.dataSource))("fields",e.MaritalStockroomDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Show Persediaan"))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u,w.D,D.rI,zl.O],pipes:[i.Ov],styles:[""]}),t})();const Bn=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_supplier","headerText":"Id Supplier","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_tipe_supplier","headerText":"Id Tipe Supplier","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_supplier","headerText":"Kode Supplier","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"nama_supplier","headerText":"Nama Supplier","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"alamat_supplier","headerText":"Alamat","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var Rn=a.t(Bn,2),Jn=a(9362);let Un=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_SUPPLIER,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),On=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_TIPE_SUPPLIER,this.dataSource=new $.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data),this.dataSource.complete()})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Mn=a(9126),Ln=a(808),Qn=a(3904);const Kn=["MaritalTipeSupplierDropdown"],Hn=["OrgTabsRef"],jn=function(){return[]};let Vn=(()=>{class t{constructor(t,e,a,i,n,o,r){this.formBuilder=t,this.utilityService=e,this.setupSupplierService=a,this.setupTipeSupplierService=i,this.setupProvinsiService=n,this.setupKotaService=o,this.setupKecamatanService=r,this.urlWilayah=Jn.API_PIS.SETUP_DATA.API_SETUP_DATA.SETUP_PROVINSI,this.MaritalTipeSupplierDropdownField={text:"tipe_supplier",value:"id_tipe_supplier"},this.SetupWilayahDropdownField={text:"nama_wilayah",value:"kode_wilayah"},this.GridConfig=Rn,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_supplier:[0],id_tipe_supplier:[0],kode_supplier:["",[l.kI.required]],nama_supplier:["",[l.kI.required]],alamat_supplier:["",[]],kode_wilayah:[""],negara:["",[]],telepon:["",[]],fax:["",[]],kode_pos:["",[]],email:["",[]],contact_person:["",[]],npwp:["",[]],default_hari_tempo_bayar:[0,[]],default_hari_pengiriman:[0,[]],default_prosentase_diskon:[0,[]],default_prosentase_tax:[0,[]],is_tax:[!1,[]],is_active:[!1,[]]}),this.setupTipeSupplierService.setDataSource(),this.setupProvinsiService.setDataSource()}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_supplier)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}heandleSelectedWilayah(t){this.kode_wilayah.setValue(t.kode_wilayah)}handleDropdownProvinsiChange(t){this.setupKotaService.setDataSource(t.itemData.kode_wilayah)}handleDropdownKotaChange(t){this.setupKecamatanService.setDataSource(t.itemData.kode_wilayah)}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset()}GetAllData(){this.setupSupplierService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataSupplier(){console.log("Add")}SetFrom(t){delete t.user_created,delete t.time_created,delete t.user_deactived,delete t.time_deactived,this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupSupplierService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupSupplierService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_supplier:e,user_deactived:1};console.log("data",a),console.log("is_active",t),t?this.setupSupplierService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupSupplierService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get id_supplier(){return this.FormInputData.get("id_supplier")}get kode_supplier(){return this.FormInputData.get("kode_supplier")}get nama_supplier(){return this.FormInputData.get("nama_supplier")}get id_tipe_supplier(){return this.FormInputData.get("id_tipe_supplier")}get alamat_supplier(){return this.FormInputData.get("alamat_supplier")}get kode_wilayah(){return this.FormInputData.get("kode_wilayah")}get negara(){return this.FormInputData.get("negara")}get telepon(){return this.FormInputData.get("telepon")}get fax(){return this.FormInputData.get("fax")}get kode_pos(){return this.FormInputData.get("kode_pos")}get email(){return this.FormInputData.get("email")}get contact_person(){return this.FormInputData.get("contact_person")}get npwp(){return this.FormInputData.get("npwp")}get default_hari_tempo_bayar(){return this.FormInputData.get("default_hari_tempo_bayar")}get default_hari_pengiriman(){return this.FormInputData.get("default_hari_pengiriman")}get default_prosentase_diskon(){return this.FormInputData.get("default_prosentase_diskon")}get default_prosentase_tax(){return this.FormInputData.get("default_prosentase_tax")}get is_tax(){return this.FormInputData.get("is_tax")}get is_active(){return this.FormInputData.get("is_tax")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(Un),d.Y36(On),d.Y36(Mn.Z),d.Y36(Ln.D),d.Y36(Qn.P))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-supplier"]],viewQuery:function(t,e){if(1&t&&(d.Gf(Kn,5),d.Gf(Hn,7)),2&t){let t;d.iGM(t=d.CRH())&&(e.MaritalTipeSupplierDropdown=t.first),d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:61,vars:71,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_supplier",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","nama_supplier",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4"],[3,"LabelCaption"],[1,"col-lg-8","col-md-8","col-sm-8","col-xs-8"],["id","marital","formControlName","id_tipe_supplier",3,"dataSource","fields","allowFiltering"],["MaritalTipeSupplierDropdown",""],["formControlName","npwp",3,"label","inputFieldState"],["formControlName","alamat_supplier",3,"label"],[3,"dataSource","fields","allowFiltering","change"],["ProvinsiDropdown",""],["KotaDropdown",""],["id","kecamatan","formControlName","kode_wilayah",3,"dataSource","fields","allowFiltering"],["KecamatanDropdown",""],["formControlName","negara",3,"label","inputFieldState"],["formControlName","contact_person",3,"label","inputFieldState"],["formControlName","telepon",3,"label","inputFieldState"],["formControlName","fax",3,"label","inputFieldState"],["formControlName","kode_pos",3,"label","inputFieldState"],["formControlName","email",3,"label","inputFieldState"],["formControlName","default_hari_tempo_bayar",3,"label","inputFieldState"],["formControlName","default_hari_pengiriman",3,"label","inputFieldState"],["formControlName","default_prosentase_diskon",3,"label","inputFieldState"],["formControlName","default_prosentase_tax",3,"label","inputFieldState"],["formControlName","is_tax","id","is_tax",3,"label"],["formControlName","is_active","id","is_active",3,"label"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Supplier"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Supplier"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.TgZ(18,"div",7),d.TgZ(19,"div",11),d._UZ(20,"atm-label",12),d.qZA(),d.TgZ(21,"div",13),d._UZ(22,"ejs-dropdownlist",14,15),d.ALo(24,"async"),d.qZA(),d.qZA(),d._UZ(25,"mol-input-text",16),d._UZ(26,"mol-input-textarea",17),d.TgZ(27,"div",7),d.TgZ(28,"div",11),d._UZ(29,"atm-label",12),d.qZA(),d.TgZ(30,"div",13),d.TgZ(31,"ejs-dropdownlist",18,19),d.NdJ("change",function(t){return e.handleDropdownProvinsiChange(t)}),d.ALo(33,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(34,"div",7),d.TgZ(35,"div",11),d._UZ(36,"atm-label",12),d.qZA(),d.TgZ(37,"div",13),d.TgZ(38,"ejs-dropdownlist",18,20),d.NdJ("change",function(t){return e.handleDropdownKotaChange(t)}),d.ALo(40,"async"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(41,"div",7),d.TgZ(42,"div",11),d._UZ(43,"atm-label",12),d.qZA(),d.TgZ(44,"div",13),d._UZ(45,"ejs-dropdownlist",21,22),d.ALo(47,"async"),d.qZA(),d.qZA(),d._UZ(48,"mol-input-text",23),d.qZA(),d.TgZ(49,"div",8),d._UZ(50,"mol-input-text",24),d._UZ(51,"mol-input-text",25),d._UZ(52,"mol-input-text",26),d._UZ(53,"mol-input-text",27),d._UZ(54,"mol-input-text",28),d._UZ(55,"mol-input-text",29),d._UZ(56,"mol-input-text",30),d._UZ(57,"mol-input-text",31),d._UZ(58,"mol-input-text",32),d._UZ(59,"mol-input-checkbox-single",33),d._UZ(60,"mol-input-checkbox-single",34),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(70,jn)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Kode Supplier")("IsFormControlInvalid",e.kode_supplier.invalid)("ValidatorsCaption","Kode Supplier Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),d.xp6(1),d.Q6J("label","Nama Supplier")("IsFormControlInvalid",e.nama_supplier.invalid)("ValidatorsCaption","Nama Supplier Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(3),d.Q6J("LabelCaption","Tipe Supplier"),d.xp6(2),d.Q6J("dataSource",d.lcZ(24,62,e.setupTipeSupplierService.dataSource))("fields",e.MaritalTipeSupplierDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","NPWP")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Alamat"),d.xp6(3),d.Q6J("LabelCaption","Provinsi"),d.xp6(2),d.Q6J("dataSource",d.lcZ(33,64,e.setupProvinsiService.dataSource))("fields",e.SetupWilayahDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Kota"),d.xp6(2),d.Q6J("dataSource",d.lcZ(40,66,e.setupKotaService.dataSource))("fields",e.SetupWilayahDropdownField)("allowFiltering",!0),d.xp6(5),d.Q6J("LabelCaption","Kecamatan *"),d.xp6(2),d.Q6J("dataSource",d.lcZ(47,68,e.setupKecamatanService.dataSource))("fields",e.SetupWilayahDropdownField)("allowFiltering",!0),d.xp6(3),d.Q6J("label","Negara")("inputFieldState",e.inputFieldState),d.xp6(2),d.Q6J("label","Contact Person")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Telepon")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Fax")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Kode Pos")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Email")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Hari Tempo Bayar")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Hari Pengiriman")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Prosentase Diskon")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Prosentase Tax")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Is Tax"),d.xp6(1),d.Q6J("label","Is Active"))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u,w.D,D.rI,Z.h,zl.O],pipes:[i.Ov],styles:[""]}),t})();const Yn=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_temperatur_item","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"temperatur_item","headerText":"Temperatur Item","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"keterangan","headerText":"Keterangan","visible":true}]}');var zn=a.t(Yn,2);let Xn=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=T.MM.SETUP_DATA.SETUP_TEMPERATUR_ITEM}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,mt.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(d.LFG(ht.g),d.LFG(gt.d))},t.\u0275prov=d.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Wn=["OrgTabsRef"],$n=function(){return[]};let to=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupTemperaturItemService=a,this.GridConfig=zn,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_temperatur_item:[0,[]],temperatur_item:["",[l.kI.required]],keterangan:["",[l.kI.required]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.temperatur_item.setValue(""),this.keterangan.setValue("")}GetAllData(){this.setupTemperaturItemService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataTemperaturItem(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupTemperaturItemService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupTemperaturItemService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get temperatur_item(){return this.FormInputData.get("temperatur_item")}get keterangan(){return this.FormInputData.get("keterangan")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(Xn))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-temperatur-item"]],viewQuery:function(t,e){if(1&t&&d.Gf(Wn,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:21,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","temperatur_item",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","keterangan",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Temperatur Item"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Temperatur Item"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(20,$n)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Kode Temperatur Item")("IsFormControlInvalid",e.temperatur_item.invalid)("ValidatorsCaption","Kode Temperatur Item Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Nama Temperatur Item")("IsFormControlInvalid",e.keterangan.invalid)("ValidatorsCaption","Nama Temperatur Item Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u],styles:[""]}),t})();const eo=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_tipe_item","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"kode_tipe_item","headerText":"Tipe Supplier","visible":true},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"tipe_item","headerText":"Tipe Supplier","visible":true},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var ao=a.t(eo,2);const io=["OrgTabsRef"],lo=function(){return[]};let no=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupTipeItemService=a,this.GridConfig=ao,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_tipe_item:[0,[l.kI.required]],kode_tipe_item:["",[l.kI.required]],tipe_item:["",[l.kI.required]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_tipe_item)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.id_tipe_item.setValue(""),this.kode_tipe_item.setValue(""),this.tipe_item.setValue(""),this.is_active.setValue(!0)}GetAllData(){this.setupTipeItemService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataTipeItem(){console.log("Add")}SetFrom(t){t=this.removeInfo(t,["user_created","time_created","user_deactived","time_deactived"]),console.log(t),this.FormInputData.reset(),this.FormInputData.setValue(t)}removeInfo(t,e){return e.forEach(e=>{delete t[e]}),t}SaveAndNew(){const t=this.FormInputData.value;t.user_created=1,"normal"==this.inputFieldState?this.setupTipeItemService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupTipeItemService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_tipe_item:e,user_deactived:1};console.log("data",a),console.log("is_active",t),t?this.setupTipeItemService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupTipeItemService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get id_tipe_item(){return this.FormInputData.get("id_tipe_item")}get kode_tipe_item(){return this.FormInputData.get("kode_tipe_item")}get tipe_item(){return this.FormInputData.get("tipe_item")}get is_active(){return this.FormInputData.get("is_active")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(Al))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-tipe-item"]],viewQuery:function(t,e){if(1&t&&d.Gf(io,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:22,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","kode_tipe_item",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState","disabled"],["formControlName","tipe_item",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Tipe Item"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Tipe Item"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(21,lo)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Kode Tipe Item")("IsFormControlInvalid",e.kode_tipe_item.invalid)("ValidatorsCaption","Kode Tipe Item Tidak Boleh Kosong")("inputFieldState",e.inputFieldState)("disabled","edit"===e.inputFieldState),d.xp6(1),d.Q6J("label","Tipe Item")("IsFormControlInvalid",e.tipe_item.invalid)("ValidatorsCaption","Nama Tipe Item Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u],styles:[""]}),t})();const oo=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_tipe_stockroom","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"tipe_stockroom","headerText":"Tipe Stockroom","visible":true},{"allowEditing":false,"allowSorting":false,"allowFiltering":false,"editType":"defaultEdit","field":"keterangan","headerText":"Keterangan","visible":true}]}');var ro=a.t(oo,2);const so=["OrgTabsRef"],uo=function(){return[]};let co=(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupTipeStockroomService=a,this.GridConfig=ro,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_tipe_stockroom:["",[l.kI.required]],tipe_stockroom:["",[l.kI.required]],keterangan:["",[l.kI.required]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.tipe_stockroom.setValue(""),this.keterangan.setValue("")}GetAllData(){this.setupTipeStockroomService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataTipeStockroom(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupTipeStockroomService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupTipeStockroomService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get tipe_stockroom(){return this.FormInputData.get("tipe_stockroom")}get keterangan(){return this.FormInputData.get("keterangan")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(Fn))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-tipe-stockroom"]],viewQuery:function(t,e){if(1&t&&d.Gf(so,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:21,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","tipe_stockroom",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","keterangan",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Tipe Stokroom"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Tipe Stokroom"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-text",10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(20,uo)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Tipe Stockroom")("IsFormControlInvalid",e.tipe_stockroom.invalid)("ValidatorsCaption","Tipe Stokroom Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","Keterangan")("IsFormControlInvalid",e.keterangan.invalid)("ValidatorsCaption","Keterangan Tidak Boleh Kosong")("inputFieldState",e.inputFieldState))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u],styles:[""]}),t})();const po=JSON.parse('{"GridColumns":[{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"id_tipe_supplier","headerText":"Id","visible":false},{"allowEditing":false,"allowSorting":true,"editType":"defaultEdit","field":"tipe_supplier","headerText":"Tipe Supplier","visible":true},{"allowEditing":false,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_ap","headerText":"AP","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100},{"allowEditing":true,"allowSorting":false,"allowFiltering":false,"editType":"booleanedit","field":"is_active","headerText":"Status Active","type":"boolean","displayAsCheckBox":true,"visible":true,"width":100}]}');var mo=a.t(po,2);const ho=["OrgTabsRef"],go=function(){return[]},fo=[{path:"setup-data",component:null,data:{title:"Setup Data"},children:[{path:"setup-stockroom",component:Pn,data:{title:"Setup Stockroom"}},{path:"setup-item",component:un,data:{title:"Setup Item"}},{path:"setup-grup-item",component:Cl,data:{title:"Setup Grup Item"}},{path:"setup-data-coa",component:ml,data:{title:"Setup COA"}},{path:"setup-perencanaan-kategori",component:yn,data:{title:"Setup Perencanaan Kategori"}},{path:"setup-tipe-supplier",component:(()=>{class t{constructor(t,e,a){this.formBuilder=t,this.utilityService=e,this.setupTipeSupplierService=a,this.GridConfig=mo,this.inputFieldState="normal",this.TabId="Data",this.GridData=null,this.GridDataEditSettings={allowAdding:!0,allowDeleting:!0,allowEditing:!0},this.FormInputData=this.formBuilder.group({id_tipe_supplier:["",[l.kI.required]],tipe_supplier:["",[l.kI.required]],is_ap:[!1,[]],is_active:[!1,[]]})}ngOnInit(){this.GridDataToolbar=[{text:"Add",tooltipText:"Add",prefixIcon:"fas fa-plus fa-sm",id:"add"},{text:"Edit",tooltipText:"Edit",prefixIcon:"fas fa-edit fa-sm",id:"edit"},{text:"Detail",tooltipText:"Detail",prefixIcon:"fas fa-info-circle fa-sm",id:"detail"},"Search"],this.GetAllData()}handleSelectedTabId(t){this.TabId=t}InitalizedGrid(t){this.GridData=t}handleSelectedRow(t){this.SelectedData=t.data}handleActionComplete(t){console.log(t),"save"==t.requestType&&t.data.is_active!=t.rowData.is_active&&this.SetActive(t.data.is_active,t.data.id_tipe_supplier)}handleToolbarClick(t){switch(t.item.id){case"add":this.setNewForm();break;case"edit":this.setEditForm();break;case"detail":this.setViewForm()}}handleClickCommandGrid(t){console.log(t)}handleClickButtonNav(t){switch(t){case"SaveAndNew":this.SaveAndNew();break;case"Clear":this.Clear();break;case"Cancel":this.Cancel()}}handleLoadGrid(t){document.getElementsByClassName("e-grid")[0].addEventListener("keydown",this.KeyDownHandler.bind(this))}setNewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="normal",this.FormInputData.reset(),this.StatusFormNew=!0,this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Clear",Captions:"Clear",Icons1:"fa-redo-alt"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setEditForm(){this.inputFieldState="edit",this.SetFrom(this.SelectedData),this.StatusFormNew=!1,this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.ButtonNav=[{Id:"SaveAndNew",Captions:"Save",Icons1:"fa-save"},{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}setViewForm(){this.OrgTabsRef.onNavigateTabUsingTabId(1,"Input"),this.inputFieldState="detail",this.SetFrom(this.SelectedData),this.ButtonNav=[{Id:"Cancel",Captions:"Back",Icons1:"fa-arrow-left"}]}ResetFrom(){this.FormInputData.reset(),this.id_tipe_supplier.setValue(""),this.tipe_supplier.setValue(""),this.is_ap.setValue(!0)}GetAllData(){this.setupTipeSupplierService.onGetAll().subscribe(t=>{this.GridDatasource=t.data})}AddDataTipeSupplier(){console.log("Add")}SetFrom(t){this.FormInputData.reset(),this.FormInputData.setValue(t)}SaveAndNew(){const t=this.FormInputData.value;"normal"==this.inputFieldState?this.setupTipeSupplierService.onPostSave(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Tambah Data Baru",t.message).then(()=>{this.ResetFrom()})}):this.setupTipeSupplierService.onPutEdit(t).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Ubah Data",t.message).then(()=>{})})}SetActive(t,e){let a={id_tipe_supplier:e};console.log("data",a),console.log("is_active",t),t?this.setupTipeSupplierService.onPutToActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Aktifkan",t.message).then(()=>{})}):this.setupTipeSupplierService.onPutToDeActive(a).subscribe(t=>{this.utilityService.onShowingCustomAlert("success","Berhasil Di Non Aktifkan",t.message).then(()=>{})})}Clear(){this.ResetFrom()}Cancel(){this.ResetFrom(),this.OrgTabsRef.onNavigateTabUsingTabId(0,"Data"),this.GetAllData()}KeyDownHandler(t){13===t.keyCode&&console.log("Enter Has Been Pressed"),46===t.keyCode&&console.log("Delete Key Has Been Pressed"),40===t.keyCode&&console.log("Delete Key Has Been Pressed")}get id_tipe_supplier(){return this.FormInputData.get("id_tipe_supplier")}get tipe_supplier(){return this.FormInputData.get("tipe_supplier")}get is_ap(){return this.FormInputData.get("is_ap")}get is_active(){return this.FormInputData.get("is_active")}}return t.\u0275fac=function(e){return new(e||t)(d.Y36(l.qu),d.Y36(A.t),d.Y36(On))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-setup-tipe-supplier"]],viewQuery:function(t,e){if(1&t&&d.Gf(ho,7),2&t){let t;d.iGM(t=d.CRH())&&(e.OrgTabsRef=t.first)}},decls:18,vars:18,consts:[[3,"ButtonNav","onClickButtonNav"],[3,"showHeader","onGetSelectedTabId"],["OrgTabsRef",""],[3,"Id"],[3,"grid-height","grid-DataSource","grid-paging","grid-editSettings","grid-lines","grid-toolbar","columns","row-selected","toolbar-click","load-grid","initialized","command-click","action-complete"],["GridData",""],[1,"p-2",3,"formGroup"],[1,"row","mb-2"],[1,"col-lg-6","col-md-6","col-sm-6","col-xs-6","mb-2"],["formControlName","tipe_supplier",3,"label","IsFormControlInvalid","ValidatorsCaption","inputFieldState"],["formControlName","is_ap","id","is_ap",3,"label"]],template:function(t,e){1&t&&(d.TgZ(0,"org-card-layout",0),d.NdJ("onClickButtonNav",function(t){return e.handleClickButtonNav(t)}),d.TgZ(1,"org-tabs",1,2),d.NdJ("onGetSelectedTabId",function(t){return e.handleSelectedTabId(t)}),d.TgZ(3,"org-tabs-item"),d.TgZ(4,"org-tabs-label",3),d._uU(5,"Data Setup Tipe Supplier"),d.qZA(),d.TgZ(6,"org-tabs-body"),d.TgZ(7,"mol-grid",4,5),d.NdJ("row-selected",function(t){return e.handleSelectedRow(t)})("toolbar-click",function(t){return e.handleToolbarClick(t)})("load-grid",function(t){return e.handleLoadGrid(t)})("initialized",function(t){return e.InitalizedGrid(t)})("command-click",function(t){return e.handleClickCommandGrid(t)})("action-complete",function(t){return e.handleActionComplete(t)}),d.qZA(),d.qZA(),d.qZA(),d.TgZ(9,"org-tabs-item"),d.TgZ(10,"org-tabs-label",3),d._uU(11,"Input Setup Tipe Supplier"),d.qZA(),d.TgZ(12,"org-tabs-body"),d.TgZ(13,"form",6),d.TgZ(14,"div",7),d.TgZ(15,"div",8),d._UZ(16,"mol-input-text",9),d._UZ(17,"mol-input-checkbox-single",10),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.Q6J("ButtonNav","Input"==e.TabId?e.ButtonNav:d.DdM(17,go)),d.xp6(1),d.Q6J("showHeader",!1),d.xp6(3),d.Q6J("Id","Data"),d.xp6(3),d.Q6J("grid-height",300)("grid-DataSource",e.GridDatasource)("grid-paging",!1)("grid-editSettings",e.GridDataEditSettings)("grid-lines","Both")("grid-toolbar",e.GridDataToolbar)("columns",e.GridConfig.GridColumns),d.xp6(3),d.Q6J("Id","Input"),d.xp6(3),d.Q6J("formGroup",e.FormInputData),d.xp6(3),d.Q6J("label","Tipe Supplier")("IsFormControlInvalid",e.tipe_supplier.invalid)("ValidatorsCaption","Tipe Supplier Tidak Boleh Kosong")("inputFieldState",e.inputFieldState),d.xp6(1),d.Q6J("label","is_AP"))},directives:[p.G,ll.D,nl.K,ol.x,rl.C,h.q,l._Y,l.JL,l.sg,y._,l.JJ,l.u,zl.O],styles:[""]}),t})(),data:{title:"Setup Tipe Supplier"}},{path:"setup-tipe-stockroom",component:co,data:{title:"Setup Tipe Stockroom"}},{path:"setup-tipe-item",component:no,data:{title:"Setup Tipe Item"}},{path:"setup-temperatur-item",component:to,data:{title:"Setup Temperatur Item"}},{path:"setup-pabrik",component:Tn,data:{title:"Setup Pabrik"}},{path:"setup-satuan",component:Cn,data:{title:"Setup Satuan"}},{path:"setup-supplier",component:Vn,data:{title:"Setup Supplier"}},{path:"setup-group-coa",component:bl,data:{title:"Setup Group COA"}}]},{path:"kontrak-pengadaan",component:null,data:{title:"Input Kontrak Pengadaan"},children:[{path:"input-kontrak-pengadaan",component:xe,data:{title:"Input Kontrak Pengadaan"}},{path:"daftar-kontrak-pengadaan",component:we,data:{title:"Daftar Kontrak Pengadaan"}},{path:"view-kontrak-pengadaan/:id/:key",component:Ce,data:{title:"View Kontrak Pengadaan"}}]},{path:"pemesanan",component:null,data:{title:"Input PO"},children:[{path:"input-pemesanan",component:$e,data:{title:"Input Pemesanan"}},{path:"daftar-pemesanan",component:qe,data:{title:"Daftar Pemesanan"}},{path:"view-pemesanan/:id/:key",component:sa,data:{title:"View Pemesanan"}}]},{path:"penerimaan",component:null,data:{title:"Input Penerimaan"},children:[{path:"input-penerimaan",component:qa,data:{title:"Input Penerimaan"}},{path:"daftar-penerimaan",component:ma,data:{title:"Daftar Penerimaan"}},{path:"view-penerimaan/:id/:key",component:Ua,data:{title:"View Penerimaan"}}]},{path:"setharga-order",component:null,data:{title:"Input PO"},children:[{path:"input-setharga-order",component:Wa,data:{title:"Set Harga Order"}}]},{path:"permintaan-mutasi",component:null,data:{title:"Input PO"},children:[{path:"daftar-permintaan-mutasi",component:bt,data:{title:"Permintaan Mutasi"}},{path:"input-permintaan-mutasi",component:Et,data:{title:"Input Permintaan Mutasi"}},{path:"view-permintaan-mutasi/:id/:key",component:Bt,data:{title:"View Permintaaan Mutasi"}}]},{path:"persetujuan-mutasi",component:null,data:{title:"Input PO"},children:[{path:"daftar-persetujuan-mutasi",component:Ot,data:{title:"Persetujuan Mutasi"}},{path:"proses-persetujuan-mutasi/:id/:key",component:$t,data:{title:"Proses Persetujuan Mutasi"}}]},{path:"retur-pembelian",component:null,data:{title:"Input PO"},children:[{path:"daftar-retur-pembelian",component:ii,data:{title:"Daftar Retur Pembelian"}},{path:"input-retur-pembelian",component:ki,data:{title:"Input Retur Pembelian"}},{path:"view-retur-pembelian/:id/:key",component:wi,data:{title:"View Retur Pembelian"}}]},{path:"issue",component:null,data:{title:"Input PO"},children:[{path:"daftar-issue",component:f,data:{title:"Daftar Issue"}},{path:"input-issue",component:L,data:{title:"Input Issue"}},{path:"view-issue/:id/:key",component:H,data:{title:"View Issue"}}]},{path:"issue-validation",component:null,data:{title:"Input PO"},children:[{path:"daftar-issue-validation",component:z,data:{title:"Daftar Issue"}},{path:"view-issue-validation/:id/:key",component:ut,data:{title:"View Issue"}}]},{path:"retur-issue",component:null,data:{title:"Input PO"},children:[{path:"daftar-retur-issue",component:Ni,data:{title:"Daftar Retur Issue"}},{path:"input-retur-issue",component:Ki,data:{title:"Input Retur Issue"}},{path:"view-retur-issue/:id/:key",component:zi,data:{title:"View Retur Issue"}}]}];let _o=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[o.Bz.forChild(fo)],o.Bz]}),t})(),bo=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({imports:[[l.u5,l.UX,i.ez,n.m,_o]]}),t})()},3904:(t,e,a)=>{"use strict";a.d(e,{P:()=>d});var i=a(8512),l=a(7727),n=a(5923),o=a(5366),r=a(3393),s=a(7369);let d=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API_KECAMATAN=n.b.PIS.API_PIS.SETUP_DATA.API_SETUP_DATA.SETUP_KECAMATAN,this.dataSource=new i.X([])}setDataSource(t){this.onGetAll(t).subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(t){return this.result=this.httpOperationService.defaultGetRequest(this.API_KECAMATAN.GET_ALL_SETUP_KECAMATAN_BY_KOTA_ID+t),this.dataSource.next(this.result),this.result}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API_KECAMATAN.POST_SAVE_SETUP_KECAMATAN,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API_KECAMATAN.PUT_UPDATE_SETUP_KECAMATAN,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onDelete(t){return this.httpOperationService.defaultDeleteRequest(this.API_KECAMATAN.DELETE_SETUP_KECAMATAN+t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.error.title||t.message,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(r.g),o.LFG(s.d))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},808:(t,e,a)=>{"use strict";a.d(e,{D:()=>d});var i=a(8512),l=a(7727),n=a(5923),o=a(5366),r=a(3393),s=a(7369);let d=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API_KOTA=n.b.PIS.API_PIS.SETUP_DATA.API_SETUP_DATA.SETUP_KOTA,this.dataSource=new i.X([])}setDataSource(t){this.onGetAll(t).subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(t){return this.httpOperationService.defaultGetRequest(this.API_KOTA.GET_ALL_SETUP_KOTA_BY_PROVINSI_ID+t)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API_KOTA.POST_SAVE_SETUP_KOTA,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API_KOTA.PUT_UPDATE_SETUP_KOTA,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onDelete(t){return this.httpOperationService.defaultDeleteRequest(this.API_KOTA.DELETE_SETUP_KOTA+t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.error.title||t.message,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(r.g),o.LFG(s.d))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},9126:(t,e,a)=>{"use strict";a.d(e,{Z:()=>d});var i=a(8512),l=a(7727),n=a(5923),o=a(5366),r=a(3393),s=a(7369);let d=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API_PROVINSI=n.b.PIS.API_PIS.SETUP_DATA.API_SETUP_DATA.SETUP_PROVINSI,this.dataSource=new i.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API_PROVINSI.GET_ALL_SETUP_PROVINSI)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API_PROVINSI.POST_SAVE_SETUP_PROVINSI,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API_PROVINSI.PUT_UPDATE_SETUP_PROVINSI,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onDelete(t){return this.httpOperationService.defaultDeleteRequest(this.API_PROVINSI.DELETE_SETUP_PROVINSI+t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.error.title||t.message,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(r.g),o.LFG(s.d))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},4452:(t,e,a)=>{"use strict";a.d(e,{j:()=>d});var i=a(8512),l=a(7727),n=a(1611),o=a(5366),r=a(3393),s=a(7369);let d=(()=>{class t{constructor(t,e){this.notificationService=t,this.httpOperationService=e,this.API=n.PHARMACY.SETUP_DATA.SETUP_RUTE_PEMBERIAN_OBAT,this.dataSource=new i.X([])}setDataSource(){this.onGetAll().subscribe(t=>{this.dataSource.next(t.data)})}onGetAll(){return this.httpOperationService.defaultGetRequest(this.API.GET_ALL)}onPostSave(t){return this.httpOperationService.defaultPostRequest(this.API.INSERT,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutEdit(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATE,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETOACTIVE,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}onPutToDeActive(t){return this.httpOperationService.defaultPutRequest(this.API.UPDATETODEACTIVE,t).pipe((0,l.K)(t=>{this.notificationService.onShowToast(t.statusText,t.status+" "+t.statusText,{},!0)}))}}return t.\u0275fac=function(e){return new(e||t)(o.LFG(r.g),o.LFG(s.d))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},8654:(t,e,a)=>{"use strict";a.d(e,{w:()=>o});var i=a(5366),l=a(3391),n=a(1531);let o=(()=>{class t{constructor(){this.clickButton=new i.vpe,this.pressEnter=new i.vpe,this.divLabelClass="col-lg-4",this.divInputClass="col-lg-8"}ngOnInit(){}handleClickButton(t){this.clickButton.emit(t)}onKeypressEvent(t){13==t.charCode&&this.pressEnter.emit(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["mol-input-group"]],inputs:{label:"label",titleValue:"titleValue",inputId:"inputId",disableTitle:"disableTitle",buttonShortcut:["button-shortcut","buttonShortcut"],divLabelClass:"divLabelClass",divInputClass:"divInputClass"},outputs:{clickButton:"clickButton",pressEnter:"pressEnter"},decls:5,vars:9,consts:[[1,"mb-2","row"],[3,"LabelCaption"],[3,"inputId","disableTitle","value","button-shortcut","clickButton"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"div"),i._UZ(2,"atm-label",1),i.qZA(),i.TgZ(3,"div"),i.TgZ(4,"atm-input-group-atom",2),i.NdJ("clickButton",function(t){return e.handleClickButton(t)}),i.qZA(),i.qZA(),i.qZA()),2&t&&(i.xp6(1),i.Tol(e.divLabelClass),i.xp6(1),i.Q6J("LabelCaption",e.label),i.xp6(1),i.Tol(e.divInputClass),i.xp6(1),i.Q6J("inputId",e.inputId)("disableTitle",e.disableTitle)("value",e.titleValue)("button-shortcut",e.buttonShortcut))},directives:[l.D,n.u],styles:[""]}),t})()},3163:(t,e,a)=>{"use strict";a.d(e,{h:()=>s});var i=a(5366),l=a(1041),n=a(3391);let o=(()=>{class t{constructor(){this.inputFieldState="normal",this.externalId="",this._ID="",this._value="",this.onChange=()=>{},this.onTouched=()=>{},this.touched=!1,this.disabled=!1}set id(t){this._ID=t,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(t){this._value=t,this.onChange(t),this.onTouched()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}setDisabledState(t){this.disabled=t}writeValue(t){this.value=t}doChange(t){this.value=t.target.value}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["atm-textarea"]],hostVars:1,hostBindings:function(t,e){2&t&&i.uIk("id",e.externalId)},inputs:{inputFieldState:"inputFieldState",id:"id",_value:["value","_value"]},features:[i._Bn([{provide:l.JU,useExisting:(0,i.Gpc)(()=>t),multi:!0}])],decls:1,vars:4,consts:[["rows","3",1,"form-control","form-select-sm",3,"value","readonly","change"]],template:function(t,e){1&t&&(i.TgZ(0,"textarea",0),i.NdJ("change",function(t){return e.doChange(t)}),i.qZA()),2&t&&(i.ekj("see-detail","detail"===e.inputFieldState),i.Q6J("value",e.value)("readonly","detail"===e.inputFieldState))},styles:[".see-detail[_ngcontent-%COMP%]{border-top:0!important;border-left:0!important;border-right:0!important;border-radius:0!important;background-color:#fff!important;resize:none}.see-detail[_ngcontent-%COMP%]:active, .see-detail[_ngcontent-%COMP%]:focus{box-shadow:none!important}.is-footer[_ngcontent-%COMP%]{font-weight:700;font-size:medium}"]}),t})();var r=a(3410);let s=(()=>{class t{constructor(){this.inputFieldState="normal",this.externalId="",this._ID="",this._value="",this.onChange=()=>{},this.onTouched=()=>{},this.touched=!1,this.disabled=!1}set id(t){this._ID=t,this.externalId=null}get id(){return this._ID}get value(){return this._value}set value(t){this._value=t,this.onChange(t),this.onTouched()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}markAsTouched(){this.touched||(this.onTouched(),this.touched=!0)}setDisabledState(t){this.disabled=t}writeValue(t){this.value=t}doChange(t){this.value=t.target.value}doTouched(t){this.touched=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Xpm({type:t,selectors:[["mol-input-textarea"]],hostVars:1,hostBindings:function(t,e){2&t&&i.uIk("id",e.externalId)},inputs:{FormControlNamed:"FormControlNamed",FormControlCaption:"FormControlCaption",IsFormControlInvalid:"IsFormControlInvalid",ValidatorsCaption:"ValidatorsCaption",inputFieldState:"inputFieldState",id:"id",label:"label",_value:["value","_value"]},features:[i._Bn([{provide:l.JU,useExisting:(0,i.Gpc)(()=>t),multi:!0}])],decls:6,vars:6,consts:[[1,"mb-2","row"],[1,"col-sm-4"],[3,"LabelCaption"],[1,"col-sm-8"],[3,"value","inputFieldState","change","click"],[3,"IsFormControlTouched","IsFormControlInvalid","ValidatorsCaption"]],template:function(t,e){1&t&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._UZ(2,"atm-label",2),i.qZA(),i.TgZ(3,"div",3),i.TgZ(4,"atm-textarea",4),i.NdJ("change",function(t){return e.doChange(t)})("click",function(t){return e.doTouched(t)}),i.qZA(),i._UZ(5,"atm-validators",5),i.qZA(),i.qZA()),2&t&&(i.xp6(2),i.Q6J("LabelCaption",e.label),i.xp6(2),i.Q6J("value",e.value)("inputFieldState",e.inputFieldState),i.xp6(1),i.Q6J("IsFormControlTouched",e.touched)("IsFormControlInvalid",e.IsFormControlInvalid)("ValidatorsCaption",e.ValidatorsCaption))},directives:[n.D,o,r._],styles:[""]}),t})()},4550:(t,e,a)=>{"use strict";a.d(e,{U:()=>p});var i=a(5366),l=a(9996),n=a(5470),o=a(7369),r=a(8654),s=a(3515),d=a(9456);const u=["GridData"];function c(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"div",2),i.TgZ(1,"div",3),i.TgZ(2,"h5",4),i._uU(3),i.qZA(),i.TgZ(4,"button",5),i.NdJ("click",function(){return i.CHM(t),i.oxw().onCloseModal()}),i.qZA(),i.qZA(),i.TgZ(5,"div",6),i.TgZ(6,"div",7),i.TgZ(7,"div",8),i.TgZ(8,"h5",9),i._uU(9,"Cari :"),i.qZA(),i.qZA(),i.TgZ(10,"div",10),i.TgZ(11,"mol-lock-up-filters",11),i.NdJ("onChangeFilters",function(e){return i.CHM(t),i.oxw().onChangeFilters(e)}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(12,"div",7),i.TgZ(13,"div",10),i.TgZ(14,"input",12,13),i.NdJ("keydown.enter",function(){i.CHM(t);const e=i.MAs(15);return i.oxw().onSearchLookup(e.value)}),i.qZA(),i.qZA(),i.qZA(),i.TgZ(16,"div",14),i.TgZ(17,"div",8),i.TgZ(18,"mol-grid",15,16),i.NdJ("row-selected",function(e){return i.CHM(t),i.oxw().onRowSelected(e)})("enter-pressed",function(e){return i.CHM(t),i.oxw().onKeyPressed(e)})("double-click",function(e){return i.CHM(t),i.oxw().onDoubleClicked(e)})("initialized",function(e){return i.CHM(t),i.oxw().onInitialized(e)}),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA()}if(2&t){const t=i.oxw();i.s9C("id",t.modalId),i.xp6(3),i.Oqu(t.modalTitle),i.xp6(8),i.Q6J("filters",t.filters),i.xp6(7),i.Q6J("grid-id",t.gridId)("grid-width",t.gridWidth)("grid-height",t.gridHeight)("grid-DataSource",t.gridDataSource)("grid-lines",t.gridLines)("columns",t.columns)("grid-paging",t.gridPaging)("grid-initial-page",t.gridPageSettings)}}let p=(()=>{class t{constructor(t,e){this.modalService=t,this.httpOperationService=e,this.staticFilters=[],this.isButtonHidden=!1,this.gridId="GridModal",this.gridWidth="auto",this.gridHeight=300,this.gridLines="Both",this.gridPaging=!0,this.titleValue="",this.onGetSelectedData=new i.vpe,this.openModal=new i.vpe,this.divLabelClass="col-lg-4",this.divInputClass="col-lg-8"}ngOnInit(){this.gridPageSettings={pageSizes:!0,pageCount:4,pageSize:11}}onOpenModal(t,e){this.modalRef=this.modalService.show(t,Object.assign({},{class:"modal-lg"})),this.openModal.emit(e),setTimeout(()=>{document.getElementById("searchValueId").focus()},200)}onCloseModal(){this.gridDataSource=[],this.GridData.Grid.refresh(),setTimeout(()=>{this.modalRef.hide()},200)}onFetchDataSource(t){this.httpOperationService.defaultPostRequest(this.lookupUrl,t).pipe((0,l.U)(t=>this.ExceptionalData?t.data.filter(t=>t[this.ExceptionalData.field]!==this.ExceptionalData.value_1&&t[this.ExceptionalData.field]!==this.ExceptionalData.value_2):t.data)).subscribe(t=>{this.gridDataSource=t,setTimeout(()=>{t>0&&(this.GridData.Grid.selectedRowIndex=0)},200)},t=>{console.log(t)})}onChangeFilters(t){this.currentFilters=t}onSearchLookup(t){let e,a;this.currentFilters?(e=this.currentFilters.field,a=this.currentFilters.filter):(e="",a="");let i=[];if(this.staticFilters.length>0)for(let l=0;l<this.staticFilters.length;l++)i.push(this.staticFilters[l]);else i=[{columnName:e,filter:a,searchText:t,searchText2:""}];this.onFetchDataSource(i)}onInitialized(t){this.GridData=t}onRowSelected(t){this.currentData=t.data}onKeyPressed(t){13==t.keyCode&&(t.cancel=!0,this.onKeyPressedUtility(this.currentData))}onDoubleClicked(t){this.onKeyPressedUtility(t)}onKeyPressedUtility(t){this.titleValue=t[this.idTitle],this.onGetSelectedData.emit(t),this.onCloseModal()}handlePressEnter(t){console.log(t)}resetValue(){this.titleValue="",this.currentData=null}ngOnDestroy(){this.gridDataSource=[]}}return t.\u0275fac=function(e){return new(e||t)(i.Y36(n.tT),i.Y36(o.d))},t.\u0275cmp=i.Xpm({type:t,selectors:[["org-input-look-up"]],viewQuery:function(t,e){if(1&t&&i.Gf(u,5),2&t){let t;i.iGM(t=i.CRH())&&(e.GridData=t.first)}},inputs:{label:"label",modalId:["modal-id","modalId"],modalTitle:["modal-title","modalTitle"],modalButton:["modal-button","modalButton"],columnItems:["column-items","columnItems"],filters:["filter-lookup","filters"],lookupUrl:["lookup-url","lookupUrl"],staticFilters:["static-filter","staticFilters"],isButtonHidden:["hide-button","isButtonHidden"],buttonLookup:["button-id","buttonLookup"],buttonShortcut:["button-shortcut","buttonShortcut"],columns:"columns",sourceGrid:"sourceGrid",idTitle:"idTitle",SelectedInputId:"SelectedInputId",divLabelClass:"divLabelClass",divInputClass:"divInputClass",ExceptionalData:["exceptional-data","ExceptionalData"]},outputs:{onGetSelectedData:"onGetSelectedData",openModal:"onOpenModal"},decls:3,vars:7,consts:[[3,"inputId","label","titleValue","disableTitle","button-shortcut","divLabelClass","divInputClass","pressEnter","clickButton"],["template",""],[1,"modal-content","border-0","large-modal-content",3,"id"],[1,"modal-header","py-1","bg-light","text-ungu-tua"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-1"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm","12"],[1,"card-title","mb-1"],[1,"col-lg-12","col-md-12","col-sm-12"],[3,"filters","onChangeFilters"],["type","text","id","searchValueId",1,"form-control",3,"keydown.enter"],["searchValueId",""],[1,"row","mx-0","my-2"],[3,"grid-id","grid-width","grid-height","grid-DataSource","grid-lines","columns","grid-paging","grid-initial-page","row-selected","enter-pressed","double-click","initialized"],["GridData",""]],template:function(t,e){if(1&t){const t=i.EpF();i.TgZ(0,"mol-input-group",0),i.NdJ("pressEnter",function(t){return e.handlePressEnter(t)})("clickButton",function(){i.CHM(t);const a=i.MAs(2);return e.onOpenModal(a,e.modalId)}),i.qZA(),i.YNc(1,c,20,11,"ng-template",null,1,i.W1O)}2&t&&i.Q6J("inputId","inputGroup"+e.idTitle)("label",e.label)("titleValue",e.titleValue)("disableTitle",!0)("button-shortcut",e.buttonShortcut)("divLabelClass",e.divLabelClass)("divInputClass",e.divInputClass)},directives:[r.w,s.W,d.q],styles:[""]}),t})()}}]);