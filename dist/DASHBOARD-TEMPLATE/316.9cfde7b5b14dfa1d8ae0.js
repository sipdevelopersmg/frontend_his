(self.webpackChunkdashboard_template=self.webpackChunkdashboard_template||[]).push([[316],{2064:(t,e,i)=>{"use strict";i.d(e,{W:()=>v});var n=i(1116),l=i(5366),o=i(3391),a=i(4594),r=i(5878);const s=["Column"],d=["Condition"],c=["Value"],u=["DateValue"],h=["DropdownValue"];function g(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"span",33),l._uU(1),l.TgZ(2,"span",34),l.NdJ("click",function(){const e=l.CHM(t).index;return l.oxw().handleDeleteItemFromBadge(e)}),l._UZ(3,"i",35),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit;l.xp6(1),l.lnq(" ",t.columnText," ","equal"==t.filter?"=":"%"," ",t.searchText," \xa0 ")}}function p(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"input",36,37),l.NdJ("keyup.enter",function(){return l.CHM(t),l.oxw().handleClickAddFilter()}),l.qZA()}}function f(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ejs-datepicker",38,39),l.NdJ("keyup.enter",function(){return l.CHM(t),l.oxw().handleClickAddFilter()}),l.qZA()}2&t&&l.Q6J("format","yyyy-MM-dd")}function m(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"ejs-dropdownlist",40,41),l.NdJ("keyup.enter",function(){return l.CHM(t),l.oxw().handleClickAddFilter()}),l.qZA()}if(2&t){const t=l.oxw();l.Q6J("dataSource",t.FilterDropdownDatasource)("fields",t.FilterDropdownFields)}}function Z(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",1),l.TgZ(1,"div",42),l.TgZ(2,"div",11),l.TgZ(3,"p",43),l._uU(4),l.qZA(),l.qZA(),l.TgZ(5,"div",44),l.TgZ(6,"p",43),l._uU(7),l.qZA(),l.qZA(),l.TgZ(8,"div",45),l.TgZ(9,"p",43),l._uU(10),l.qZA(),l.qZA(),l.TgZ(11,"div",46),l.NdJ("click",function(){const e=l.CHM(t).index;return l.oxw().handleDeleteFilterItem(e)}),l._UZ(12,"i",47),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=e.$implicit,i=e.index;l.xp6(4),l.AsE(" ",i+1,". \xa0 ",t.columnText," "),l.xp6(3),l.Oqu(t.filter),l.xp6(3),l.hij(" ",t.searchText," ")}}let v=(()=>{class t{constructor(){this.AdvancedFilterArray=[],this.AdvancedFilterArrayEmitting=[],this.FilterState="String",this.FilterColumnFields={text:"text",value:"value"},this.FilterConditionDatasource=[],this.FilterConditionFields={text:"text",value:"value"},this.FilterDropdownDatasource=[],this.FilterDropdownFields={},this.HandlingPencarian=new l.vpe,this.HandleChangeFilter=new l.vpe}ngOnInit(){}handleChangeFilterColumns(t){if(t){const e=t.indexOf("Tgl")>-1;e&&(this.FilterState="Date",this.FilterConditionDatasource=[{text:"Equal",value:"between"}]);const i=t.indexOf("Pilih")>-1;i&&(this.FilterState="Dropdown",this.FilterConditionDatasource=[{text:"Contains",value:"like"}],this.HandleChangeFilter.emit(t)),e||i||(this.FilterState="String",this.FilterConditionDatasource=[{text:"Equal",value:"equal"},{text:"Contains",value:"like"}])}}handleClickAddFilter(){let t;switch(this.FilterState){case"String":t=this.Value.nativeElement.value;break;case"Date":t=(0,n.p6)(this.DateValue.value,"yyyy-MM-dd","EN");break;case"Dropdown":t=this.DropdownValue.value;break;default:t=""}this.AdvancedFilterArray.push({columnText:this.Column.text,columnName:this.Column.value,filter:this.Condition.value,searchText:t}),this.AdvancedFilterArrayEmitting.push({columnName:this.Column.value,filter:this.Condition.value,searchText:t,searchText2:"Date"==this.FilterState?t:""}),setTimeout(()=>{this.onResetFilter()},100)}handleDeleteFilterItem(t){this.AdvancedFilterArray.splice(t,1),this.AdvancedFilterArrayEmitting.splice(t,1)}handleDeleteItemFromBadge(t){this.AdvancedFilterArray.splice(t,1),this.AdvancedFilterArrayEmitting.splice(t,1),this.handlePencarian()}onResetFilter(){switch(this.Column.value=null,this.Condition.value=null,this.FilterState){case"String":this.Value.nativeElement.value="";break;case"Date":this.DateValue.value=null;break;case"Dropdown":this.DropdownValue.value=null}}handlePencarian(){this.HandlingPencarian.emit(this.AdvancedFilterArrayEmitting),document.getElementById("btnClose").click()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Xpm({type:t,selectors:[["mol-offcanvas-filter"]],viewQuery:function(t,e){if(1&t&&(l.Gf(s,5),l.Gf(d,5),l.Gf(c,5),l.Gf(u,5),l.Gf(h,5)),2&t){let t;l.iGM(t=l.CRH())&&(e.Column=t.first),l.iGM(t=l.CRH())&&(e.Condition=t.first),l.iGM(t=l.CRH())&&(e.Value=t.first),l.iGM(t=l.CRH())&&(e.DateValue=t.first),l.iGM(t=l.CRH())&&(e.DropdownValue=t.first)}},inputs:{FilterColumnDatasource:"FilterColumnDatasource",FilterDropdownDatasource:"FilterDropdownDatasource",FilterDropdownFields:"FilterDropdownFields"},outputs:{HandlingPencarian:"handle-pencarian",HandleChangeFilter:"handle-change-filter"},decls:39,vars:13,consts:[[1,"row","align-items-center"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],["id","ButtonOpenOffcanvas","type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasFilter","aria-controls","offcanvasFilter",1,"btn","btn-outline-primary","btn-sm","px-3"],[1,"fas","fa-search","fa-xs"],["class","badge bg-primary mx-2 pt-1 ","style","font-size: 14px;",4,"ngFor","ngForOf"],["tabindex","-1","id","offcanvasFilter","aria-labelledby","offcanvasFilterLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasFilterLabel"],["id","btnClose","type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body"],[1,"row","mb-4"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4","pe-1"],[3,"LabelCaption"],[3,"dataSource","fields","change"],["Column",""],[1,"col-lg-3","col-md-3","col-sm-3","col-xs-3","px-1"],[3,"dataSource","fields"],["Condition",""],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4","px-1"],["id","filterValue","type","text","class","form-control form-select-sm",3,"keyup.enter",4,"ngIf"],[3,"format","keyup.enter",4,"ngIf"],[3,"dataSource","fields","keyup.enter",4,"ngIf"],[1,"col-lg-1","col-md-1","col-sm-1","col-xs-1","ps-1","text-center","cursor-pointer",2,"padding-top","34px",3,"hidden","click"],[1,"fas","fa-plus","text-biru-tua","fa-lg"],[1,"card","border-0"],[1,"card-body","p-1",2,"height","calc(100vh - 20rem)","max-height","calc(100vh - 20rem)","overflow-y","auto"],[1,"row","px-0","mx-0"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12",4,"ngFor","ngForOf"],[1,"card-footer","border-0","bg-white","text-end","px-0"],["type","button",1,"btn","btn-warning","btn-sm","mx-3",3,"click"],[1,"fas","fa-redo-alt","fa-sm"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"],[1,"fas","fa-search","fa-sm"],[1,"badge","bg-primary","mx-2","pt-1",2,"font-size","14px"],[1,"mb-0",3,"click"],[1,"fas","fa-times","text-danger"],["id","filterValue","type","text",1,"form-control","form-select-sm",3,"keyup.enter"],["Value",""],[3,"format","keyup.enter"],["DateValue",""],[3,"dataSource","fields","keyup.enter"],["DropdownValue",""],[1,"row","pb-2","mb-2","border-bottom","align-items-center"],[1,"text-black","mb-0"],[1,"col-lg-3","col-md-3","col-sm-3","col-xs-3","px-2"],[1,"col-lg-4","col-md-4","col-sm-4","col-xs-4","px-2"],[1,"col-lg-1","col-md-1","col-sm-1","col-xs-1","ps-1","text-center","cursor-pointer",3,"click"],[1,"fas","fa-times","text-danger","fa-lg"]],template:function(t,e){if(1&t){const t=l.EpF();l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"button",2),l._UZ(3,"i",3),l._uU(4," Cari Data "),l.qZA(),l.YNc(5,g,4,3,"span",4),l.qZA(),l.qZA(),l.TgZ(6,"div",5),l.TgZ(7,"div",6),l.TgZ(8,"h5",7),l._uU(9,"Advanced Filter"),l.qZA(),l._UZ(10,"button",8),l.qZA(),l.TgZ(11,"div",9),l.TgZ(12,"div",10),l.TgZ(13,"div",11),l._UZ(14,"atm-label",12),l.TgZ(15,"ejs-dropdownlist",13,14),l.NdJ("change",function(){l.CHM(t);const i=l.MAs(16);return e.handleChangeFilterColumns(i.text)}),l.qZA(),l.qZA(),l.TgZ(17,"div",15),l._UZ(18,"atm-label",12),l._UZ(19,"ejs-dropdownlist",16,17),l.qZA(),l.TgZ(21,"div",18),l._UZ(22,"atm-label",12),l.YNc(23,p,2,0,"input",19),l.YNc(24,f,2,1,"ejs-datepicker",20),l.YNc(25,m,2,2,"ejs-dropdownlist",21),l.qZA(),l.TgZ(26,"div",22),l.NdJ("click",function(){return e.handleClickAddFilter()}),l._UZ(27,"i",23),l.qZA(),l.qZA(),l.TgZ(28,"div",24),l.TgZ(29,"div",25),l.TgZ(30,"div",26),l.YNc(31,Z,13,4,"div",27),l.qZA(),l.qZA(),l.TgZ(32,"div",28),l.TgZ(33,"button",29),l.NdJ("click",function(){return e.AdvancedFilterArray=[]}),l._UZ(34,"i",30),l._uU(35," Reset "),l.qZA(),l.TgZ(36,"button",31),l.NdJ("click",function(){return e.handlePencarian()}),l._UZ(37,"i",32),l._uU(38," Cari "),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&t){const t=l.MAs(16),i=l.MAs(20);l.xp6(5),l.Q6J("ngForOf",e.AdvancedFilterArray),l.xp6(9),l.Q6J("LabelCaption","Column"),l.xp6(1),l.Q6J("dataSource",e.FilterColumnDatasource)("fields",e.FilterColumnFields),l.xp6(3),l.Q6J("LabelCaption","Condition"),l.xp6(1),l.Q6J("dataSource",e.FilterConditionDatasource)("fields",e.FilterConditionFields),l.xp6(3),l.Q6J("LabelCaption","Value"),l.xp6(1),l.Q6J("ngIf","String"==e.FilterState),l.xp6(1),l.Q6J("ngIf","Date"==e.FilterState),l.xp6(1),l.Q6J("ngIf","Dropdown"==e.FilterState),l.xp6(1),l.Q6J("hidden",!t.Value&&!i.value),l.xp6(5),l.Q6J("ngForOf",e.AdvancedFilterArray)}},directives:[n.sg,o.D,a.rI,n.O5,r.Lr],styles:["button#ButtonOpenOffcanvas[_ngcontent-%COMP%]:active, button#ButtonOpenOffcanvas[_ngcontent-%COMP%]:focus{border:0!important;box-shadow:none!important}#offcanvasFilter[_ngcontent-%COMP%]{width:35rem;max-width:35rem}"]}),t})()},3363:(t,e,i)=>{"use strict";i.d(e,{N:()=>h});var n=i(5366),l=i(1305),o=i(5470),a=i(7369),r=i(3515),s=i(9456);const d=["template"],c=["grid"];function u(t,e){if(1&t){const t=n.EpF();n.TgZ(0,"div",1),n.TgZ(1,"div",2),n.TgZ(2,"h5",3),n._uU(3),n.qZA(),n.TgZ(4,"button",4),n.NdJ("click",function(){return n.CHM(t),n.oxw().modalRef.hide()}),n.qZA(),n.qZA(),n.TgZ(5,"div",5),n.TgZ(6,"div",6),n.TgZ(7,"div",7),n.TgZ(8,"h5",8),n._uU(9,"Cari :"),n.qZA(),n.qZA(),n.TgZ(10,"div",9),n.TgZ(11,"mol-lock-up-filters",10),n.NdJ("onChangeFilters",function(e){return n.CHM(t),n.oxw().onChangeFilters(e)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(12,"div",6),n.TgZ(13,"div",9),n.TgZ(14,"input",11,12),n.NdJ("keydown.enter",function(){n.CHM(t);const e=n.MAs(15);return n.oxw().onSearchLookup(e.value)}),n.qZA(),n.qZA(),n.qZA(),n.TgZ(16,"div",13),n.TgZ(17,"div",7),n.TgZ(18,"mol-grid",14,15),n.NdJ("row-selected",function(e){return n.CHM(t),n.oxw().onRowSelected(e)})("enter-pressed",function(e){return n.CHM(t),n.oxw().onKeyPressed(e)})("double-click",function(e){return n.CHM(t),n.oxw().onDoubleClicked(e)})("initialized",function(e){return n.CHM(t),n.oxw().onInitialized(e)}),n.qZA(),n.qZA(),n.qZA(),n.qZA(),n.qZA()}if(2&t){const t=n.oxw();n.s9C("id",t.modalId),n.xp6(3),n.Oqu(t.modalTitle),n.xp6(8),n.Q6J("filters",t.filters),n.xp6(7),n.Q6J("grid-id",t.gridId)("grid-width",t.gridWidth)("grid-height",t.gridHeight)("grid-DataSource",t.gridDataSource)("grid-lines",t.gridLines)("columns",t.columns)("grid-paging",t.gridPaging)("grid-initial-page",t.gridPageSettings)}}let h=(()=>{class t{constructor(t,e,i){this.modalService=t,this.httpOperationService=e,this.changeDetection=i,this.subscriptions=[],this.staticFilters=[],this.isButtonHidden=!1,this.gridId="GridModal",this.gridWidth="auto",this.gridHeight=300,this.gridLines="Both",this.gridPaging=!0,this.kodeValue="",this.titleValue="",this.onGetSelectedData=new n.vpe,this.openModal=new n.vpe}ngOnInit(){this.gridPageSettings={pageSizes:!0,pageCount:4,pageSize:11}}onInitialized(t){this.grid=t}onOpenModal(){const t=(0,l.aj)(this.modalService.onShow,this.modalService.onHidden).subscribe(()=>this.changeDetection.markForCheck());this.subscriptions.push(this.modalService.onShown.subscribe(()=>{setTimeout(()=>{document.getElementById("searchValueId").focus()},100)})),this.subscriptions.push(t),this.modalRef=this.modalService.show(this.template,Object.assign({},{class:"modal-lg"})),this.unsubscribe()}unsubscribe(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}onCloseModal(){this.gridDataSource=[],setTimeout(()=>{this.modalRef.hide()},200)}onFetchDataSource(t){this.httpOperationService.defaultPostRequest(this.lookupUrl,t).subscribe(t=>{this.gridDataSource=t.data,setTimeout(()=>{t.data.length>0&&(this.grid.Grid.selectedRowIndex=0)},200)},t=>{console.log(t)})}onChangeFilters(t){this.currentFilters=t,console.log(this.filters)}onSearchLookup(t){let e,i;this.currentFilters?(e=this.currentFilters.field,i=this.currentFilters.filter):(e="",i="");let n=[{columnName:e,filter:i,searchText:t,searchText2:""}];if(this.staticFilters.length>0)for(let l=0;l<this.staticFilters.length;l++)n.push(this.staticFilters[l]);this.onFetchDataSource(n)}onRowSelected(t){this.currentData=t.data}onKeyPressed(t){let e=t.keyCode;console.log(this.currentData),13==e&&(t.cancel=!0,this.onKeyPressedUtility(this.currentData))}onKeyPressedUtility(t){this.kodeValue=t[this.idKode],this.titleValue=t[this.idTitle],this.onGetSelectedData.emit(t),this.onCloseModal()}onDoubleClicked(t){this.onKeyPressedUtility(t)}handlePressEnter(t){console.log(t)}resetValue(){this.kodeValue="",this.titleValue="",this.currentData=null}ngOnDestroy(){this.gridDataSource=[]}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(o.tT),n.Y36(a.d),n.Y36(n.sBO))},t.\u0275cmp=n.Xpm({type:t,selectors:[["org-look-up"]],viewQuery:function(t,e){if(1&t&&(n.Gf(d,5),n.Gf(c,5)),2&t){let t;n.iGM(t=n.CRH())&&(e.template=t.first),n.iGM(t=n.CRH())&&(e.grid=t.first)}},inputs:{label:"label",modalId:["modal-id","modalId"],modalTitle:["modal-title","modalTitle"],modalButton:["modal-button","modalButton"],filters:["filter-lookup","filters"],lookupUrl:["lookup-url","lookupUrl"],staticFilters:["static-filter","staticFilters"],isButtonHidden:["hide-button","isButtonHidden"],buttonLookup:["button-id","buttonLookup"],columns:"columns",sourceGrid:"sourceGrid",idKode:"idKode",idTitle:"idTitle",SelectedInputId:"SelectedInputId"},outputs:{onGetSelectedData:"onGetSelectedData",openModal:"onOpenModal"},decls:2,vars:0,consts:[["template",""],[1,"modal-content","border-0","large-modal-content",3,"id"],[1,"modal-header","py-1","bg-light","text-ungu-tua"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","p-1"],[1,"row","mx-0","my-1"],[1,"col-lg-12","col-md-12","col-sm","12"],[1,"card-title","mb-1"],[1,"col-lg-12","col-md-12","col-sm-12"],[3,"filters","onChangeFilters"],["type","text","id","searchValueId",1,"form-control",3,"keydown.enter"],["searchValueId",""],[1,"row","mx-0","my-2"],[3,"grid-id","grid-width","grid-height","grid-DataSource","grid-lines","columns","grid-paging","grid-initial-page","row-selected","enter-pressed","double-click","initialized"],["grid",""]],template:function(t,e){1&t&&n.YNc(0,u,20,11,"ng-template",null,0,n.W1O)},directives:[r.W,s.q],styles:[""]}),t})()}}]);